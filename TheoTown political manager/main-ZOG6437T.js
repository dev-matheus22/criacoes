var VV=Object.defineProperty,UV=Object.defineProperties;var jV=Object.getOwnPropertyDescriptors;var fh=Object.getOwnPropertySymbols,BV=Object.getPrototypeOf,kD=Object.prototype.hasOwnProperty,OD=Object.prototype.propertyIsEnumerable,$V=Reflect.get;var ND=(n,e,t)=>e in n?VV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})kD.call(e,t)&&ND(n,t,e[t]);if(fh)for(var t of fh(e))OD.call(e,t)&&ND(n,t,e[t]);return n},X=(n,e)=>UV(n,jV(e));var Ji=(n,e)=>{var t={};for(var r in n)kD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fh)for(var r of fh(n))e.indexOf(r)<0&&OD.call(n,r)&&(t[r]=n[r]);return t};var Xi=(n,e,t)=>$V(BV(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function P_(n,e){return Object.is(n,e)}var It=null,ph=!1,M_=1,Vn=Symbol("SIGNAL");function De(n){let e=It;return It=n,e}function N_(){return It}var Al={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rl(n){if(ph)throw new Error("");if(It===null)return;It.consumerOnSignalRead(n);let e=It.nextProducerIndex++;if(vh(It),e<It.producerNode.length&&It.producerNode[e]!==n&&Sl(It)){let t=It.producerNode[e];_h(t,It.producerIndexOfThis[e])}It.producerNode[e]!==n&&(It.producerNode[e]=n,It.producerIndexOfThis[e]=Sl(It)?LD(n,It,e):0),It.producerLastReadVersion[e]=n.version}function FD(){M_++}function k_(n){if(!(Sl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===M_)){if(!n.producerMustRecompute(n)&&!V_(n)){x_(n);return}n.producerRecomputeValue(n),x_(n)}}function O_(n){if(n.liveConsumerNode===void 0)return;let e=ph;ph=!0;try{for(let t of n.liveConsumerNode)t.dirty||HV(t)}finally{ph=e}}function F_(){return It?.consumerAllowSignalWrites!==!1}function HV(n){n.dirty=!0,O_(n),n.consumerMarkedDirty?.(n)}function x_(n){n.dirty=!1,n.lastCleanEpoch=M_}function mh(n){return n&&(n.nextProducerIndex=0),De(n)}function L_(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Sl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)_h(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function V_(n){vh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(k_(t),r!==t.version))return!0}return!1}function U_(n){if(vh(n),Sl(n))for(let e=0;e<n.producerNode.length;e++)_h(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function LD(n,e,t){if(VD(n),n.liveConsumerNode.length===0&&UD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=LD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function _h(n,e){if(VD(n),n.liveConsumerNode.length===1&&UD(n))for(let r=0;r<n.producerNode.length;r++)_h(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];vh(i),i.producerIndexOfThis[r]=e}}function Sl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function vh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function VD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function UD(n){return n.producerNode!==void 0}function j_(n,e){let t=Object.create(zV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(k_(t),Rl(t),t.value===gh)throw t.error;return t.value};return r[Vn]=t,r}var A_=Symbol("UNSET"),R_=Symbol("COMPUTING"),gh=Symbol("ERRORED"),zV=X(O({},Al),{value:A_,dirty:!0,error:null,equal:P_,kind:"computed",producerMustRecompute(n){return n.value===A_||n.value===R_},producerRecomputeValue(n){if(n.value===R_)throw new Error("Detected cycle in computations.");let e=n.value;n.value=R_;let t=mh(n),r,i=!1;try{r=n.computation(),De(null),i=e!==A_&&e!==gh&&r!==gh&&n.equal(e,r)}catch(o){r=gh,n.error=o}finally{L_(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function qV(){throw new Error}var jD=qV;function BD(n){jD(n)}function B_(n){jD=n}var WV=null;function $_(n,e){let t=Object.create(yh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Rl(t),t.value);return r[Vn]=t,r}function xl(n,e){F_()||BD(n),n.equal(n.value,e)||(n.value=e,GV(n))}function H_(n,e){F_()||BD(n),xl(n,e(n.value))}var yh=X(O({},Al),{equal:P_,value:void 0,kind:"signal"});function GV(n){n.version++,FD(),O_(n),WV?.()}function z_(n){let e=De(null);try{return n()}finally{De(e)}}var q_;function Pl(){return q_}function Ci(n){let e=q_;return q_=n,e}var Eh=Symbol("NotFound");function pe(n){return typeof n=="function"}function ia(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wh=ia(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function zo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof wh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{$D(o)}catch(s){e=e??[],s instanceof wh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$D(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zo(t,e)}remove(e){let{_finalizers:t}=this;t&&zo(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var W_=rt.EMPTY;function Ih(n){return n instanceof rt||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function $D(n){pe(n)?n():n.unsubscribe()}var cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oa={setTimeout(n,e,...t){let{delegate:r}=oa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=oa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ch(n){oa.setTimeout(()=>{let{onUnhandledError:e}=cr;if(e)e(n);else throw n})}function Ml(){}var HD=G_("C",void 0,void 0);function zD(n){return G_("E",void 0,n)}function qD(n){return G_("N",n,void 0)}function G_(n,e,t){return{kind:n,value:e,error:t}}var qo=null;function sa(n){if(cr.useDeprecatedSynchronousErrorHandling){let e=!qo;if(e&&(qo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qo;if(qo=null,t)throw r}}else n()}function WD(n){cr.useDeprecatedSynchronousErrorHandling&&qo&&(qo.errorThrown=!0,qo.error=n)}var Wo=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ih(e)&&e.add(this)):this.destination=XV}static create(e,t,r){return new bi(e,t,r)}next(e){this.isStopped?Q_(qD(e),this):this._next(e)}error(e){this.isStopped?Q_(zD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Q_(HD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZV=Function.prototype.bind;function K_(n,e){return ZV.call(n,e)}var Y_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bh(r)}else bh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bh(t)}}},bi=class extends Wo{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&cr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&K_(e.next,o),error:e.error&&K_(e.error,o),complete:e.complete&&K_(e.complete,o)}):i=e}this.destination=new Y_(i)}};function bh(n){cr.useDeprecatedSynchronousErrorHandling?WD(n):Ch(n)}function JV(n){throw n}function Q_(n,e){let{onStoppedNotification:t}=cr;t&&oa.setTimeout(()=>t(n,e))}var XV={closed:!0,next:Ml,error:JV,complete:Ml};var aa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bn(n){return n}function Go(...n){return Z_(n)}function Z_(n){return n.length===0?bn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=t2(t)?t:new bi(t,r,i);return sa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GD(r),new r((i,o)=>{let s=new bi({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[aa](){return this}pipe(...t){return Z_(t)(this)}toPromise(t){return t=GD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function GD(n){var e;return(e=n??cr.Promise)!==null&&e!==void 0?e:Promise}function e2(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function t2(n){return n&&n instanceof Wo||e2(n)&&Ih(n)}function J_(n){return pe(n?.lift)}function Se(n){return e=>{if(J_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(n,e,t,r,i){return new X_(n,e,t,r,i)}var X_=class extends Wo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ca(){return Se((n,e)=>{let t=null;n._refCount++;let r=Ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var la=class extends ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,J_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rt;let t=this.getSubject();e.add(this.source.subscribe(Ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e}refCount(){return ca()(this)}};var KD=ia(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Th(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new KD}next(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?W_:(this.currentObservers=null,o.push(t),new rt(()=>{this.currentObservers=null,zo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return n.create=(e,t)=>new Th(e,t),n})(),Th=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:W_}};var jt=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Nl={now(){return(Nl.delegate||Date).now()},delegate:void 0};var kl=class extends et{constructor(e=1/0,t=1/0,r=Nl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Dh=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var Ol={setInterval(n,e,...t){let{delegate:r}=Ol;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ol;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ua=class extends Dh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ol.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ol.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,zo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var da=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};da.now=Nl.now;var ha=class extends da{constructor(e,t=da.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ev=new ha(ua);var Sh=class extends ua{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ah=class extends ha{};var tv=new Ah(Sh);var fn=new ve(n=>n.complete());function QD(n){return n&&pe(n.schedule)}function YD(n){return n[n.length-1]}function Rh(n){return pe(YD(n))?n.pop():void 0}function eo(n){return QD(YD(n))?n.pop():void 0}function xh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function JD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function ZD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(n){return this instanceof Ko?(this.v=n,this):new Ko(n)}function XD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(i[m]=function(N){return new Promise(function(k,B){o.push([m,N,k,B])>1||c(m,N)})},w&&(i[m]=w(i[m])))}function c(m,w){try{u(r[m](w))}catch(N){g(o[0][3],N)}}function u(m){m.value instanceof Ko?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function g(m,w){m(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function eS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZD=="function"?ZD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Ph=n=>n&&typeof n.length=="number"&&typeof n!="function";function Mh(n){return pe(n?.then)}function Nh(n){return pe(n[aa])}function kh(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function Oh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function n2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fh=n2();function Lh(n){return pe(n?.[Fh])}function Vh(n){return XD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ko(t.read());if(i)return yield Ko(void 0);yield yield Ko(r)}}finally{t.releaseLock()}})}function Uh(n){return pe(n?.getReader)}function ct(n){if(n instanceof ve)return n;if(n!=null){if(Nh(n))return r2(n);if(Ph(n))return i2(n);if(Mh(n))return o2(n);if(kh(n))return tS(n);if(Lh(n))return s2(n);if(Uh(n))return a2(n)}throw Oh(n)}function r2(n){return new ve(e=>{let t=n[aa]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function i2(n){return new ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function o2(n){return new ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ch)})}function s2(n){return new ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tS(n){return new ve(e=>{c2(n,e).catch(t=>e.error(t))})}function a2(n){return tS(Vh(n))}function c2(n,e){var t,r,i,o;return JD(this,void 0,void 0,function*(){try{for(t=eS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function pn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function to(n,e=0){return Se((t,r)=>{t.subscribe(Ae(r,i=>pn(r,n,()=>r.next(i),e),()=>pn(r,n,()=>r.complete(),e),i=>pn(r,n,()=>r.error(i),e)))})}function no(n,e=0){return Se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nS(n,e){return ct(n).pipe(no(e),to(e))}function rS(n,e){return ct(n).pipe(no(e),to(e))}function iS(n,e){return new ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function oS(n,e){return new ve(t=>{let r;return pn(t,e,()=>{r=n[Fh](),pn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function jh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ve(t=>{pn(t,e,()=>{let r=n[Symbol.asyncIterator]();pn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function sS(n,e){return jh(Vh(n),e)}function aS(n,e){if(n!=null){if(Nh(n))return nS(n,e);if(Ph(n))return iS(n,e);if(Mh(n))return rS(n,e);if(kh(n))return jh(n,e);if(Lh(n))return oS(n,e);if(Uh(n))return sS(n,e)}throw Oh(n)}function se(n,e){return e?aS(n,e):ct(n)}function j(...n){let e=eo(n);return se(n,e)}function Pe(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new ve(e?i=>e.schedule(r,0,i):r)}function nv(n){return!!n&&(n instanceof ve||pe(n.lift)&&pe(n.subscribe))}var lr=ia(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bh(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):t?r(e.defaultValue):i(new lr)}})})}function G(n,e){return Se((t,r)=>{let i=0;t.subscribe(Ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:l2}=Array;function u2(n,e){return l2(e)?n(...e):n(e)}function $h(n){return G(e=>u2(n,e))}var{isArray:d2}=Array,{getPrototypeOf:h2,prototype:f2,keys:p2}=Object;function Hh(n){if(n.length===1){let e=n[0];if(d2(e))return{args:e,keys:null};if(g2(e)){let t=p2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function g2(n){return n&&typeof n=="object"&&h2(n)===f2}function zh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ti(...n){let e=eo(n),t=Rh(n),{args:r,keys:i}=Hh(n);if(r.length===0)return se([],e);let o=new ve(m2(r,e,i?s=>zh(i,s):bn));return t?o.pipe($h(t)):o}function m2(n,e,t=bn){return r=>{cS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)cS(e,()=>{let u=se(n[c],e),d=!1;u.subscribe(Ae(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cS(n,e,t){n?pn(t,n,e):e()}function lS(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},m=N=>u<r?w(N):c.push(N),w=N=>{o&&e.next(N),u++;let k=!1;ct(t(N,d++)).subscribe(Ae(e,B=>{i?.(B),o?m(B):e.next(B)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;c.length&&u<r;){let B=c.shift();s?pn(e,s,()=>w(B)):w(B)}g()}catch(B){e.error(B)}}))};return n.subscribe(Ae(e,m,()=>{f=!0,g()})),()=>{a?.()}}function gt(n,e,t=1/0){return pe(e)?gt((r,i)=>G((o,s)=>e(r,o,i,s))(ct(n(r,i))),t):(typeof e=="number"&&(t=e),Se((r,i)=>lS(r,i,n,t)))}function ro(n=1/0){return gt(bn,n)}function uS(){return ro(1)}function fa(...n){return uS()(se(n,eo(n)))}function qh(n){return new ve(e=>{ct(n()).subscribe(e)})}function rv(...n){let e=Rh(n),{args:t,keys:r}=Hh(n),i=new ve(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;ct(t[d]).subscribe(Ae(o,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?zh(r,a):a),o.complete())}))}});return e?i.pipe($h(e)):i}function Ct(n,e){return Se((t,r)=>{let i=0;t.subscribe(Ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function re(n){return Se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ae(t,void 0,void 0,s=>{o=ct(n(s,re(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function dS(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ae(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function io(n,e){return pe(e)?gt(n,e,1):gt(n,1)}function oo(n){return Se((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function it(n){return n<=0?()=>fn:Se((e,t)=>{let r=0;e.subscribe(Ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wh(n=_2){return Se((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _2(){return new lr}function Fl(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Un(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,o)=>n(i,o,r)):bn,it(1),t?oo(e):Wh(()=>new lr))}function pa(n){return n<=0?()=>fn:Se((e,t)=>{let r=[];e.subscribe(Ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function iv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,o)=>n(i,o,r)):bn,pa(1),t?oo(e):Wh(()=>new lr))}function Gh(n,e){return Se(dS(n,e,arguments.length>=2,!0))}function hS(n={}){let{connector:e=()=>new et,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),s=c=void 0,d=f=!1},w=()=>{let N=s;m(),N?.unsubscribe()};return Se((N,k)=>{u++,!f&&!d&&g();let B=c=c??e();k.add(()=>{u--,u===0&&!f&&!d&&(a=ov(w,i))}),B.subscribe(k),!s&&u>0&&(s=new bi({next:ne=>B.next(ne),error:ne=>{f=!0,g(),a=ov(m,t,ne),B.error(ne)},complete:()=>{d=!0,g(),a=ov(m,r),B.complete()}}),ct(N).subscribe(s))})(o)}}function ov(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new bi({next:()=>{r.unsubscribe(),n()}});return ct(e(...t)).subscribe(r)}function Qo(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,hS({connector:()=>new kl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Kh(...n){let e=eo(n);return Se((t,r)=>{(e?fa(n,t,e):fa(n,t)).subscribe(r)})}function ie(n,e){return Se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ae(r,c=>{i?.unsubscribe();let u=0,d=o++;ct(n(c,d)).subscribe(i=Ae(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function sv(n){return Se((e,t)=>{ct(n).subscribe(Ae(t,()=>t.complete(),Ml)),!t.closed&&e.subscribe(t)})}function mt(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ae(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):bn}var nA="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{code;constructor(e,t){super(rA(e,t)),this.code=e}};function v2(n){return`NG0${Math.abs(n)}`}function rA(n,e){return`${v2(n)}${e?": "+e:""}`}var iA=Symbol("InputSignalNode#UNSET"),y2=X(O({},yh),{transformFn:void 0,applyValueToInputSignal(n,e){xl(n,e)}});function oA(n,e){let t=Object.create(y2);t.value=n,t.transformFn=e?.transform;function r(){if(Rl(t),t.value===iA){let i=null;throw new ee(-950,i)}return t.value}return r[Vn]=t,r}function Gl(n){return{toString:n}.toString()}var Qh="__parameters__";function E2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sA(n,e,t){return Gl(()=>{let r=E2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(Qh)?c[Qh]:Object.defineProperty(c,Qh,{value:[]})[Qh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Zo=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function w2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function mn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(mn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function fS(n,e){return n?e?`${n} ${e}`:n:e||""}var I2=Ge({__forward_ref__:Ge});function $n(n){return n.__forward_ref__=$n,n.toString=function(){return mn(this())},n}function dn(n){return aA(n)?n():n}function aA(n){return typeof n=="function"&&n.hasOwnProperty(I2)&&n.__forward_ref__===$n}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $r(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rf(n){return pS(n,lA)||pS(n,uA)}function cA(n){return Rf(n)!==null}function pS(n,e){return n.hasOwnProperty(e)?n[e]:null}function C2(n){let e=n&&(n[lA]||n[uA]);return e||null}function gS(n){return n&&(n.hasOwnProperty(mS)||n.hasOwnProperty(b2))?n[mS]:null}var lA=Ge({\u0275prov:Ge}),mS=Ge({\u0275inj:Ge}),uA=Ge({ngInjectableDef:Ge}),b2=Ge({ngInjectorDef:Ge}),te=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dA(n){return n&&!!n.\u0275providers}var T2=Ge({\u0275cmp:Ge}),D2=Ge({\u0275dir:Ge}),S2=Ge({\u0275pipe:Ge}),A2=Ge({\u0275mod:Ge}),of=Ge({\u0275fac:Ge}),jl=Ge({__NG_ELEMENT_ID__:Ge}),_S=Ge({__NG_ENV_ID__:Ge});function wa(n){return typeof n=="string"?n:n==null?"":String(n)}function R2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wa(n)}function hA(n,e){throw new ee(-200,n)}function yy(n,e){throw new ee(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),wv;function fA(){return wv}function gn(n){let e=wv;return wv=n,e}function pA(n,e,t){let r=Rf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;yy(n,"Injector")}var x2={},Jo=x2,Iv="__NG_DI_FLAG__",sf=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Eh:Jo,r)}},af="ngTempTokenPath",P2="ngTokenPath",M2=/\n/gm,N2="\u0275",vS="__source";function k2(n,e=_e.Default){if(Pl()===void 0)throw new ee(-203,!1);if(Pl()===null)return pA(n,void 0,e);{let t=Pl(),r;return t instanceof sf?r=t.injector:r=t,r.get(n,e&_e.Optional?null:void 0,e)}}function Y(n,e=_e.Default){return(fA()||k2)(dn(n),e)}function U(n,e=_e.Default){return Y(n,xf(e))}function xf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cv(n){let e=[];for(let t=0;t<n.length;t++){let r=dn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let a=r[s],c=O2(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function gA(n,e){return n[Iv]=e,n.prototype[Iv]=e,n}function O2(n){return n[Iv]}function F2(n,e,t,r){let i=n[af];throw e[vS]&&i.unshift(e[vS]),n.message=L2(`
`+n.message,i,t,r),n[P2]=i,n[af]=null,n}function L2(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==N2?n.slice(2):n;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(M2,`
  `)}`}var bt=gA(sA("Optional"),8);var mA=gA(sA("SkipSelf"),4);function es(n,e){let t=n.hasOwnProperty(of);return t?n[of]:null}function V2(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function U2(n){return n.flat(Number.POSITIVE_INFINITY)}function Ey(n,e){n.forEach(t=>Array.isArray(t)?Ey(t,e):e(t))}function _A(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function cf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function j2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function B2(n,e,t){let r=Kl(n,e);return r>=0?n[r|1]=t:(r=~r,j2(n,r,e,t)),r}function av(n,e){let t=Kl(n,e);if(t>=0)return n[t|1]}function Kl(n,e){return $2(n,e,1)}function $2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ts={},jn=[],Bl=new te(""),vA=new te("",-1),yA=new te(""),lf=class{get(e,t=Jo){if(t===Jo){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return t}};function EA(n,e){let t=n[A2]||null;if(!t&&e===!0)throw new Error(`Type ${mn(n)} does not have '\u0275mod' property.`);return t}function ns(n){return n[T2]||null}function H2(n){return n[D2]||null}function z2(n){return n[S2]||null}function Hn(n){return{\u0275providers:n}}function q2(...n){return{\u0275providers:wA(!0,n),\u0275fromNgModule:!0}}function wA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ey(e,s=>{let a=s;bv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&IA(i,o),t}function IA(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];wy(i,o=>{e(o,r)})}}function bv(n,e,t,r){if(n=dn(n),!n)return!1;let i=null,o=gS(n),s=!o&&ns(n);if(!o&&!s){let c=n.ngModule;if(o=gS(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)bv(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ey(o.imports,d=>{bv(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&IA(u,e)}if(!a){let u=es(i)||(()=>new i);e({provide:i,useFactory:u,deps:jn},i),e({provide:yA,useValue:i,multi:!0},i),e({provide:Bl,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;wy(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function wy(n,e){for(let t of n)dA(t)&&(t=t.\u0275providers),Array.isArray(t)?wy(t,e):e(t)}var W2=Ge({provide:String,useValue:Ge});function CA(n){return n!==null&&typeof n=="object"&&W2 in n}function G2(n){return!!(n&&n.useExisting)}function K2(n){return!!(n&&n.useFactory)}function Ia(n){return typeof n=="function"}function Q2(n){return!!n.useClass}var Pf=new te(""),Jh={},yS={},cv;function Iy(){return cv===void 0&&(cv=new lf),cv}var Qt=class{},$l=class extends Qt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Dv(e,s=>this.processProvider(s)),this.records.set(vA,ga(void 0,this)),i.has("environment")&&this.records.set(Qt,ga(void 0,this));let o=this.records.get(Pf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yA,jn,_e.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Eh:Jo,r)}destroy(){Vl(this),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return Vl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vl(this);let t=Ci(this),r=gn(void 0),i;try{return e()}finally{Ci(t),gn(r)}}get(e,t=Jo,r=_e.Default){if(Vl(this),e.hasOwnProperty(_S))return e[_S](this);r=xf(r);let i,o=Ci(this),s=gn(void 0);try{if(!(r&_e.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=eU(e)&&Rf(e);u&&this.injectableDefInScope(u)?c=ga(Tv(e),Jh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&_e.Self?Iy():this.parent;return t=r&_e.Optional&&t===Jo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[af]=a[af]||[]).unshift(mn(e)),o)throw a;return F2(a,e,"R3InjectorError",this.source)}else throw a}finally{gn(s),Ci(o)}}resolveInjectorInitializers(){let e=De(null),t=Ci(this),r=gn(void 0),i;try{let o=this.get(Bl,jn,_e.Self);for(let s of o)s()}finally{Ci(t),gn(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dn(e);let t=Ia(e)?e:dn(e&&e.provide),r=Z2(e);if(!Ia(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ga(void 0,Jh,!0),i.factory=()=>Cv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=De(null);try{return t.value===yS?hA(mn(e)):t.value===Jh&&(t.value=yS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&X2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Tv(n){let e=Rf(n),t=e!==null?e.factory:es(n);if(t!==null)return t;if(n instanceof te)throw new ee(204,!1);if(n instanceof Function)return Y2(n);throw new ee(204,!1)}function Y2(n){if(n.length>0)throw new ee(204,!1);let t=C2(n);return t!==null?()=>t.factory(n):()=>new n}function Z2(n){if(CA(n))return ga(void 0,n.useValue);{let e=bA(n);return ga(e,Jh)}}function bA(n,e,t){let r;if(Ia(n)){let i=dn(n);return es(i)||Tv(i)}else if(CA(n))r=()=>dn(n.useValue);else if(K2(n))r=()=>n.useFactory(...Cv(n.deps||[]));else if(G2(n))r=(i,o)=>Y(dn(n.useExisting),o!==void 0&&o&_e.Optional?_e.Optional:void 0);else{let i=dn(n&&(n.useClass||n.provide));if(J2(n))r=()=>new i(...Cv(n.deps));else return es(i)||Tv(i)}return r}function Vl(n){if(n.destroyed)throw new ee(205,!1)}function ga(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function J2(n){return!!n.deps}function X2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eU(n){return typeof n=="function"||typeof n=="object"&&n instanceof te}function Dv(n,e){for(let t of n)Array.isArray(t)?Dv(t,e):t&&dA(t)?Dv(t.\u0275providers,e):e(t)}function Zt(n,e){let t;n instanceof $l?(Vl(n),t=n):t=new sf(n);let r,i=Ci(t),o=gn(void 0);try{return e()}finally{Ci(i),gn(o)}}function TA(){return fA()!==void 0||Pl()!=null}function Cy(n){if(!TA())throw new ee(-203,!1)}function tU(n){return typeof n=="function"}var Ri=0,Ee=1,he=2,Yt=3,dr=4,hr=5,uf=6,df=7,_n=8,Ca=9,Di=10,_t=11,Hl=12,ES=13,Pa=14,Fr=15,rs=16,ma=17,Si=18,Mf=19,DA=20,so=21,lv=22,hf=23,Bn=24,ya=25,Dn=26,SA=1;var is=7,ff=8,ba=9,Tn=10;function ao(n){return Array.isArray(n)&&typeof n[SA]=="object"}function xi(n){return Array.isArray(n)&&n[SA]===!0}function by(n){return(n.flags&4)!==0}function Ma(n){return n.componentOffset>-1}function Nf(n){return(n.flags&1)===1}function Lr(n){return!!n.template}function pf(n){return(n[he]&512)!==0}function Na(n){return(n[he]&256)===256}var Sv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function AA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Sn=(()=>{let n=()=>RA;return n.ngInherit=!0,n})();function RA(n){return n.type.prototype.ngOnChanges&&(n.setInput=rU),nU}function nU(){let n=PA(this),e=n?.current;if(e){let t=n.previous;if(t===ts)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function rU(n,e,t,r,i){let o=this.declaredInputs[r],s=PA(n)||iU(n,{previous:ts,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Sv(u&&u.currentValue,t,c===ts),AA(n,e,i,t)}var xA="__ngSimpleChanges__";function PA(n){return n[xA]||null}function iU(n,e){return n[xA]=e}var wS=null;var He=function(n,e=null,t){wS?.(n,e,t)},oU="svg",sU="math";function Vr(n){for(;Array.isArray(n);)n=n[Ri];return n}function MA(n,e){return Vr(e[n])}function Hr(n,e){return Vr(e[n.index])}function NA(n,e){return n.data[e]}function kA(n,e){return n[e]}function aU(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ur(n,e){let t=e[n];return ao(t)?t:t[Ri]}function cU(n){return(n[he]&4)===4}function Ty(n){return(n[he]&128)===128}function lU(n){return xi(n[Yt])}function Ta(n,e){return e==null?null:n[e]}function OA(n){n[ma]=0}function FA(n){n[he]&1024||(n[he]|=1024,Ty(n)&&Ql(n))}function uU(n,e){for(;n>0;)e=e[Pa],n--;return e}function kf(n){return!!(n[he]&9216||n[Bn]?.dirty)}function Av(n){n[Di].changeDetectionScheduler?.notify(8),n[he]&64&&(n[he]|=1024),kf(n)&&Ql(n)}function Ql(n){n[Di].changeDetectionScheduler?.notify(0);let e=os(n);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!Ty(e)));)e=os(e)}function LA(n,e){if(Na(n))throw new ee(911,!1);n[so]===null&&(n[so]=[]),n[so].push(e)}function dU(n,e){if(n[so]===null)return;let t=n[so].indexOf(e);t!==-1&&n[so].splice(t,1)}function os(n){let e=n[Yt];return xi(e)?e[Yt]:e}function Dy(n){return n[df]??=[]}function Sy(n){return n.cleanup??=[]}function hU(n,e,t,r){let i=Dy(e);i.push(t),n.firstCreatePass&&Sy(n).push(r,i.length-1)}var ye={lFrame:qA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Rv=!1;function fU(){return ye.lFrame.elementDepthCount}function pU(){ye.lFrame.elementDepthCount++}function gU(){ye.lFrame.elementDepthCount--}function Ay(){return ye.bindingsEnabled}function mU(){return ye.skipHydrationRootTNode!==null}function _U(n){return ye.skipHydrationRootTNode===n}function vU(){ye.skipHydrationRootTNode=null}function Re(){return ye.lFrame.lView}function Tt(){return ye.lFrame.tView}function K(n){return ye.lFrame.contextLView=n,n[_n]}function Q(n){return ye.lFrame.contextLView=null,n}function Jt(){let n=VA();for(;n!==null&&n.type===64;)n=n.parent;return n}function VA(){return ye.lFrame.currentTNode}function yU(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fs(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function Ry(){return ye.lFrame.isParent}function UA(){ye.lFrame.isParent=!1}function EU(){return ye.lFrame.contextLView}function jA(){return Rv}function IS(n){let e=Rv;return Rv=n,e}function Of(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function wU(){return ye.lFrame.bindingIndex}function IU(n){return ye.lFrame.bindingIndex=n}function Ff(){return ye.lFrame.bindingIndex++}function BA(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CU(){return ye.lFrame.inI18n}function bU(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,xv(e)}function TU(){return ye.lFrame.currentDirectiveIndex}function xv(n){ye.lFrame.currentDirectiveIndex=n}function DU(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $A(){return ye.lFrame.currentQueryIndex}function xy(n){ye.lFrame.currentQueryIndex=n}function SU(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[hr]:null}function HA(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=SU(o),i===null||(o=o[Pa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=zA();return r.currentTNode=e,r.lView=n,!0}function Py(n){let e=zA(),t=n[Ee];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zA(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?qA(n):e}function qA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WA(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var GA=WA;function My(){let n=WA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function AU(n){return(ye.lFrame.contextLView=uU(n,ye.lFrame.contextLView))[_n]}function ps(){return ye.lFrame.selectedIndex}function ss(n){ye.lFrame.selectedIndex=n}function Lf(){let n=ye.lFrame;return NA(n.tView,n.selectedIndex)}function RU(){return ye.lFrame.currentNamespace}var KA=!0;function Vf(){return KA}function Uf(n){KA=n}function xU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ny(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Xh(n,e,t){QA(n,e,3,t)}function ef(n,e,t,r){(n[he]&3)===t&&QA(n,e,t,r)}function uv(n,e){let t=n[he];(t&3)===e&&(t&=16383,t+=1,n[he]=t)}function QA(n,e,t,r){let i=r!==void 0?n[ma]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ma]+=65536),(a<o||o==-1)&&(PU(n,t,e,c),n[ma]=(n[ma]&4294901760)+c+2),c++}function CS(n,e){He(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),He(5,n,e)}}function PU(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[he]>>14<n[ma]>>16&&(n[he]&3)===e&&(n[he]+=16384,CS(a,o)):CS(a,o)}var Ea=-1,as=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function MU(n){return(n.flags&8)!==0}function NU(n){return(n.flags&16)!==0}function kU(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];OU(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function YA(n){return n===3||n===4||n===6}function OU(n){return n.charCodeAt(0)===64}function Da(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?bS(n,t,i,null,e[++r]):bS(n,t,i,null,null))}}return n}function bS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function ZA(n){return n!==Ea}function gf(n){return n&32767}function FU(n){return n>>16}function mf(n,e){let t=FU(n),r=e;for(;t>0;)r=r[Pa],t--;return r}var Pv=!0;function _f(n){let e=Pv;return Pv=n,e}var LU=256,JA=LU-1,XA=5,VU=0,Or={};function UU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(jl)&&(r=t[jl]),r==null&&(r=t[jl]=VU++);let i=r&JA,o=1<<i;e.data[n+(i>>XA)]|=o}function vf(n,e){let t=eR(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,dv(r.data,n),dv(e,null),dv(r.blueprint,null));let i=ky(n,e),o=n.injectorIndex;if(ZA(i)){let s=gf(i),a=mf(i,e),c=a[Ee].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function dv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ky(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oR(i),r===null)return Ea;if(t++,i=i[Pa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ea}function Mv(n,e,t){UU(n,e,t)}function jU(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(YA(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tR(n,e,t){if(t&_e.Optional||n!==void 0)return n;yy(e,"NodeInjector")}function nR(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),(t&(_e.Self|_e.Host))===0){let i=n[Ca],o=gn(void 0);try{return i?i.get(e,r,t&_e.Optional):pA(e,r,t&_e.Optional)}finally{gn(o)}}return tR(r,e,t)}function rR(n,e,t,r=_e.Default,i){if(n!==null){if(e[he]&2048&&!(r&_e.Self)){let s=zU(n,e,t,r,Or);if(s!==Or)return s}let o=iR(n,e,t,r,Or);if(o!==Or)return o}return nR(e,t,r,i)}function iR(n,e,t,r,i){let o=$U(t);if(typeof o=="function"){if(!HA(e,n,r))return r&_e.Host?tR(i,t,r):nR(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))yy(t);else return s}finally{GA()}}else if(typeof o=="number"){let s=null,a=eR(n,e),c=Ea,u=r&_e.Host?e[Fr][hr]:null;for((a===-1||r&_e.SkipSelf)&&(c=a===-1?ky(n,e):e[a+8],c===Ea||!DS(r,!1)?a=-1:(s=e[Ee],a=gf(c),e=mf(c,e)));a!==-1;){let d=e[Ee];if(TS(o,a,d.data)){let f=BU(a,e,t,s,r,u);if(f!==Or)return f}c=e[a+8],c!==Ea&&DS(r,e[Ee].data[a+8]===u)&&TS(o,a,e)?(s=d,a=gf(c),e=mf(c,e)):a=-1}}return i}function BU(n,e,t,r,i,o){let s=e[Ee],a=s.data[n+8],c=r==null?Ma(a)&&Pv:r!=s&&(a.type&3)!==0,u=i&_e.Host&&o===a,d=tf(a,s,t,c,u);return d!==null?zl(e,s,d,a,i):Or}function tf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:u;for(let m=f;m<g;m++){let w=s[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=s[c];if(m&&Lr(m)&&m.type===t)return c}return null}function zl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof as){let a=o;a.resolving&&hA(R2(s[t]));let c=_f(a.canSeeViewProviders);a.resolving=!0;let u,d=a.injectImpl?gn(a.injectImpl):null,f=HA(n,r,_e.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&xU(t,s[t],e)}finally{d!==null&&gn(d),_f(c),a.resolving=!1,GA()}}return o}function $U(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(jl)?n[jl]:void 0;return typeof e=="number"?e>=0?e&JA:HU:e}function TS(n,e,t){let r=1<<n;return!!(t[e+(n>>XA)]&r)}function DS(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var Xo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rR(this._tNode,this._lView,e,xf(r),t)}};function HU(){return new Xo(Jt(),Re())}function fr(n){return Gl(()=>{let e=n.prototype.constructor,t=e[of]||Nv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[of]||Nv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Nv(n){return aA(n)?()=>{let e=Nv(dn(n));return e&&e()}:es(n)}function zU(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[he]&2048&&!pf(s);){let a=iR(o,s,t,r|_e.Self,Or);if(a!==Or)return a;let c=o.parent;if(!c){let u=s[DA];if(u){let d=u.get(t,Or,r);if(d!==Or)return d}c=oR(s),s=s[Pa]}o=c}return i}function oR(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[hr]:null}function Oy(n){return jU(Jt(),n)}function SS(n,e=null,t=null,r){let i=sR(n,e,t,r);return i.resolveInjectorInitializers(),i}function sR(n,e=null,t=null,r,i=new Set){let o=[t||jn,q2(n)];return r=r||(typeof n=="object"?void 0:mn(n)),new $l(o,e||Iy(),r||null,i)}var ht=class n{static THROW_IF_NOT_FOUND=Jo;static NULL=new lf;static create(e,t){if(Array.isArray(e))return SS({name:""},t,e,"");{let r=e.name??"";return SS({name:r},e.parent,e.providers,r)}}static \u0275prov=W({token:n,providedIn:"any",factory:()=>Y(vA)});static __NG_ELEMENT_ID__=-1};var qU=new te("");qU.__NG_ELEMENT_ID__=n=>{let e=Jt();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&_e.Optional)return null;throw new ee(204,!1)};var aR=!1,ka=(()=>{class n{static __NG_ELEMENT_ID__=WU;static __NG_ENV_ID__=t=>t}return n})(),kv=class extends ka{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Na(t)?(e(),()=>{}):(LA(t,e),()=>dU(t,e))}};function WU(){return new kv(Re())}var cs=class{},Fy=new te("",{providedIn:"root",factory:()=>!1});var cR=new te(""),lR=new te(""),gs=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new jt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),jf=(()=>{class n{internalPendingTasks=U(gs);scheduler=U(cs);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return v(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ov=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TA()&&(this.destroyRef=U(ka,{optional:!0})??void 0,this.pendingTasks=U(gs,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=Ov;function yf(...n){}function uR(n){let e,t;function r(){n=yf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function AS(n){return queueMicrotask(()=>n()),()=>{n=yf}}var Ly="isAngularZone",Ef=Ly+"_ID",GU=0,Ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=aR}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,YU(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ly)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,KU,yf,yf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},KU={};function Vy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uR(()=>{n.callbackScheduled=!1,Fv(n),n.isCheckStableRunning=!0,Vy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Fv(n)}function YU(n){let e=()=>{QU(n)},t=GU++;n._inner=n._inner.fork({name:"angular",properties:{[Ly]:!0,[Ef]:t,[Ef+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(ZU(c))return r.invokeTask(o,s,a,c);try{return RS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),xS(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return RS(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JU(c)&&e(),xS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Fv(n),Vy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Fv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function RS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xS(n){n._nesting--,Vy(n)}var Lv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function ZU(n){return dR(n,"__ignore_ng_zone__")}function JU(n){return dR(n,"__scheduler_tick__")}function dR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var jr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},XU=new te("",{providedIn:"root",factory:()=>{let n=U(Ve),e=U(jr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function PS(n,e){return oA(n,e)}function ej(n){return oA(iA,n)}var hR=(PS.required=ej,PS);function tj(){return Oa(Jt(),Re())}function Oa(n,e){return new hn(Hr(n,e))}var hn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=tj}return n})();function nj(n){return n instanceof hn?n.nativeElement:n}function rj(n){return typeof n=="function"&&n[Vn]!==void 0}function Fa(n,e){let t=$_(n,e?.equal),r=t[Vn];return t.set=i=>xl(r,i),t.update=i=>H_(r,i),t.asReadonly=ij.bind(t),t}function ij(){let n=this[Vn];if(n.readonlyFn===void 0){let e=()=>this();e[Vn]=n,n.readonlyFn=e}return n.readonlyFn}function fR(n){return rj(n)&&typeof n.set=="function"}function oj(){return this._results[Symbol.iterator]()}var Vv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=U2(e);(this._changesDetected=!V2(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=oj};function pR(n){return(n.flags&128)===128}var gR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gR||{}),mR=new Map,sj=0;function aj(){return sj++}function cj(n){mR.set(n[Mf],n)}function Uv(n){mR.delete(n[Mf])}var MS="__ngContext__";function La(n,e){ao(e)?(n[MS]=e[Mf],cj(e)):n[MS]=e}function _R(n){return yR(n[Hl])}function vR(n){return yR(n[dr])}function yR(n){for(;n!==null&&!xi(n);)n=n[dr];return n}var jv;function ER(n){jv=n}function lj(){if(jv!==void 0)return jv;if(typeof document<"u")return document;throw new ee(210,!1)}var Uy=new te("",{providedIn:"root",factory:()=>uj}),uj="ng",jy=new te(""),lo=new te("",{providedIn:"platform",factory:()=>"unknown"});var By=new te("",{providedIn:"root",factory:()=>lj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dj="h",hj="b";var wR=!1,fj=new te("",{providedIn:"root",factory:()=>wR});var $y=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}($y||{}),Va=new te(""),NS=new Set;function Ua(n){NS.has(n)||(NS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var IR=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=pj}return n})();function pj(){return new IR(Re(),Jt())}var _a=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(_a||{}),CR=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),gj=[_a.EarlyRead,_a.Write,_a.MixedReadWrite,_a.Read],mj=(()=>{class n{ngZone=U(Ve);scheduler=U(cs);errorHandler=U(jr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){U(Va,{optional:!0})}execute(){let t=this.sequences.size>0;t&&He(16),this.executing=!0;for(let r of gj)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&He(17)}register(t){let{view:r}=t;r!==void 0?((r[ya]??=[]).push(t),Ql(r),r[he]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run($y.AFTER_NEXT_RENDER,t):t()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),Bv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ya];e&&(this.view[ya]=e.filter(t=>t!==this))}};function Hy(n,e){!e?.injector&&Cy(Hy);let t=e?.injector??U(ht);return Ua("NgAfterNextRender"),vj(n,t,e,!0)}function _j(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vj(n,e,t,r){let i=e.get(CR);i.impl??=e.get(mj);let o=e.get(Va,null,{optional:!0}),s=t?.phase??_a.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ka):null,c=e.get(IR,null,{optional:!0}),u=new Bv(i.impl,_j(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var yj=(n,e,t,r)=>{};function Ej(n,e,t,r){yj(n,e,t,r)}var wj=()=>null;function bR(n,e,t=!1){return wj(n,e,t)}function TR(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];xy(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function $v(n,e,t){xy(0);let r=De(null);try{e(n,t)}finally{De(r)}}function zy(n,e,t){if(by(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{De(r)}}}var Br=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Br||{});var Yh;function Ij(){if(Yh===void 0&&(Yh=null,Zo.trustedTypes))try{Yh=Zo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Yh}function kS(n){return Ij()?.createScriptURL(n)||n}var wf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nA})`}};function Bf(n){return n instanceof wf?n.changingThisBreaksApplicationSecurity:n}function DR(n,e){let t=Cj(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${nA})`)}return t===e}function Cj(n){return n instanceof wf&&n.getTypeName()||null}var bj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Tj(n){return n=String(n),n.match(bj)?n:"unsafe:"+n}var qy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qy||{});function Dj(n){let e=AR();return e?e.sanitize(qy.URL,n)||"":DR(n,"URL")?Bf(n):Tj(wa(n))}function Sj(n){let e=AR();if(e)return kS(e.sanitize(qy.RESOURCE_URL,n)||"");if(DR(n,"ResourceURL"))return kS(Bf(n));throw new ee(904,!1)}function Aj(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Sj:Dj}function SR(n,e,t){return Aj(e,t)(n)}function AR(){let n=Re();return n&&n[Di].sanitizer}var Rj=/^>|^->|<!--|-->|--!>|<!-$/g,xj=/(<|>)/g,Pj="\u200B$1\u200B";function Mj(n){return n.replace(Rj,e=>e.replace(xj,Pj))}function RR(n){return n instanceof Function?n():n}function Nj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var xR="ng-template";function kj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Nj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Wy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Wy(n){return n.type===4&&n.value!==xR}function Oj(n,e,t){let r=n.type===4&&!t?xR:n.value;return e===r}function Fj(n,e,t){let r=4,i=n.attrs,o=i!==null?Uj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ur(r)&&!ur(c))return!1;if(s&&ur(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Oj(n,c,t)||c===""&&e.length===1){if(ur(r))return!1;s=!0}}else if(r&8){if(i===null||!kj(n,i,c,t)){if(ur(r))return!1;s=!0}}else{let u=e[++a],d=Lj(c,i,Wy(n),t);if(d===-1){if(ur(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(ur(r))return!1;s=!0}}}}return ur(r)||s}function ur(n){return(n&1)===0}function Lj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return jj(e,n)}function Vj(n,e,t=!1){for(let r=0;r<e.length;r++)if(Fj(n,e[r],t))return!0;return!1}function Uj(n){for(let e=0;e<n.length;e++){let t=n[e];if(YA(t))return e}return n.length}function jj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function OS(n,e){return n?":not("+e.trim()+")":e}function Bj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ur(s)&&(e+=OS(o,i),i=""),r=s,o=o||!ur(r);t++}return i!==""&&(e+=OS(o,i)),e}function $j(n){return n.map(Bj).join(",")}function Hj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ur(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var pr={};function zj(n,e){return n.createText(e)}function qj(n,e,t){n.setValue(e,t)}function Wj(n,e){return n.createComment(Mj(e))}function PR(n,e,t){return n.createElement(e,t)}function If(n,e,t,r,i){n.insertBefore(e,t,r,i)}function MR(n,e,t){n.appendChild(e,t)}function FS(n,e,t,r,i){r!==null?If(n,e,t,r,i):MR(n,e,t)}function Gj(n,e,t){n.removeChild(null,e,t)}function Kj(n,e,t){n.setAttribute(e,"style",t)}function Qj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&kU(n,e,r),i!==null&&Qj(n,e,i),o!==null&&Kj(n,e,o)}function Gy(n,e,t,r,i,o,s,a,c,u,d){let f=Dn+r,g=f+i,m=Yj(f,g),w=typeof u=="function"?u():u;return m[Ee]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function Yj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:pr);return t}function Zj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Gy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ky(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Ri]=i,f[he]=r|4|128|8|64|1024,(u!==null||n&&n[he]&2048)&&(f[he]|=2048),OA(f),f[Yt]=f[Pa]=n,f[_n]=t,f[Di]=s||n&&n[Di],f[_t]=a||n&&n[_t],f[Ca]=c||n&&n[Ca]||null,f[hr]=o,f[Mf]=aj(),f[uf]=d,f[DA]=u,f[Fr]=e.type==2?n[Fr]:f,f}function Jj(n,e,t){let r=Hr(e,n),i=Zj(t),o=n[Di].rendererFactory,s=Qy(n,Ky(n,i,null,kR(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function kR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function OR(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Qy(n,e){return n[Hl]?n[ES][dr]=e:n[Hl]=e,n[ES]=e,e}function P(n=1){FR(Tt(),Re(),ps()+n,!1)}function FR(n,e,t,r){if(!r)if((e[he]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Xh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ef(e,o,0,t)}ss(t)}var $f=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($f||{});function Hv(n,e,t,r){let i=De(null);try{let[o,s,a]=n.inputs[t],c=null;(s&$f.SignalBased)!==0&&(c=e[o][Vn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):AA(e,c,o,r)}finally{De(i)}}function LR(n,e,t,r,i){let o=ps(),s=r&2;try{ss(-1),s&&e.length>Dn&&FR(n,e,Dn,!1),He(s?2:0,i),t(r,i)}finally{ss(o),He(s?3:1,i)}}function Hf(n,e,t){iB(n,e,t),(t.flags&64)===64&&oB(n,e,t)}function Yy(n,e,t=Hr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Xj(n,e,t,r){let o=r.get(fj,wR)||t===Br.ShadowDom,s=n.selectRootElement(e,o);return eB(s),s}function eB(n){tB(n)}var tB=()=>null;function nB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Zy(n,e,t,r,i,o,s,a){if(!a&&Xy(e,n,t,r,i)){Ma(e)&&rB(t,e.index);return}if(e.type&3){let c=Hr(e,t);r=nB(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function rB(n,e){let t=Ur(e,n);t[he]&16||(t[he]|=64)}function iB(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ma(t)&&Jj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||vf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=zl(e,n,s,t);if(La(c,e),o!==null&&lB(e,s-r,c,a,t,o),Lr(a)){let u=Ur(t.index,e);u[_n]=zl(e,n,s,t)}}}function oB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=TU();try{ss(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];xv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&sB(c,u)}}finally{ss(-1),xv(s)}}function sB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Jy(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Vj(e,o.selectors,!1)&&(r??=[],Lr(o)?r.unshift(o):r.push(o))}return r}function aB(n,e,t,r,i,o){let s=Hr(n,e);cB(e[_t],s,o,n.value,t,r,i)}function cB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Hv(r,t,c,u)}}function uB(n,e){let t=n[Ca],r=t?t.get(jr,null):null;r&&r.handleError(e)}function Xy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=e.data[u];Hv(f,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];Hv(d,u,r,i),a=!0}return a}function dB(n,e){let t=Ur(e,n),r=t[Ee];hB(r,t);let i=t[Ri];i!==null&&t[uf]===null&&(t[uf]=bR(i,t[Ca])),He(18),eE(r,t,t[_n]),He(19,t[_n])}function hB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function eE(n,e,t){Py(e);try{let r=n.viewQuery;r!==null&&$v(1,r,t);let i=n.template;i!==null&&LR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Si]?.finishViewCreation(n),n.staticContentQueries&&TR(n,e),n.staticViewQueries&&$v(2,n.viewQuery,t);let o=n.components;o!==null&&fB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[he]&=-5,My()}}function fB(n,e){for(let t=0;t<e.length;t++)dB(n,e[t])}function pB(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[he]&4096?4096:16,c=Ky(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[rs]=u;let d=n[Si];return d!==null&&(c[Si]=d.createEmbeddedView(o)),eE(o,c,t),c}finally{De(i)}}function LS(n,e){return!e||e.firstChild===null||pR(n)}var gB;function tE(n,e){return gB(n,e)}var Ai=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ai||{});function VR(n){return(n.flags&32)===32}function va(n,e,t,r,i){if(r!=null){let o,s=!1;xi(r)?o=r:ao(r)&&(s=!0,r=r[Ri]);let a=Vr(r);n===0&&t!==null?i==null?MR(e,t,a):If(e,t,a,i||null,!0):n===1&&t!==null?If(e,t,a,i||null,!0):n===2?Gj(e,a,s):n===3&&e.destroyNode(a),o!=null&&SB(e,n,o,t,i)}}function mB(n,e){UR(n,e),e[Ri]=null,e[hr]=null}function _B(n,e,t,r,i,o){r[Ri]=i,r[hr]=e,qf(n,r,t,1,i,o)}function UR(n,e){e[Di].changeDetectionScheduler?.notify(9),qf(n,e,e[_t],2,null,null)}function vB(n){let e=n[Hl];if(!e)return hv(n[Ee],n);for(;e;){let t=null;if(ao(e))t=e[Hl];else{let r=e[Tn];r&&(t=r)}if(!t){for(;e&&!e[dr]&&e!==n;)ao(e)&&hv(e[Ee],e),e=e[Yt];e===null&&(e=n),ao(e)&&hv(e[Ee],e),t=e&&e[dr]}e=t}}function nE(n,e){let t=n[ba],r=t.indexOf(e);t.splice(r,1)}function jR(n,e){if(Na(e))return;let t=e[_t];t.destroyNode&&qf(n,e,t,3,null,null),vB(e)}function hv(n,e){if(Na(e))return;let t=De(null);try{e[he]&=-129,e[he]|=256,e[Bn]&&U_(e[Bn]),EB(n,e),yB(n,e),e[Ee].type===1&&e[_t].destroy();let r=e[rs];if(r!==null&&xi(e[Yt])){r!==e[Yt]&&nE(r,e);let i=e[Si];i!==null&&i.detachView(n)}Uv(e)}finally{De(t)}}function yB(n,e){let t=n.cleanup,r=e[df];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[df]=null);let i=e[so];if(i!==null){e[so]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[hf];if(o!==null){e[hf]=null;for(let s of o)s.destroy()}}function EB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof as)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];He(4,a,c);try{c.call(a)}finally{He(5,a,c)}}else{He(4,i,o);try{o.call(i)}finally{He(5,i,o)}}}}}function wB(n,e,t){return IB(n,e.parent,t)}function IB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ri];if(Ma(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Br.None||i===Br.Emulated)return null}return Hr(r,t)}function CB(n,e,t){return TB(n,e,t)}function bB(n,e,t){return n.type&40?Hr(n,t):null}var TB=bB,VS;function zf(n,e,t,r){let i=wB(n,r,e),o=e[_t],s=r.parent||e[hr],a=CB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)FS(o,i,t[c],a,!1);else FS(o,i,t,a,!1);VS!==void 0&&VS(o,r,e,t,i)}function Ul(n,e){if(e!==null){let t=e.type;if(t&3)return Hr(e,n);if(t&4)return zv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ul(n,r);{let i=n[e.index];return xi(i)?zv(-1,i):Vr(i)}}else{if(t&128)return Ul(n,e.next);if(t&32)return tE(e,n)()||Vr(n[e.index]);{let r=BR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=os(n[Fr]);return Ul(i,r)}else return Ul(n,e.next)}}}return null}function BR(n,e){if(e!==null){let r=n[Fr][hr],i=e.projection;return r.projection[i]}return null}function zv(n,e){let t=Tn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Ul(r,i)}return e[is]}function rE(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&La(Vr(a),r),t.flags|=2),!VR(t))if(c&8)rE(n,e,t.child,r,i,o,!1),va(e,n,i,a,o);else if(c&32){let u=tE(t,r),d;for(;d=u();)va(e,n,i,d,o);va(e,n,i,a,o)}else c&16?DB(n,e,r,t,i,o):va(e,n,i,a,o);t=s?t.projectionNext:t.next}}function qf(n,e,t,r,i,o){rE(t,r,n.firstChild,e,i,o,!1)}function DB(n,e,t,r,i,o){let s=t[Fr],c=s[hr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];va(e,n,i,d,o)}else{let u=c,d=s[Yt];pR(r)&&(u.flags|=128),rE(n,e,u,d,i,o,!0)}}function SB(n,e,t,r,i){let o=t[is],s=Vr(t);o!==s&&va(e,n,r,o,i);for(let a=Tn;a<t.length;a++){let c=t[a];qf(c[Ee],c,n,e,r,o)}}function AB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ai.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ai.Important),n.setStyle(t,r,i,o))}}function Cf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vr(o)),xi(o)&&RB(o,r);let s=t.type;if(s&8)Cf(n,e,t.child,r);else if(s&32){let a=tE(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=BR(e,t);if(Array.isArray(a))r.push(...a);else{let c=os(e[Fr]);Cf(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RB(n,e){for(let t=Tn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Cf(r[Ee],r,i,e)}n[is]!==n[Ri]&&e.push(n[is])}function $R(n){if(n[ya]!==null){for(let e of n[ya])e.impl.addSequence(e);n[ya].length=0}}var HR=[];function xB(n){return n[Bn]??PB(n)}function PB(n){let e=HR.pop()??Object.create(NB);return e.lView=n,e}function MB(n){n.lView[Bn]!==n&&(n.lView=null,HR.push(n))}var NB=X(O({},Al),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ql(n.lView)},consumerOnSignalRead(){this.lView[Bn]=this}});function kB(n){let e=n[Bn]??Object.create(OB);return e.lView=n,e}var OB=X(O({},Al),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=os(n.lView);for(;e&&!zR(e[Ee]);)e=os(e);e&&FA(e)},consumerOnSignalRead(){this.lView[Bn]=this}});function zR(n){return n.type!==2}function qR(n){if(n[hf]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hf])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[he]&8192)}}var FB=100;function WR(n,e=!0,t=0){let i=n[Di].rendererFactory,o=!1;o||i.begin?.();try{LB(n,t)}catch(s){throw e&&uB(n,s),s}finally{o||i.end?.()}}function LB(n,e){let t=jA();try{IS(!0),qv(n,e);let r=0;for(;kf(n);){if(r===FB)throw new ee(103,!1);r++,qv(n,1)}}finally{IS(t)}}function VB(n,e,t,r){if(Na(e))return;let i=e[he],o=!1,s=!1;Py(e);let a=!0,c=null,u=null;o||(zR(n)?(u=xB(e),c=mh(u)):N_()===null?(a=!1,u=kB(e),c=mh(u)):e[Bn]&&(U_(e[Bn]),e[Bn]=null));try{OA(e),IU(n.bindingStartIndex),t!==null&&LR(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Xh(e,m,null)}else{let m=n.preOrderHooks;m!==null&&ef(e,m,0,null),uv(e,0)}if(s||UB(e),qR(e),GR(e,0),n.contentQueries!==null&&TR(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&Xh(e,m)}else{let m=n.contentHooks;m!==null&&ef(e,m,1),uv(e,1)}BB(n,e);let f=n.components;f!==null&&QR(e,f,0);let g=n.viewQuery;if(g!==null&&$v(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Xh(e,m)}else{let m=n.viewHooks;m!==null&&ef(e,m,2),uv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lv]){for(let m of e[lv])m();e[lv]=null}o||($R(e),e[he]&=-73)}catch(d){throw o||Ql(e),d}finally{u!==null&&(L_(u,c),a&&MB(u)),My()}}function GR(n,e){for(let t=_R(n);t!==null;t=vR(t))for(let r=Tn;r<t.length;r++){let i=t[r];KR(i,e)}}function UB(n){for(let e=_R(n);e!==null;e=vR(e)){if(!(e[he]&2))continue;let t=e[ba];for(let r=0;r<t.length;r++){let i=t[r];FA(i)}}}function jB(n,e,t){He(18);let r=Ur(e,n);KR(r,t),He(19,r[_n])}function KR(n,e){Ty(n)&&qv(n,e)}function qv(n,e){let r=n[Ee],i=n[he],o=n[Bn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&V_(o)),s||=!1,o&&(o.dirty=!1),n[he]&=-9217,s)VB(r,n,r.template,n[_n]);else if(i&8192){qR(n),GR(n,1);let a=r.components;a!==null&&QR(n,a,1),$R(n)}}function QR(n,e,t){for(let r=0;r<e.length;r++)jB(n,e[r],t)}function BB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ss(~i);else{let o=i,s=t[++r],a=t[++r];bU(s,o);let c=e[o];He(24,c),a(2,c),He(25,c)}}}finally{ss(-1)}}function iE(n,e){let t=jA()?64:1088;for(n[Di].changeDetectionScheduler?.notify(e);n;){n[he]|=t;let r=os(n);if(pf(n)&&!r)return n;n=r}return null}function YR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function $B(n,e,t,r=!0){let i=e[Ee];if(HB(i,e,n,t),r){let s=zv(t,n),a=e[_t],c=a.parentNode(n[is]);c!==null&&_B(i,n[hr],a,e,c,s)}let o=e[uf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Wv(n,e){if(n.length<=Tn)return;let t=Tn+e,r=n[t];if(r){let i=r[rs];i!==null&&i!==n&&nE(i,r),e>0&&(n[t-1][dr]=r[dr]);let o=cf(n,Tn+e);mB(r[Ee],r);let s=o[Si];s!==null&&s.detachView(o[Ee]),r[Yt]=null,r[dr]=null,r[he]&=-129}return r}function HB(n,e,t,r){let i=Tn+r,o=t.length;r>0&&(t[i-1][dr]=e),r<o-Tn?(e[dr]=t[i],_A(t,Tn+r,e)):(t.push(e),e[dr]=null),e[Yt]=t;let s=e[rs];s!==null&&t!==s&&ZR(s,e);let a=e[Si];a!==null&&a.insertView(n),Av(e),e[he]|=128}function ZR(n,e){let t=n[ba],r=e[Yt];if(ao(r))n[he]|=2;else{let i=r[Yt][Fr];e[Fr]!==i&&(n[he]|=2)}t===null?n[ba]=[e]:t.push(e)}var ql=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ee];return Cf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return Na(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Yt];if(xi(e)){let t=e[ff],r=t?t.indexOf(this):-1;r>-1&&(Wv(e,r),cf(t,r))}this._attachedToViewContainer=!1}jR(this._lView[Ee],this._lView)}onDestroy(e){LA(this._lView,e)}markForCheck(){iE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){Av(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,WR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pf(this._lView),t=this._lView[rs];t!==null&&!e&&nE(t,this._lView),UR(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=pf(this._lView),r=this._lView[rs];r!==null&&!t&&ZR(r,this._lView),Av(this._lView)}};var ls=(()=>{class n{static __NG_ELEMENT_ID__=WB}return n})(),zB=ls,qB=class extends zB{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=pB(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ql(i)}};function WB(){return Wf(Jt(),Re())}function Wf(n,e){return n.type&4?new qB(e,n,Oa(n,e)):null}function Gf(n,e,t,r,i){let o=n.data[e];if(o===null)o=GB(n,e,t,r,i),CU()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yU();o.injectorIndex=s===null?-1:s.injectorIndex}return fs(o,!0),o}function GB(n,e,t,r,i){let o=VA(),s=Ry(),a=s?o:o&&o.parent,c=n.data[e]=QB(n,a,t,e,r,i);return KB(n,c,o,s),c}function KB(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function QB(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var pre=new RegExp(`^(\\d+)*(${hj}|${dj})*(.*)`);var YB=()=>null;function US(n,e){return YB(n,e)}var ZB=class{},JR=class{},Gv=class{resolveComponentFactory(e){throw Error(`No component factory found for ${mn(e)}.`)}},Kf=class{static NULL=new Gv},Sa=class{},gr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>JB()}return n})();function JB(){let n=Re(),e=Jt(),t=Ur(e.index,n);return(ao(t)?t:n)[_t]}var XB=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>null})}return n})();var fv={},Kv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xf(r);let i=this.injector.get(e,fv,r);return i!==fv||t===fv?i:this.parentInjector.get(e,t,r)}};function Qv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=fS(i,a);else if(o==2){let c=a,u=e[++s];r=fS(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function H(n,e=_e.Default){let t=Re();if(t===null)return Y(n,e);let r=Jt();return rR(r,t,dn(n),e)}function XR(){let n="invalid";throw new Error(n)}function oE(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,d=t$(s);d===null?a=s:[a,c,u]=d,i$(n,e,t,a,o,c,u)}o!==null&&r!==null&&e$(t,r,o)}function e$(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}function t$(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Lr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,n$(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function n$(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function r$(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function i$(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&Lr(m)&&(c=!0,r$(n,t,g)),Mv(vf(t,e),n,m.type)}u$(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let u=!1,d=!1,f=OR(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=Da(t.mergedAttrs,m.hostAttrs),s$(n,t,e,f,m),l$(f,m,i),s!==null&&s.has(m)){let[N,k]=s.get(m);t.directiveToIndex.set(m.type,[f,N+t.directiveStart,k+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let w=m.type.prototype;!u&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}o$(n,t,o)}function o$(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))jS(0,e,i,r),jS(1,e,i,r),$S(e,r,!1);else{let o=t.get(i);BS(0,e,o,r),BS(1,e,o,r),$S(e,r,!0)}}}function jS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ex(e,o)}}function BS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ex(e,s)}}function ex(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function $S(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Wy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function s$(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=es(i.type,!0)),s=new as(o,Lr(i),H);n.blueprint[r]=s,t[r]=s,a$(n,e,r,OR(n,t,i.hostVars,pr),i)}function a$(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;c$(s)!=a&&s.push(a),s.push(t,r,o)}}function c$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function l$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Lr(e)&&(t[""]=n)}}function u$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tx(n,e,t,r,i,o,s,a){let c=e.consts,u=Ta(c,s),d=Gf(e,n,2,r,u);return o&&oE(e,t,d,Ta(c,a),i),d.mergedAttrs=Da(d.mergedAttrs,d.attrs),d.attrs!==null&&Qv(d,d.attrs,!1),d.mergedAttrs!==null&&Qv(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function nx(n,e){Ny(n,e),by(e)&&n.queries.elementEnd(e)}var bf=class extends Kf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ns(e);return new Aa(t,this.ngModule)}};function d$(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&$f.SignalBased)!==0};return i&&(o.transform=i),o})}function h$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function f$(n,e,t){let r=e instanceof Qt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Kv(t,r):t}function p$(n){let e=n.get(Sa,null);if(e===null)throw new ee(407,!1);let t=n.get(XB,null),r=n.get(cs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function g$(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return PR(e,t,t==="svg"?oU:t==="math"?sU:null)}var Aa=class extends JR{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=d$(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=h$(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$j(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){He(22);let o=De(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:Hj(this.componentDef.selectors[0]),c=Gy(0,null,null,1,0,null,null,null,null,[a],null),u=f$(s,i||this.ngModule,e),d=p$(u),f=d.rendererFactory.createRenderer(null,s),g=r?Xj(f,r,s.encapsulation,u):g$(s,f),m=Ky(null,c,null,512|kR(s),null,null,d,f,u,null,bR(g,u,!0));m[Dn]=g,Py(m);let w=null;try{let N=tx(Dn,c,m,"#host",()=>[this.componentDef],!0,0);g&&(NR(f,g,N),La(g,m)),Hf(c,m,N),zy(c,N,m),nx(c,N),t!==void 0&&m$(N,this.ngContentSelectors,t),w=Ur(N.index,m),m[_n]=w[_n],eE(c,m,null)}catch(N){throw w!==null&&Uv(w),Uv(m),N}finally{He(23),My()}return new Yv(this.componentType,m)}finally{De(o)}}},Yv=class extends ZB{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=NA(t[Ee],Dn),this.location=Oa(this._tNode,t),this.instance=Ur(this._tNode.index,t)[_n],this.hostView=this.changeDetectorRef=new ql(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Xy(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let s=Ur(r.index,i);iE(s,1)}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function m$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var uo=(()=>{class n{static __NG_ELEMENT_ID__=_$}return n})();function _$(){let n=Jt();return ix(n,Re())}var v$=uo,rx=class extends v${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Oa(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){let e=ky(this._hostTNode,this._hostLView);if(ZA(e)){let t=mf(e,this._hostLView),r=gf(e),i=t[Ee].data[r+8];return new Xo(i,t)}else return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=HS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=US(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,LS(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!tU(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new Aa(ns(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let N=(s?u:this.parentInjector).get(Qt,null);N&&(o=N)}let d=ns(c.componentType??{}),f=US(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(u,i,g,o);return this.insertImpl(m.hostView,a,LS(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Yt],u=new rx(c,c[hr],c[Yt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return $B(s,i,o,r),e.attachToViewContainerRef(),_A(pv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=HS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Wv(this._lContainer,t);r&&(cf(pv(this._lContainer),t),jR(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Wv(this._lContainer,t);return r&&cf(pv(this._lContainer),t)!=null?new ql(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function HS(n){return n[ff]}function pv(n){return n[ff]||(n[ff]=[])}function ix(n,e){let t,r=e[n.index];return xi(r)?t=r:(t=YR(r,e,null,n),e[n.index]=t,Qy(e,t)),E$(t,e,n,r),new rx(t,n,e)}function y$(n,e){let t=n[_t],r=t.createComment(""),i=Hr(e,n),o=t.parentNode(i);return If(t,o,r,t.nextSibling(i),!1),r}var E$=C$,w$=()=>!1;function I$(n,e,t){return w$(n,e,t)}function C$(n,e,t,r){if(n[is])return;let i;t.type&8?i=Vr(r):i=y$(e,t),n[is]=i}var Zv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Jv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)sE(e,t).matches!==null&&this.queries[t].setDirty()}},Xv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=P$(e):this.predicate=e}},ey=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ty=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,b$(t,o)),this.matchTNodeWithReadOption(e,t,tf(t,e,o,!1,!1))}else r===ls?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,tf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===hn||i===uo||i===ls&&t.type&4)this.addMatch(t.index,-2);else{let o=tf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function b$(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function T$(n,e){return n.type&11?Oa(n,e):n.type&4?Wf(n,e):null}function D$(n,e,t,r){return t===-1?T$(e,n):t===-2?S$(n,e,r):zl(n,n[Ee],t,e)}function S$(n,e,t){if(t===hn)return Oa(e,n);if(t===ls)return Wf(e,n);if(t===uo)return ix(e,n)}function ox(n,e,t,r){let i=e[Si].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(D$(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function ny(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=ox(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=Tn;f<d.length;f++){let g=d[f];g[rs]===g[Yt]&&ny(g[Ee],g,u,r)}if(d[ba]!==null){let f=d[ba];for(let g=0;g<f.length;g++){let m=f[g];ny(m[Ee],m,u,r)}}}}}return r}function A$(n,e){return n[Si].queries[e].queryList}function R$(n,e,t){let r=new Vv((t&4)===4);return hU(n,e,r,r.destroy),(e[Si]??=new Jv).queries.push(new Zv(r))-1}function x$(n,e,t,r){let i=Tt();if(i.firstCreatePass){let o=Jt();M$(i,new Xv(e,t,r),o.index),N$(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return R$(i,Re(),t)}function P$(n){return n.split(",").map(e=>e.trim())}function M$(n,e,t){n.queries===null&&(n.queries=new ey),n.queries.track(new ty(e,t))}function N$(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function sE(n,e){return n.queries.getByIndex(e)}function k$(n,e){let t=n[Ee],r=sE(t,e);return r.crossesNgTemplate?ny(t,n,e,[]):ox(t,n,r,e)}var Ra=class{},aE=class{};var ry=class extends Ra{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new bf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=EA(e);this._bootstrapComponents=RR(o.bootstrap),this._r3Injector=sR(e,t,[{provide:Ra,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},iy=class extends aE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ry(this.moduleType,e,[])}};var Tf=class extends Ra{injector;componentFactoryResolver=new bf(this);instance=null;constructor(e){super();let t=new $l([...e.providers,{provide:Ra,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver}],e.parent||Iy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yl(n,e,t=null){return new Tf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var O$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wA(!1,t.type),i=r.length>0?Yl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(Y(Qt))})}return n})();function Xt(n){return Gl(()=>{let e=sx(n),t=X(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(O$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Br.Emulated,styles:n.styles||jn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ua("NgStandalone"),ax(t);let r=n.dependencies;return t.directiveDefs=zS(r,!1),t.pipeDefs=zS(r,!0),t.id=j$(t),t})}function F$(n){return ns(n)||H2(n)}function L$(n){return n!==null}function zr(n){return Gl(()=>({type:n.type,bootstrap:n.bootstrap||jn,declarations:n.declarations||jn,imports:n.imports||jn,exports:n.exports||jn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function V$(n,e){if(n==null)return ts;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=$f.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function U$(n){if(n==null)return ts;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ke(n){return Gl(()=>{let e=sx(n);return ax(e),e})}function Qf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function sx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ts,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||jn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:V$(n.inputs,e),outputs:U$(n.outputs),debugInfo:null}}function ax(n){n.features?.forEach(e=>e(n))}function zS(n,e){if(!n)return null;let t=e?z2:F$;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(L$)}function j$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function B$(n){return Object.getPrototypeOf(n.prototype).constructor}function vn(n){let e=B$(n.type),t=!0,r=[n];for(;e;){let i;if(Lr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=gv(n.inputs),s.declaredInputs=gv(n.declaredInputs),s.outputs=gv(n.outputs);let a=i.hostBindings;a&&W$(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&z$(n,c),u&&q$(n,u),$$(n,i),w2(n.outputs,i.outputs),Lr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===vn&&(t=!1)}}e=Object.getPrototypeOf(e)}H$(r)}function $$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function H$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Da(i.hostAttrs,t=Da(t,i.hostAttrs))}}function gv(n){return n===ts?{}:n===jn?[]:n}function z$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function q$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function W$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cx(n){return cE(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function G$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function cE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lE(n,e,t){return n[e]=t}function K$(n,e){return n[e]}function co(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function lx(n,e,t,r){let i=co(n,e,t);return co(n,e+1,r)||i}function Q$(n,e,t,r,i,o,s,a,c){let u=e.consts,d=Gf(e,n,4,s||null,a||null);Ay()&&oE(e,t,d,Ta(u,c),Jy),d.mergedAttrs=Da(d.mergedAttrs,d.attrs),Ny(e,d);let f=d.tView=Gy(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Y$(n,e,t,r,i,o,s,a,c,u){let d=t+Dn,f=e.firstCreatePass?Q$(d,e,n,r,i,o,s,a,c):e.data[d];fs(f,!1);let g=Z$(e,n,f,t);Vf()&&zf(e,n,g,f),La(g,n);let m=YR(g,n,g,f);return n[d]=m,Qy(n,m),I$(m,f,n),Nf(f)&&Hf(e,n,f),c!=null&&Yy(n,f,u),f}function oe(n,e,t,r,i,o,s,a){let c=Re(),u=Tt(),d=Ta(u.consts,o);return Y$(c,u,n,e,t,r,i,d,s,a),oe}var Z$=J$;function J$(n,e,t,r){return Uf(!0),e[_t].createComment("")}var ux=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var dx=new te("");var X$=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>new oy})}return n})(),oy=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ho(n){return!!n&&typeof n.then=="function"}function uE(n){return!!n&&typeof n.subscribe=="function"}var hx=new te("");function dE(n){return Hn([{provide:hx,multi:!0,useValue:n}])}var fx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=U(hx,{optional:!0})??[];injector=U(ht);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Zt(this.injector,i);if(ho(o))t.push(o);else if(uE(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yf=new te("");function e3(){B_(()=>{throw new ee(600,!1)})}function t3(n){return n.isBoundToModule}var n3=10;var us=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=U(XU);afterRenderManager=U(CR);zonelessEnabled=U(Fy);rootEffectScheduler=U(X$);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new et;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=U(gs).hasPendingTasks.pipe(G(t=>!t));constructor(){U(Va,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=U(Qt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ht.NULL){He(10);let o=t instanceof JR;if(!this._injector.get(fx).done){let m="";throw new ee(405,m)}let a;o?a=t:a=this._injector.get(Kf).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=t3(a)?void 0:this._injector.get(Ra),u=r||a.selector,d=a.create(i,[],u,c),f=d.location.nativeElement,g=d.injector.get(dx,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),nf(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),He(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){He(12),this.tracingSnapshot!==null?this.tracingSnapshot.run($y.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ee(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,De(t),this.afterTick.next(),He(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Sa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<n3;)He(14),this.synchronizeOnce(),He(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)r3(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>kf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function r3(n,e,t,r){if(!t&&!kf(n))return;WR(n,e,t&&!r?0:1)}function ja(n,e,t,r){let i=Re(),o=Ff();if(co(i,o,e)){let s=Tt(),a=Lf();aB(a,i,n,e,t,r)}return ja}function px(n,e,t,r){return co(n,Ff(),t)?e+wa(t)+r:pr}function i3(n,e,t,r,i,o){let s=wU(),a=lx(n,s,t,i);return BA(2),a?e+wa(t)+r+wa(i)+o:pr}function Zh(n,e){return n<<17|e<<2}function ds(n){return n>>17&32767}function o3(n){return(n&2)==2}function s3(n,e){return n&131071|e<<17}function sy(n){return n|2}function xa(n){return(n&131068)>>2}function mv(n,e){return n&-131069|e<<2}function a3(n){return(n&1)===1}function ay(n){return n|1}function c3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ds(s),c=xa(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Kl(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let g=ds(n[a+1]);n[r+1]=Zh(g,a),g!==0&&(n[g+1]=mv(n[g+1],r)),n[a+1]=s3(n[a+1],r)}else n[r+1]=Zh(a,0),a!==0&&(n[a+1]=mv(n[a+1],r)),a=r;else n[r+1]=Zh(c,0),a===0?a=r:n[c+1]=mv(n[c+1],r),c=r;u&&(n[r+1]=sy(n[r+1])),qS(n,d,r,!0),qS(n,d,r,!1),l3(e,d,n,r,o),s=Zh(a,c),o?e.classBindings=s:e.styleBindings=s}function l3(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Kl(o,e)>=0&&(t[r+1]=ay(t[r+1]))}function qS(n,e,t,r){let i=n[t+1],o=e===null,s=r?ds(i):xa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];u3(c,e)&&(a=!0,n[s+1]=r?ay(u):sy(u)),s=r?ds(u):xa(u)}a&&(n[t+1]=r?sy(i):ay(i))}function u3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Kl(n,e)>=0:!1}function z(n,e,t){let r=Re(),i=Ff();if(co(r,i,e)){let o=Tt(),s=Lf();Zy(o,s,r,n,e,r[_t],t,!1)}return z}function WS(n,e,t,r,i){Xy(e,n,t,i?"class":"style",r)}function ms(n,e){return d3(n,e,null,!0),ms}function d3(n,e,t,r){let i=Re(),o=Tt(),s=BA(2);if(o.firstUpdatePass&&f3(o,n,s,r),e!==pr&&co(i,s,e)){let a=o.data[ps()];v3(o,a,i,i[_t],n,i[s+1]=y3(e,t),r,s)}}function h3(n,e){return e>=n.expandoStartIndex}function f3(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ps()],s=h3(n,t);E3(o,r)&&e===null&&!s&&(e=!1),e=p3(i,o,e,r),c3(i,o,e,t,s,r)}}function p3(n,e,t,r){let i=DU(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=_v(null,n,e,t,r),t=Wl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=_v(i,n,e,t,r),o===null){let c=g3(n,e,r);c!==void 0&&Array.isArray(c)&&(c=_v(null,n,e,c[1],r),c=Wl(c,e.attrs,r),m3(n,e,r,c))}else o=_3(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function g3(n,e,t){let r=t?e.classBindings:e.styleBindings;if(xa(r)!==0)return n[ds(r)]}function m3(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ds(i)]=r}function _3(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Wl(r,s,t)}return Wl(r,e.attrs,t)}function _v(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Wl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Wl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),B2(n,s,t?!0:e[++o]))}return n===void 0?null:n}function v3(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=a3(u)?GS(c,e,t,i,xa(u),s):void 0;if(!Df(d)){Df(o)||o3(u)&&(o=GS(c,null,t,i,a,s));let f=MA(ps(),t);AB(r,s,f,i,o)}}function GS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=t[i+1];g===pr&&(g=f?jn:void 0);let m=f?av(g,r):d===r?g:void 0;if(u&&!Df(m)&&(m=av(c,r)),Df(m)&&(a=m,s))return a;let w=n[i+1];i=s?ds(w):xa(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=av(c,r))}return a}function Df(n){return n!==void 0}function y3(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=mn(Bf(n)))),n}function E3(n,e){return(n.flags&(e?8:16))!==0}function I(n,e,t,r){let i=Re(),o=Tt(),s=Dn+n,a=i[_t],c=o.firstCreatePass?tx(s,o,i,e,Jy,Ay(),t,r):o.data[s],u=w3(o,i,c,a,e,n);i[s]=u;let d=Nf(c);return fs(c,!0),NR(a,u,c),!VR(c)&&Vf()&&zf(o,i,u,c),(fU()===0||d)&&La(u,i),pU(),d&&(Hf(o,i,c),zy(o,c,i)),r!==null&&Yy(i,c),I}function E(){let n=Jt();Ry()?UA():(n=n.parent,fs(n,!1));let e=n;_U(e)&&vU(),gU();let t=Tt();return t.firstCreatePass&&nx(t,e),e.classesWithoutHost!=null&&MU(e)&&WS(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NU(e)&&WS(t,e,Re(),e.stylesWithoutHost,!1),E}function ft(n,e,t,r){return I(n,e,t,r),E(),ft}var w3=(n,e,t,r,i,o)=>(Uf(!0),PR(r,i,RU()));function I3(n,e,t,r,i){let o=e.consts,s=Ta(o,r),a=Gf(e,n,8,"ng-container",s);s!==null&&Qv(a,s,!0);let c=Ta(o,i);return Ay()&&oE(e,t,a,c,Jy),a.mergedAttrs=Da(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Zl(n,e,t){let r=Re(),i=Tt(),o=n+Dn,s=i.firstCreatePass?I3(o,i,r,e,t):i.data[o];fs(s,!0);let a=C3(i,r,s,n);return r[o]=a,Vf()&&zf(i,r,a,s),La(a,r),Nf(s)&&(Hf(i,r,s),zy(i,s,r)),t!=null&&Yy(r,s),Zl}function Jl(){let n=Jt(),e=Tt();return Ry()?UA():(n=n.parent,fs(n,!1)),e.firstCreatePass&&(Ny(e,n),by(n)&&e.queries.elementEnd(n)),Jl}var C3=(n,e,t,r)=>(Uf(!0),Wj(e[_t],""));function Ze(){return Re()}var Yo=void 0;function b3(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var T3=["en",[["a","p"],["AM","PM"],Yo],[["AM","PM"],Yo,Yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yo,"{1} 'at' {0}",Yo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",b3],vv={};function hE(n){let e=D3(n),t=KS(e);if(t)return t;let r=e.split("-")[0];if(t=KS(r),t)return t;if(r==="en")return T3;throw new ee(701,!1)}function KS(n){return n in vv||(vv[n]=Zo.ng&&Zo.ng.common&&Zo.ng.common.locales&&Zo.ng.common.locales[n]),vv[n]}var Ba=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ba||{});function D3(n){return n.toLowerCase().replace(/_/g,"-")}var Sf="en-US";var S3=Sf;function A3(n){typeof n=="string"&&(S3=n.toLowerCase().replace(/_/g,"-"))}function QS(n,e,t){return function r(i){if(i===Function)return t;let o=Ma(n)?Ur(n.index,e):e;iE(o,5);let s=e[_n],a=YS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=YS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function YS(n,e,t,r){let i=De(null);try{return He(6,e,t),t(r)!==!1}catch(o){return R3(n,o),!1}finally{He(7,e,t),De(i)}}function R3(n,e){let t=n[Ca],r=t?t.get(jr,null):null;r&&r.handleError(e)}function ZS(n,e,t,r,i,o){let s=e[t],a=e[Ee],u=a.data[t].outputs[r],d=s[u],f=a.firstCreatePass?Sy(a):null,g=Dy(e),m=d.subscribe(o),w=g.length;g.push(o,m),f&&f.push(i,n.index,w,-(w+1))}function ae(n,e,t,r){let i=Re(),o=Tt(),s=Jt();return gx(o,i,i[_t],s,n,e,r),ae}function x3(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[df],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function gx(n,e,t,r,i,o,s){let a=Nf(r),u=n.firstCreatePass?Sy(n):null,d=Dy(e),f=!0;if(r.type&3||s){let g=Hr(r,e),m=s?s(g):g,w=d.length,N=s?B=>s(Vr(B[r.index])):r.index,k=null;if(!s&&a&&(k=x3(n,e,i,r.index)),k!==null){let B=k.__ngLastListenerFn__||k;B.__ngNextListenerFn__=o,k.__ngLastListenerFn__=o,f=!1}else{o=QS(r,e,o),Ej(e,m,i,o);let B=t.listen(m,i,o);d.push(o,B),u&&u.push(i,N,w,w+1)}}else o=QS(r,e,o);if(f){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let w=0;w<m.length;w+=2){let N=m[w],k=m[w+1];ZS(r,e,N,k,i,o)}if(g&&g.length)for(let w of g)ZS(r,e,w,i,i,o)}}function L(n=1){return AU(n)}function fE(n,e,t,r,i){let o=Re(),s=px(o,e,t,r);if(s!==pr){let a=Tt(),c=Lf();Zy(a,c,o,n,s,o[_t],i,!1)}return fE}function mx(n,e,t,r){x$(n,e,t,r)}function _x(n){let e=Re(),t=Tt(),r=$A();xy(r+1);let i=sE(t,r);if(n.dirty&&cU(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=k$(e,r);n.reset(o,nj),n.notifyOnChanges()}return!0}return!1}function vx(){return A$(Re(),$A())}function Bt(n){let e=EU();return kA(e,Dn+n)}function R(n,e=""){let t=Re(),r=Tt(),i=n+Dn,o=r.firstCreatePass?Gf(r,i,1,e,null):r.data[i],s=P3(r,t,o,e,n);t[i]=s,Vf()&&zf(r,t,s,o),fs(o,!1)}var P3=(n,e,t,r,i)=>(Uf(!0),zj(e[_t],r));function ot(n){return Ne("",n,""),ot}function Ne(n,e,t){let r=Re(),i=px(r,n,e,t);return i!==pr&&yx(r,ps(),i),Ne}function fo(n,e,t,r,i){let o=Re(),s=i3(o,n,e,t,r,i);return s!==pr&&yx(o,ps(),s),fo}function yx(n,e,t){let r=MA(e,n);qj(n[_t],r,t)}function we(n,e,t){fR(e)&&(e=e());let r=Re(),i=Ff();if(co(r,i,e)){let o=Tt(),s=Lf();Zy(o,s,r,n,e,r[_t],t,!1)}return we}function Te(n,e){let t=fR(n);return t&&n.set(e),t}function Ie(n,e){let t=Re(),r=Tt(),i=Jt();return gx(r,t,t[_t],i,n,e),Ie}function M3(n,e,t){let r=Tt();if(r.firstCreatePass){let i=Lr(n);cy(t,r.data,r.blueprint,i,!0),cy(e,r.data,r.blueprint,i,!1)}}function cy(n,e,t,r,i){if(n=dn(n),Array.isArray(n))for(let o=0;o<n.length;o++)cy(n[o],e,t,r,i);else{let o=Tt(),s=Re(),a=Jt(),c=Ia(n)?n:dn(n.provide),u=bA(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ia(n)||!n.multi){let m=new as(u,i,H),w=Ev(c,e,i?d:d+g,f);w===-1?(Mv(vf(a,s),o,c),yv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[w]=m,s[w]=m)}else{let m=Ev(c,e,d+g,f),w=Ev(c,e,d,d+g),N=m>=0&&t[m],k=w>=0&&t[w];if(i&&!k||!i&&!N){Mv(vf(a,s),o,c);let B=O3(i?k3:N3,t.length,i,r,u);!i&&k&&(t[w].providerFactory=B),yv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=Ex(t[i?w:m],u,!i&&r);yv(o,n,m>-1?m:w,B)}!i&&r&&k&&t[w].componentProviders++}}}function yv(n,e,t,r){let i=Ia(e),o=Q2(e);if(i||o){let c=(o?dn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function Ex(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ev(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function N3(n,e,t,r,i){return ly(this.multi,[])}function k3(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=zl(r,r[Ee],this.providerFactory.index,i);s=c.slice(0,a),ly(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],ly(o,s);return s}function ly(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function O3(n,e,t,r,i){let o=new as(n,t,H);return o.multi=[],o.index=e,o.componentProviders=0,Ex(o,i,r&&!t),o}function qr(n,e=[]){return t=>{t.providersResolver=(r,i)=>M3(r,i?i(n):n,e)}}function $a(n,e,t){let r=Of()+n,i=Re();return i[r]===pr?lE(i,r,t?e.call(t):e()):K$(i,r)}function Xl(n,e,t,r){return Ix(Re(),Of(),n,e,t,r)}function pE(n,e,t,r,i){return F3(Re(),Of(),n,e,t,r,i)}function wx(n,e){let t=n[e];return t===pr?void 0:t}function Ix(n,e,t,r,i,o){let s=e+t;return co(n,s,i)?lE(n,s+1,o?r.call(o,i):r(i)):wx(n,s+1)}function F3(n,e,t,r,i,o,s){let a=e+t;return lx(n,a,i,o)?lE(n,a+2,s?r.call(s,i,o):r(i,o)):wx(n,a+2)}function Dt(n,e){let t=Tt(),r,i=n+Dn;t.firstCreatePass?(r=L3(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=es(r.type,!0)),s,a=gn(H);try{let c=_f(!1),u=o();return _f(c),aU(t,Re(),i,u),u}finally{gn(a)}}function L3(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function St(n,e,t){let r=n+Dn,i=Re(),o=kA(i,r);return V3(i,r)?Ix(i,Of(),e,o.transform,t,o):o.transform(t)}function V3(n,e){return n[Ee].data[e].pure}function Mt(n,e){return Wf(n,e)}var hs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Cx=new hs("19.2.14"),uy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},bx=(()=>{class n{compileModuleSync(t){return new iy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=EA(t),o=RR(i.declarations).reduce((s,a)=>{let c=ns(a);return c&&s.push(new Aa(c)),s},[]);return new uy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U3=(()=>{class n{zone=U(Ve);changeDetectionScheduler=U(cs);applicationRef=U(us);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j3=new te("",{factory:()=>!1});function Tx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ve(X(O({},Sx()),{scheduleInRootZone:t})),[{provide:Ve,useFactory:n},{provide:Bl,multi:!0,useFactory:()=>{let r=U(U3,{optional:!0});return()=>r.initialize()}},{provide:Bl,multi:!0,useFactory:()=>{let r=U(B3);return()=>{r.initialize()}}},e===!0?{provide:cR,useValue:!0}:[],{provide:lR,useValue:t??aR}]}function Dx(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Tx({ngZoneFactory:()=>{let i=Sx(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ua("NgZone_CoalesceEvent"),new Ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Hn([{provide:j3,useValue:!0},{provide:Fy,useValue:!1},r])}function Sx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var B3=(()=>{class n{subscription=new rt;initialized=!1;zone=U(Ve);pendingTasks=U(gs);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $3=(()=>{class n{appRef=U(us);taskService=U(gs);ngZone=U(Ve);zonelessEnabled=U(Fy);tracing=U(Va,{optional:!0});disableScheduling=U(cR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ef):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(lR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?AS:uR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ef+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,AS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H3(){return typeof $localize<"u"&&$localize.locale||Sf}var Zf=new te("",{providedIn:"root",factory:()=>U(Zf,_e.Optional|_e.SkipSelf)||H3()});var dy=new te(""),z3=new te("");function Ll(n){return!n.moduleRef}function q3(n){let e=Ll(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ve);return t.run(()=>{Ll(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(jr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ll(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dy);s.add(o),n.moduleRef.onDestroy(()=>{nf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return G3(r,t,()=>{let o=e.get(fx);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Zf,Sf);if(A3(s||Sf),!e.get(z3,!0))return Ll(n)?e.get(us):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ll(n)){let c=e.get(us);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return W3(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function W3(n,e){let t=n.injector.get(us);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}function G3(n,e,t){try{let r=t();return ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var rf=null;function K3(n=[],e){return ht.create({name:e,providers:[{provide:Pf,useValue:"platform"},{provide:dy,useValue:new Set([()=>rf=null])},...n]})}function Q3(n=[]){if(rf)return rf;let e=K3(n);return rf=e,e3(),Y3(e),e}function Y3(n){let e=n.get(jy,null);Zt(n,()=>{e?.forEach(t=>t())})}function gE(){return!1}var Pi=(()=>{class n{static __NG_ELEMENT_ID__=Z3}return n})();function Z3(n){return J3(Jt(),Re(),(n&16)===16)}function J3(n,e,t){if(Ma(n)&&!t){let r=Ur(n.index,e);return new ql(r,r)}else if(n.type&175){let r=e[Fr];return new ql(r,e)}return null}var hy=class{constructor(){}supports(e){return cx(e)}create(e){return new fy(e)}},X3=(n,e)=>e,fy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||X3}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<JS(r,i,o)?t:r,a=JS(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let m=g<o.length?o[g]:o[g]=0,w=m+g;d<=w&&w<u&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cx(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,G$(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new py(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Af),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Af),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},py=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},gy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Af=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function JS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var my=class{constructor(){}supports(e){return e instanceof Map||cE(e)}create(){return new _y}},_y=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||cE(e)))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new vy(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},vy=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function XS(){return new mE([new hy])}var mE=(()=>{class n{factories;static \u0275prov=W({token:n,providedIn:"root",factory:XS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XS()),deps:[[n,new mA,new bt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();function eA(){return new _E([new my])}var _E=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:eA});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||eA()),deps:[[n,new mA,new bt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ee(901,!1)}}return n})();function Ax(n){He(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Q3(r),o=[Tx({}),{provide:cs,useExisting:$3},...t||[]],s=new Tf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return q3({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{He(9)}}function po(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zn(n){return z_(n)}function Ha(n,e){return j_(n,e?.equal)}var tA=class{[Vn];constructor(e){this[Vn]=e}destroy(){this[Vn].destroy()}};function Rx(n){let e=ns(n);if(!e)return null;let t=new Aa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Nt=new te("");var Mx=null;function qn(){return Mx}function vE(n){Mx??=n}var eu=class{},tu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(Nx),providedIn:"platform"})}return n})(),yE=new te(""),Nx=(()=>{class n extends tu{_location;_history;_doc=U(Nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Jf(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function xx(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function mr(n){return n&&n[0]!=="?"?`?${n}`:n}var _r=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(ep),providedIn:"root"})}return n})(),Xf=new te(""),ep=(()=>{class n extends _r{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Jf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(tu),Y(Xf,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wn=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=nH(xx(Px(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mr(r))}normalize(t){return n.stripTrailingSlash(tH(this._basePath,Px(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mr;static joinWithSlash=Jf;static stripTrailingSlash=xx;static \u0275fac=function(r){return new(r||n)(Y(_r))};static \u0275prov=W({token:n,factory:()=>eH(),providedIn:"root"})}return n})();function eH(){return new Wn(Y(_r))}function tH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Px(n){return n.replace(/\/index.html$/,"")}function nH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var TE=(()=>{class n extends _r{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Jf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(tu),Y(Xf,8))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();var DE=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(DE||{});var Wr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function za(n,e){let t=hE(n),r=t[Ba.NumberSymbols][e];if(typeof r>"u"){if(e===Wr.CurrencyDecimal)return t[Ba.NumberSymbols][Wr.Decimal];if(e===Wr.CurrencyGroup)return t[Ba.NumberSymbols][Wr.Group]}return r}function Ux(n,e){return hE(n)[Ba.NumberFormats][e]}var rH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,kx=22,tp=".",nu="0",iH=";",oH=",",EE="#";function sH(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=za(t,Wr.Infinity);else{let u=lH(n);s&&(u=cH(u));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let ne=o.match(rH);if(ne===null)throw new Error(`${o} is not a valid digit info`);let ce=ne[1],Le=ne[3],Pt=ne[5];ce!=null&&(d=wE(ce)),Le!=null&&(f=wE(Le)),Pt!=null?g=wE(Pt):Le!=null&&f>g&&(g=f)}uH(u,f,g);let m=u.digits,w=u.integerLen,N=u.exponent,k=[];for(c=m.every(ne=>!ne);w<d;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?k=m.splice(w,m.length):(k=m,m=[0]);let B=[];for(m.length>=e.lgSize&&B.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)B.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&B.unshift(m.join("")),a=B.join(za(t,r)),k.length&&(a+=za(t,i)+k.join("")),N&&(a+=za(t,Wr.Exponential)+"+"+N)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function jx(n,e,t){let r=Ux(e,DE.Decimal),i=aH(r,za(e,Wr.MinusSign));return sH(n,i,e,Wr.Group,Wr.Decimal,t)}function aH(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(iH),i=r[0],o=r[1],s=i.indexOf(tp)!==-1?i.split(tp):[i.substring(0,i.lastIndexOf(nu)+1),i.substring(i.lastIndexOf(nu)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(EE));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===nu?t.minFrac=t.maxFrac=d+1:f===EE?t.maxFrac=d+1:t.posSuf+=f}let u=a.split(oH);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(EE);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function cH(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function lH(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(tp))>-1&&(e=e.replace(tp,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===nu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===nu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>kx&&(r=r.splice(0,kx-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function uH(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+n.integerLen,d=r.reduceRight(function(f,g,m,w){return g=g+f,w[m]=g<10?g:g-10,c&&(w[m]===0&&m>=u?w.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function wE(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var IE=/\s+/,Ox=[],SE=(()=>{class n{_ngEl;_renderer;initialClasses=Ox;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(IE):Ox}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(IE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(IE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(H(hn),H(gr))};static \u0275dir=Ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var np=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Gn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new np(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Fx(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Fx(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(H(uo),H(ls),H(mE))};static \u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Fx(n,e){n.context.$implicit=e.item}var An=(()=>{class n{_viewContainer;_context=new rp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Lx(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Lx(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(H(uo),H(ls))};static \u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),rp=class{$implicit=null;ngIf=null};function Lx(n,e){if(n&&!n.createEmbeddedView)throw new ee(2020,!1)}function Bx(n,e){return new ee(2100,!1)}var CE=class{createSubscription(e,t){return zn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){zn(()=>e.unsubscribe())}},bE=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},dH=new bE,hH=new CE,vr=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ho(t))return dH;if(uE(t))return hH;throw Bx(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(H(Pi,16))};static \u0275pipe=Qf({name:"async",type:n,pure:!1})}return n})();function fH(n,e){return{key:n,value:e}}var AE=(()=>{class n{differs;constructor(t){this.differs=t}differ;keyValues=[];compareFn=Vx;transform(t,r=Vx){if(!t||!(t instanceof Map)&&typeof t!="object")return null;this.differ??=this.differs.find(t).create();let i=this.differ.diff(t),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(s=>{this.keyValues.push(fH(s.key,s.currentValue))})),(i||o)&&(r&&this.keyValues.sort(r),this.compareFn=r),this.keyValues}static \u0275fac=function(r){return new(r||n)(H(_E,16))};static \u0275pipe=Qf({name:"keyvalue",type:n,pure:!1})}return n})();function Vx(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t==null)return 1;if(r==null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),o=String(r);return i==o?0:i<o?-1:1}var RE=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!pH(t))return null;i||=this._locale;try{let o=gH(t);return jx(o,i,r)}catch(o){throw Bx(n,o.message)}}static \u0275fac=function(r){return new(r||n)(H(Zf,16))};static \u0275pipe=Qf({name:"number",type:n,pure:!0})}return n})();function pH(n){return!(n==null||n===""||n!==n)}function gH(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var en=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zr({type:n});static \u0275inj=$r({})}return n})();function xE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var PE="browser",$x="server";function ip(n){return n===$x}var ru=class{};var Hx=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>new ME(U(Nt),window)})}return n})(),ME=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=mH(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function mH(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ap=new te(""),FE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Y(ap),Y(Ve))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),iu=class{_doc;constructor(e){this._doc=e}manager},op="ng-app-id";function zx(n){for(let e of n)e.remove()}function qx(n,e){let t=e.createElement("style");return t.textContent=n,t}function _H(n,e,t,r){let i=n.head?.querySelectorAll(`style[${op}="${e}"],link[${op}="${e}"]`);if(i)for(let o of i)o.removeAttribute(op),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function kE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var LE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=ip(o),_H(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,qx);r?.forEach(i=>this.addUsage(i,this.external,kE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(zx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])zx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,qx(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,kE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(op,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Y(Nt),Y(Uy),Y(By,8),Y(lo))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),NE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},VE=/%COMP%/g;var Gx="%COMP%",vH=`_nghost-${Gx}`,yH=`_ngcontent-${Gx}`,EH=!0,wH=new te("",{providedIn:"root",factory:()=>EH});function IH(n){return yH.replace(VE,n)}function CH(n){return vH.replace(VE,n)}function Kx(n,e){return e.map(t=>t.replace(VE,n))}var UE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=ip(a),this.defaultRenderer=new ou(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Br.ShadowDom&&(r=X(O({},r),{encapsulation:Br.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof sp?i.applyToHost(t):i instanceof su&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Br.Emulated:o=new sp(c,u,r,this.appId,d,s,a,f,g);break;case Br.ShadowDom:return new OE(c,u,t,r,s,a,this.nonce,f,g);default:o=new su(c,u,r,d,s,a,f,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Y(FE),Y(LE),Y(Uy),Y(wH),Y(Nt),Y(lo),Y(Ve),Y(By),Y(Va,8))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),ou=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(NE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=NE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=NE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ai.DashCase|Ai.Important)?e.style.setProperty(t,r,i&Ai.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ai.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Wx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var OE=class extends ou{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=Kx(i.id,d);for(let g of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}let f=i.getExternalStyles?.();if(f)for(let g of f){let m=kE(g,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},su=class extends ou{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Kx(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},sp=class extends su{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=IH(d),this.hostAttr=CH(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var cp=class n extends eu{supportsDOMEvents=!0;static makeCurrent(){vE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=bH();return t==null?null:TH(t)}resetBaseElement(){au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xE(document.cookie,e)}},au=null;function bH(){return au=au||document.head.querySelector("base"),au?au.getAttribute("href"):null}function TH(n){return new URL(n,document.baseURI).pathname}var DH=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Yx=(()=>{class n extends iu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Y(Nt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Qx=["alt","control","meta","shift"],SH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Zx=(()=>{class n extends iu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Qx.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=SH[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Qx.forEach(s=>{if(s!==i){let a=AH[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Y(Nt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function jE(n,e){return Ax(O({rootComponent:n},RH(e)))}function RH(n){return{appProviders:[...kH,...n?.providers??[]],platformProviders:NH}}function xH(){cp.makeCurrent()}function PH(){return new jr}function MH(){return ER(document),document}var NH=[{provide:lo,useValue:PE},{provide:jy,useValue:xH,multi:!0},{provide:Nt,useFactory:MH}];var kH=[{provide:Pf,useValue:"root"},{provide:jr,useFactory:PH},{provide:ap,useClass:Yx,multi:!0,deps:[Nt]},{provide:ap,useClass:Zx,multi:!0,deps:[Nt]},UE,LE,FE,{provide:Sa,useExisting:UE},{provide:ru,useClass:DH},[]];var Jx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Y(Nt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var me="primary",Eu=Symbol("RouteTitle"),qE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Es(n){return new qE(n)}function sP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function FH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gr(n[t],e[t]))return!1;return!0}function Gr(n,e){let t=n?WE(n):void 0,r=e?WE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!aP(n[i],e[i]))return!1;return!0}function WE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function cP(n){return n.length>0?n[n.length-1]:null}function yo(n){return nv(n)?n:ho(n)?se(Promise.resolve(n)):j(n)}var LH={exact:uP,subset:dP},lP={exact:VH,subset:UH,ignored:()=>!0};function Xx(n,e,t){return LH[t.paths](n.root,e.root,t.matrixParams)&&lP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function VH(n,e){return Gr(n,e)}function uP(n,e,t){if(!vs(n.segments,e.segments)||!dp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!uP(n.children[r],e.children[r],t))return!1;return!0}function UH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aP(n[t],e[t]))}function dP(n,e,t){return hP(n,e,e.segments,t)}function hP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!vs(i,t)||e.hasChildren()||!dp(i,t,r))}else if(n.segments.length===t.length){if(!vs(n.segments,t)||!dp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!dP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!vs(n.segments,i)||!dp(n.segments,i,r)||!n.children[me]?!1:hP(n.children[me],e,o,r)}}function dp(n,e,t){return e.every((r,i)=>lP[t](n[i].parameters,r.parameters))}var Qr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Es(this.queryParams),this._queryParamMap}toString(){return $H.serialize(this)}},je=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hp(this)}},go=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Es(this.parameters),this._parameterMap}toString(){return pP(this)}};function jH(n,e){return vs(n,e)&&n.every((t,r)=>Gr(t.parameters,e[r].parameters))}function vs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function BH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===me&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==me&&(t=t.concat(e(i,r)))}),t}var ws=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>new mo,providedIn:"root"})}return n})(),mo=class{parse(e){let t=new KE(e);return new Qr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${cu(e.root,!0)}`,r=qH(e.queryParams),i=typeof e.fragment=="string"?`#${HH(e.fragment)}`:"";return`${t}${r}${i}`}},$H=new mo;function hp(n){return n.segments.map(e=>pP(e)).join("/")}function cu(n,e){if(!n.hasChildren())return hp(n);if(e){let t=n.children[me]?cu(n.children[me],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==me&&r.push(`${i}:${cu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=BH(n,(r,i)=>i===me?[cu(n.children[me],!1)]:[`${i}:${cu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[me]!=null?`${hp(n)}/${t[0]}`:`${hp(n)}/(${t.join("//")})`}}function fP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lp(n){return fP(n).replace(/%3B/gi,";")}function HH(n){return encodeURI(n)}function GE(n){return fP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fp(n){return decodeURIComponent(n)}function eP(n){return fp(n.replace(/\+/g,"%20"))}function pP(n){return`${GE(n.path)}${zH(n.parameters)}`}function zH(n){return Object.entries(n).map(([e,t])=>`;${GE(e)}=${GE(t)}`).join("")}function qH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${lp(t)}=${lp(i)}`).join("&"):`${lp(t)}=${lp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var WH=/^[^\/()?;#]+/;function BE(n){let e=n.match(WH);return e?e[0]:""}var GH=/^[^\/()?;=#]+/;function KH(n){let e=n.match(GH);return e?e[0]:""}var QH=/^[^=?&#]+/;function YH(n){let e=n.match(QH);return e?e[0]:""}var ZH=/^[^&#]+/;function JH(n){let e=n.match(ZH);return e?e[0]:""}var KE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[me]=new je(e,t)),r}parseSegment(){let e=BE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new go(fp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=KH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=BE(this.remaining);i&&(r=i,this.capture(r))}e[fp(t)]=fp(r)}parseQueryParam(e){let t=YH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=JH(this.remaining);s&&(r=s,this.capture(r))}let i=eP(t),o=eP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=BE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=me);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[me]:new je([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function gP(n){return n.segments.length>0?new je([],{[me]:n}):n}function mP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=mP(i);if(r===me&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new je(n.segments,e);return XH(t)}function XH(n){if(n.numberOfChildren===1&&n.children[me]){let e=n.children[me];return new je(n.segments.concat(e.segments),e.children)}return n}function _o(n){return n instanceof Qr}function _P(n,e,t=null,r=null){let i=vP(n);return yP(i,e,t,r)}function vP(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new je(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=gP(r);return e??i}function yP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $E(i,i,i,t,r);let o=e4(e);if(o.toRoot())return $E(i,i,new je([],{}),t,r);let s=t4(o,i,n),a=s.processChildren?uu(s.segmentGroup,s.index,o.commands):wP(s.segmentGroup,s.index,o.commands);return $E(i,s.segmentGroup,a,t,r)}function gp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function hu(n){return typeof n=="object"&&n!=null&&n.outlets}function $E(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=EP(n,e,t);let a=gP(mP(s));return new Qr(a,o,i)}function EP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=EP(o,e,t)}),new je(n.segments,r)}var mp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gp(r[0]))throw new ee(4003,!1);let i=r.find(hu);if(i&&i!==cP(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function e4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mp(t,e,r)}var Ga=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function t4(n,e,t){if(n.isAbsolute)return new Ga(e,!0,0);if(!t)return new Ga(e,!1,NaN);if(t.parent===null)return new Ga(t,!0,0);let r=gp(n.commands[0])?0:1,i=t.segments.length-1+r;return n4(t,i,n.numberOfDoubleDots)}function n4(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new Ga(r,!1,i-o)}function r4(n){return hu(n[0])?n[0].outlets:{[me]:n}}function wP(n,e,t){if(n??=new je([],{}),n.segments.length===0&&n.hasChildren())return uu(n,e,t);let r=i4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new je(n.segments.slice(0,r.pathIndex),{});return o.children[me]=new je(n.segments.slice(r.pathIndex),n.children),uu(o,0,i)}else return r.match&&i.length===0?new je(n.segments,{}):r.match&&!n.hasChildren()?QE(n,e,t):r.match?uu(n,0,i):QE(n,e,t)}function uu(n,e,t){if(t.length===0)return new je(n.segments,{});{let r=r4(t),i={};if(Object.keys(r).some(o=>o!==me)&&n.children[me]&&n.numberOfChildren===1&&n.children[me].segments.length===0){let o=uu(n.children[me],e,t);return new je(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=wP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new je(n.segments,i)}}function i4(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(hu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!nP(c,u,s))return o;r+=2}else{if(!nP(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function QE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(hu(o)){let c=o4(o.outlets);return new je(r,c)}if(i===0&&gp(t[0])){let c=n.segments[e];r.push(new go(c.path,tP(t[0]))),i++;continue}let s=hu(o)?o.outlets[me]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&gp(a)?(r.push(new go(s,tP(a))),i+=2):(r.push(new go(s,{})),i++)}return new je(r,{})}function o4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=QE(new je([],{}),0,r))}),e}function tP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function nP(n,e,t){return n==t.path&&Gr(e,t.parameters)}var pp="imperative",At=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(At||{}),xn=class{id;url;constructor(e,t){this.id=e,this.url=t}},vo=class extends xn{type=At.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pn=class extends xn{urlAfterRedirects;type=At.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(yn||{}),Qa=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qa||{}),Kr=class extends xn{reason;code;type=At.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends xn{reason;code;type=At.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ya=class extends xn{error;target;type=At.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fu=class extends xn{urlAfterRedirects;state;type=At.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_p=class extends xn{urlAfterRedirects;state;type=At.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vp=class extends xn{urlAfterRedirects;state;shouldActivate;type=At.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yp=class extends xn{urlAfterRedirects;state;type=At.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ep=class extends xn{urlAfterRedirects;state;type=At.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wp=class{route;type=At.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ip=class{route;type=At.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cp=class{snapshot;type=At.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bp=class{snapshot;type=At.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tp=class{snapshot;type=At.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{snapshot;type=At.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Za=class{routerEvent;position;anchor;type=At.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pu=class{},Ja=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function s4(n,e){return n.providers&&!n._injector&&(n._injector=Yl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yr(n){return n.outlet||me}function a4(n,e){let t=n.filter(r=>yr(r)===e);return t.push(...n.filter(r=>yr(r)!==e)),t}function wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return wu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Is(this.rootInjector)}},Is=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Sp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Y(Qt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ap=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=YE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=YE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ZE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ZE(e,this._root).map(t=>t.value)}};function YE(n,e){if(n===e.value)return e;for(let t of e.children){let r=YE(n,t);if(r)return r}return null}function ZE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ZE(n,t);if(r.length)return r.unshift(e),r}return[]}var Rn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Wa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gu=class extends Ap{snapshot;constructor(e,t){super(e),this.snapshot=t,ow(this,e)}toString(){return this.snapshot.toString()}};function IP(n){let e=c4(n),t=new jt([new go("",{})]),r=new jt({}),i=new jt({}),o=new jt({}),s=new jt(""),a=new En(t,r,o,s,i,me,n,e.root);return a.snapshot=e.root,new gu(new Rn(a,[]),e)}function c4(n){let e={},t={},r={},i="",o=new ys([],e,r,i,t,me,n,null,{});return new mu("",new Rn(o,[]))}var En=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(u=>u[Eu]))??j(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Es(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Es(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&bP(i)&&(r.resolve[Eu]=i.title),r}var ys=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Eu]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Es(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Es(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mu=class extends Ap{url;constructor(e,t){super(t),this.url=e,ow(this,t)}toString(){return CP(this._root)}};function ow(n,e){e.value._routerState=n,e.children.forEach(t=>ow(n,t))}function CP(n){let e=n.children.length>0?` { ${n.children.map(CP).join(", ")} } `:"";return`${n.value}${e}`}function HE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gr(e.params,t.params)||n.paramsSubject.next(t.params),FH(e.url,t.url)||n.urlSubject.next(t.url),Gr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JE(n,e){let t=Gr(n.params,e.params)&&jH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||JE(n.parent,e.parent))}function bP(n){return typeof n.title=="string"||n.title===null}var TP=new te(""),Iu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=me;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=hR(void 0);parentContexts=U(Is);location=U(uo);changeDetector=U(Pi);inputBinder=U(Cu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new XE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sn]})}return n})(),XE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===En?this.route:e===Is?this.childContexts:e===TP?this.outletData:this.parent.get(e,t)}},Cu=new te(""),sw=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ti([r.queryParams,r.params,r.data]).pipe(ie(([o,s,a],c)=>(a=O(O(O({},o),s),a),c===0?j(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Rx(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),aw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Xt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ft(0,"router-outlet")},dependencies:[Iu],encapsulation:2})}return n})();function cw(n){let e=n.children&&n.children.map(cw),t=e?X(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==me&&(t.component=aw),t}function l4(n,e,t){let r=_u(n,e._root,t?t._root:void 0);return new gu(r,e)}function _u(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=u4(n,e,t);return new Rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_u(n,a)),s}}let r=d4(e.value),i=e.children.map(o=>_u(n,o));return new Rn(r,i)}}function u4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _u(n,r,i);return _u(n,r)})}function d4(n){return new En(new jt(n.url),new jt(n.params),new jt(n.queryParams),new jt(n.fragment),new jt(n.data),n.outlet,n.component,n)}var Xa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},DP="ngNavigationCancelingError";function xp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=_o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SP(!1,yn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function SP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[DP]=!0,t.cancellationCode=e,t}function h4(n){return AP(n)&&_o(n.url)}function AP(n){return!!n&&n[DP]}var f4=(n,e,t,r)=>G(i=>(new ew(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ew=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),HE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Wa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Wa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Wa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Wa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(HE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),HE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Pp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ka=class{component;route;constructor(e,t){this.component=e,this.route=t}};function p4(n,e,t){let r=n._root,i=e?e._root:null;return lu(r,i,t,[r.value])}function g4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function tc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cA(n)?n:e.get(n):r}function lu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Wa(e);return n.children.forEach(s=>{m4(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>du(a,t.getContext(s),i)),i}function m4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_4(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?lu(n,e,a?a.children:null,r,i):lu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ka(a.outlet.component,s))}else s&&du(e,a,i),i.canActivateChecks.push(new Pp(r)),o.component?lu(n,null,a?a.children:null,r,i):lu(n,null,t,r,i);return i}function _4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!vs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vs(n.url,e.url)||!Gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JE(n,e)||!Gr(n.queryParams,e.queryParams);case"paramsChange":default:return!JE(n,e)}}function du(n,e,t){let r=Wa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?du(s,e.children.getContext(o),t):du(s,null,t):du(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ka(e.outlet.component,i)):t.canDeactivateChecks.push(new Ka(null,i)):t.canDeactivateChecks.push(new Ka(null,i))}function bu(n){return typeof n=="function"}function v4(n){return typeof n=="boolean"}function y4(n){return n&&bu(n.canLoad)}function E4(n){return n&&bu(n.canActivate)}function w4(n){return n&&bu(n.canActivateChild)}function I4(n){return n&&bu(n.canDeactivate)}function C4(n){return n&&bu(n.canMatch)}function RP(n){return n instanceof lr||n?.name==="EmptyError"}var up=Symbol("INITIAL_VALUE");function ec(){return ie(n=>Ti(n.map(e=>e.pipe(it(1),Kh(up)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===up)return up;if(t===!1||b4(t))return t}return!0}),Ct(e=>e!==up),it(1)))}function b4(n){return _o(n)||n instanceof Xa}function T4(n,e){return gt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?j(X(O({},t),{guardsResult:!0})):D4(s,r,i,n).pipe(gt(a=>a&&v4(a)?S4(r,o,n,e):j(a)),G(a=>X(O({},t),{guardsResult:a})))})}function D4(n,e,t,r){return se(n).pipe(gt(i=>M4(i.component,i.route,t,e,r)),Un(i=>i!==!0,!0))}function S4(n,e,t,r){return se(e).pipe(io(i=>fa(R4(i.route.parent,r),A4(i.route,r),P4(n,i.path,t),x4(n,i.route,t))),Un(i=>i!==!0,!0))}function A4(n,e){return n!==null&&e&&e(new Tp(n)),j(!0)}function R4(n,e){return n!==null&&e&&e(new Cp(n)),j(!0)}function x4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(o=>qh(()=>{let s=wu(e)??t,a=tc(o,s),c=E4(a)?a.canActivate(e,n):Zt(s,()=>a(e,n));return yo(c).pipe(Un())}));return j(i).pipe(ec())}function P4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>g4(s)).filter(s=>s!==null).map(s=>qh(()=>{let a=s.guards.map(c=>{let u=wu(s.node)??t,d=tc(c,u),f=w4(d)?d.canActivateChild(r,n):Zt(u,()=>d(r,n));return yo(f).pipe(Un())});return j(a).pipe(ec())}));return j(o).pipe(ec())}function M4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return j(!0);let s=o.map(a=>{let c=wu(e)??i,u=tc(a,c),d=I4(u)?u.canDeactivate(n,e,t,r):Zt(c,()=>u(n,e,t,r));return yo(d).pipe(Un())});return j(s).pipe(ec())}function N4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return j(!0);let o=i.map(s=>{let a=tc(s,n),c=y4(a)?a.canLoad(e,t):Zt(n,()=>a(e,t));return yo(c)});return j(o).pipe(ec(),xP(r))}function xP(n){return Go(mt(e=>{if(typeof e!="boolean")throw xp(n,e)}),G(e=>e===!0))}function k4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return j(!0);let o=i.map(s=>{let a=tc(s,n),c=C4(a)?a.canMatch(e,t):Zt(n,()=>a(e,t));return yo(c)});return j(o).pipe(ec(),xP(r))}var vu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function qa(n){return Pe(new vu(n))}function O4(n){return Pe(new ee(4e3,!1))}function F4(n){return Pe(SP(!1,yn.GuardRejected))}var tw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return j(r);if(i.numberOfChildren>1||!i.children[me])return O4(`${e.redirectTo}`);i=i.children[me]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,params:m,data:w,title:N}=i,k=Zt(o,()=>a({params:m,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,title:N}));if(k instanceof Qr)throw new yu(k);t=k}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new yu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Qr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new je(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},nw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L4(n,e,t,r,i){let o=PP(n,e,t);return o.matched?(r=s4(e,r),k4(r,e,t,i).pipe(G(s=>s===!0?o:O({},nw)))):j(o)}function PP(n,e,t){if(e.path==="**")return V4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},nw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sP)(t,n,e);if(!i)return O({},nw);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function V4(n){return{matched:!0,parameters:n.length>0?cP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rP(n,e,t,r){return t.length>0&&B4(n,t,r)?{segmentGroup:new je(e,j4(r,new je(t,n.children))),slicedSegments:[]}:t.length===0&&$4(n,t,r)?{segmentGroup:new je(n.segments,U4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new je(n.segments,n.children),slicedSegments:t}}function U4(n,e,t,r){let i={};for(let o of t)if(Np(n,e,o)&&!r[yr(o)]){let s=new je([],{});i[yr(o)]=s}return O(O({},r),i)}function j4(n,e){let t={};t[me]=e;for(let r of n)if(r.path===""&&yr(r)!==me){let i=new je([],{});t[yr(r)]=i}return t}function B4(n,e,t){return t.some(r=>Np(n,e,r)&&yr(r)!==me)}function $4(n,e,t){return t.some(r=>Np(n,e,r))}function Np(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function H4(n,e,t){return e.length===0&&!n.children[t]}var rw=class{};function z4(n,e,t,r,i,o,s="emptyOnly"){return new iw(n,e,t,r,i,s,o).recognize()}var q4=31,iw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new tw(this.urlSerializer,this.urlTree)}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=rP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Rn(r,t),o=new mu("",i),s=_P(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ys([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,me,t).pipe(G(r=>({children:r,rootSnapshot:t})),re(r=>{if(r instanceof yu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Rn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return se(o).pipe(io(s=>{let a=r.children[s],c=a4(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Gh((s,a)=>(s.push(...a),s)),oo(null),iv(),gt(s=>{if(s===null)return qa(r);let a=MP(s);return W4(a),j(a)}))}processSegment(e,t,r,i,o,s,a){return se(t).pipe(io(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(re(u=>{if(u instanceof vu)return j(null);throw u}))),Un(c=>!!c),re(c=>{if(RP(c))return H4(r,i,o)?j(new rw):qa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return yr(r)!==s&&(s===me||!Np(i,o,r))?qa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):qa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=PP(t,i,o);if(!c)return qa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>q4&&(this.allowRedirects=!1));let m=new ys(o,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,iP(i),yr(i),i.component??i._loadedComponent??null,i,oP(i)),w=Rp(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let N=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(gt(k=>this.processSegment(e,r,t,k.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=L4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ie(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ie(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,w=new ys(g,f,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,iP(r),yr(r),r.component??r._loadedComponent??null,r,oP(r)),N=Rp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:k,slicedSegments:B}=rP(t,g,m,u);if(B.length===0&&k.hasChildren())return this.processChildren(d,u,k,w).pipe(G(ce=>new Rn(w,ce)));if(u.length===0&&B.length===0)return j(new Rn(w,[]));let ne=yr(r)===o;return this.processSegment(d,u,k,B,ne?me:o,!0,w).pipe(G(ce=>new Rn(w,ce instanceof Rn?[ce]:[])))}))):qa(t)))}getChildConfig(e,t,r){return t.children?j({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?j({routes:t._loadedRoutes,injector:t._loadedInjector}):N4(e,t,r,this.urlSerializer).pipe(gt(i=>i?this.configLoader.loadChildren(e,t).pipe(mt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):F4(t))):j({routes:[],injector:e})}};function W4(n){n.sort((e,t)=>e.value.outlet===me?-1:t.value.outlet===me?1:e.value.outlet.localeCompare(t.value.outlet))}function G4(n){let e=n.value.routeConfig;return e&&e.path===""}function MP(n){let e=[],t=new Set;for(let r of n){if(!G4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=MP(r.children);e.push(new Rn(r.value,i))}return e.filter(r=>!t.has(r))}function iP(n){return n.data||{}}function oP(n){return n.resolve||{}}function K4(n,e,t,r,i,o){return gt(s=>z4(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:c})=>X(O({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Q4(n,e){return gt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return j(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of NP(c))s.add(u);let a=0;return se(s).pipe(io(c=>o.has(c)?Y4(c,r,n,e):(c.data=Rp(c,c.parent,n).resolve,j(void 0))),mt(()=>a++),pa(1),gt(c=>a===s.size?j(t):fn))})}function NP(n){let e=n.children.map(t=>NP(t)).flat();return[n,...e]}function Y4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!bP(i)&&(o[Eu]=i.title),Z4(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=Rp(n,n.parent,t).resolve,null)))}function Z4(n,e,t,r){let i=WE(n);if(i.length===0)return j({});let o={};return se(i).pipe(gt(s=>J4(n[s],e,t,r).pipe(Un(),mt(a=>{if(a instanceof Xa)throw xp(new mo,a);o[s]=a}))),pa(1),G(()=>o),re(s=>RP(s)?fn:Pe(s)))}function J4(n,e,t,r){let i=wu(e)??r,o=tc(n,i),s=o.resolve?o.resolve(e,t):Zt(i,()=>o(e,t));return yo(s)}function zE(n){return ie(e=>{let t=n(e);return t?se(t).pipe(G(()=>e)):j(e)})}var lw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===me);return r}getResolvedTitleForRoute(t){return t.data[Eu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(kP),providedIn:"root"})}return n})(),kP=(()=>{class n extends lw{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Y(Jx))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cs=new te("",{providedIn:"root",factory:()=>({})}),bs=new te(""),kp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=U(bx);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return j(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=yo(t.loadComponent()).pipe(G(FP),mt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Fl(()=>{this.componentLoaders.delete(t)})),i=new la(r,()=>new et).pipe(ca());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return j({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OP(r,this.compiler,t,this.onLoadEndListener).pipe(Fl(()=>{this.childrenLoaders.delete(r)})),s=new la(o,()=>new et).pipe(ca());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OP(n,e,t,r){return yo(n.loadChildren()).pipe(G(FP),gt(i=>i instanceof aE||Array.isArray(i)?j(i):se(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(bs,[],{optional:!0,self:!0}).flat()),{routes:s.map(cw),injector:o}}))}function X4(n){return n&&typeof n=="object"&&"default"in n}function FP(n){return X4(n)?n.default:n}var Op=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(ez),providedIn:"root"})}return n})(),ez=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uw=new te(""),dw=new te("");function LP(n,e,t){let r=n.get(dw),i=n.get(Nt);return n.get(Ve).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),tz(n))),{onViewTransitionCreated:c}=r;return c&&Zt(n,()=>c({transition:a,from:e,to:t})),s})}function tz(n){return new Promise(e=>{Hy({read:()=>setTimeout(e)},{injector:n})})}var hw=new te(""),Fp=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortSubject=new et;configLoader=U(kp);environmentInjector=U(Qt);destroyRef=U(ka);urlSerializer=U(ws);rootContexts=U(Is);location=U(Wn);inputBindingEnabled=U(Cu,{optional:!0})!==null;titleStrategy=U(lw);options=U(Cs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=U(Op);createViewTransition=U(uw,{optional:!0});navigationErrorHandler=U(hw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>j(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wp(i)),r=i=>this.events.next(new Ip(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(X(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new jt(null),this.transitions.pipe(Ct(r=>r!==null),ie(r=>{let i=!1,o=!1;return j(r).pipe(ie(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",yn.SupersededByNewNavigation),fn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?X(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new Yr(s.id,this.urlSerializer.serialize(s.rawUrl),u,Qa.IgnoredSameUrlNavigation)),s.resolve(!1),fn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return j(s).pipe(ie(u=>(this.events.next(new vo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?fn:Promise.resolve(u))),K4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=X(O({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let d=new fu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:f,restoredState:g,extras:m}=s,w=new vo(u,this.urlSerializer.serialize(d),f,g);this.events.next(w);let N=IP(this.rootComponentType).snapshot;return this.currentTransition=r=X(O({},s),{targetSnapshot:N,urlAfterRedirects:d,extras:X(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,j(r)}else{let u="";return this.events.next(new Yr(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Qa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),fn}}),mt(s=>{let a=new _p(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),G(s=>(this.currentTransition=r=X(O({},s),{guards:p4(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),T4(this.environmentInjector,s=>this.events.next(s)),mt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw xp(this.urlSerializer,s.guardsResult);let a=new vp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ct(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",yn.GuardRejected),!1)),zE(s=>{if(s.guards.canActivateChecks.length!==0)return j(s).pipe(mt(a=>{let c=new yp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ie(a=>{let c=!1;return j(a).pipe(Q4(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",yn.NoDataFromResolver)}}))}),mt(a=>{let c=new Ep(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),zE(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(mt(d=>{c.component=d}),G(()=>{})));for(let d of c.children)u.push(...a(d));return u};return Ti(a(s.targetSnapshot.root)).pipe(oo(null),it(1))}),zE(()=>this.afterPreactivation()),ie(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?se(c).pipe(G(()=>r)):j(r)}),G(s=>{let a=l4(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=X(O({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),mt(()=>{this.events.next(new pu)}),f4(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),it(1),mt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),sv(this.transitionAbortSubject.pipe(mt(s=>{throw s}))),Fl(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",yn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),re(s=>{if(this.destroyed)return r.resolve(!1),fn;if(o=!0,AP(s))this.events.next(new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),h4(s)?this.events.next(new Ja(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ya(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Xa){let{message:u,cancellationCode:d}=xp(this.urlSerializer,c);this.events.next(new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new Ja(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return fn}))}))}cancelNavigationTransition(t,r,i){let o=new Kr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nz(n){return n!==pp}var VP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(rz),providedIn:"root"})}return n})(),Mp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rz=(()=>{class n extends Mp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UP=(()=>{class n{urlSerializer=U(ws);options=U(Cs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=U(Wn);urlHandlingStrategy=U(Op);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Qr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=IP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>U(iz),providedIn:"root"})}return n})(),iz=(()=>{class n extends UP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof vo?this.updateStateMemento():t instanceof Yr?this.commitTransition(r):t instanceof fu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof pu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kr&&(t.code===yn.GuardRejected||t.code===yn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ya?this.restoreHistory(r,!0):t instanceof Pn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lp(n,e){n.events.pipe(Ct(t=>t instanceof Pn||t instanceof Kr||t instanceof Ya||t instanceof Yr),G(t=>t instanceof Pn||t instanceof Yr?0:(t instanceof Kr?t.code===yn.Redirect||t.code===yn.SupersededByNewNavigation:!1)?2:1),Ct(t=>t!==2),it(1)).subscribe(()=>{e()})}var oz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=U(ux);stateManager=U(UP);options=U(Cs,{optional:!0})||{};pendingTasks=U(gs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=U(Fp);urlSerializer=U(ws);location=U(Wn);urlHandlingStrategy=U(Op);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=U(VP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=U(bs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!U(Cu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Kr&&r.code!==yn.Redirect&&r.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pn)this.navigated=!0;else if(r instanceof Ja){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nz(i.source)},s);this.scheduleNavigation(a,pp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=vP(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return yP(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=_o(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pp,null,r)}navigate(t,r={skipLocationChange:!1}){return az(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},oz):r===!1?i=O({},sz):i=r,_o(t))return Xx(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Xx(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return Lp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function az(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function cz(n){return!(n instanceof pu)&&!(n instanceof Ja)}var Zr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Pn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_o(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:SR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:_o(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(H(Rt),H(En),Oy("tabindex"),H(gr),H(hn),H(_r))};static \u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ja("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",po],skipLocationChange:[2,"skipLocationChange","skipLocationChange",po],replaceUrl:[2,"replaceUrl","replaceUrl",po],routerLink:"routerLink"},features:[Sn]})}return n})(),pw=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new vt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Pn&&this.update()})}ngAfterContentInit(){j(this.links.changes,j(null)).pipe(ro()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=se(t).pipe(ro()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=lz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(H(Rt),H(hn),H(gr),H(Pi),H(Zr,8))};static \u0275dir=Ke({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&mx(o,Zr,5),r&2){let s;_x(s=vx())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Sn]})}return n})();function lz(n){return!!n.paths}var Tu=class{};var jP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(t=>t instanceof Pn),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Yl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return se(i).pipe(ro())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=j(null);let o=i.pipe(gt(s=>s===null?j(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return se([o,s]).pipe(ro())}else return o})}static \u0275fac=function(r){return new(r||n)(Y(Rt),Y(Qt),Y(Tu),Y(kp))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BP=new te(""),uz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Yr&&t.code===Qa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Za&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Za(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){XR()};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function gw(n,...e){return Hn([{provide:bs,multi:!0,useValue:n},[],{provide:En,useFactory:$P,deps:[Rt]},{provide:Yf,multi:!0,useFactory:HP},e.map(t=>t.\u0275providers)])}function $P(n){return n.routerState.root}function Du(n,e){return{\u0275kind:n,\u0275providers:e}}function HP(){let n=U(ht);return e=>{let t=n.get(us);if(e!==t.components[0])return;let r=n.get(Rt),i=n.get(zP);n.get(mw)===1&&r.initialNavigation(),n.get(GP,null,_e.Optional)?.setUpPreloading(),n.get(BP,null,_e.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zP=new te("",{factory:()=>new et}),mw=new te("",{providedIn:"root",factory:()=>1});function qP(){let n=[{provide:mw,useValue:0},dE(()=>{let e=U(ht);return e.get(yE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Rt),o=e.get(zP);Lp(i,()=>{r(!0)}),e.get(Fp).afterPreactivation=()=>(r(!0),o.closed?j(void 0):o),i.initialNavigation()}))})];return Du(2,n)}function WP(){let n=[dE(()=>{U(Rt).setUpLocationChangeListener()}),{provide:mw,useValue:2}];return Du(3,n)}var GP=new te("");function KP(n){return Du(0,[{provide:GP,useExisting:jP},{provide:Tu,useExisting:n}])}function QP(){return Du(8,[sw,{provide:Cu,useExisting:sw}])}function YP(n){Ua("NgRouterViewTransitions");let e=[{provide:uw,useValue:LP},{provide:dw,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return Du(9,e)}var ZP=[Wn,{provide:ws,useClass:mo},Rt,Is,{provide:En,useFactory:$P,deps:[Rt]},kp,[]],_w=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[ZP,[],{provide:bs,multi:!0,useValue:t},[],r?.errorHandler?{provide:hw,useValue:r.errorHandler}:[],{provide:Cs,useValue:r||{}},r?.useHash?hz():fz(),dz(),r?.preloadingStrategy?KP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?pz(r):[],r?.bindToComponentInputs?QP().\u0275providers:[],r?.enableViewTransitions?YP().\u0275providers:[],gz()]}}static forChild(t){return{ngModule:n,providers:[{provide:bs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zr({type:n});static \u0275inj=$r({})}return n})();function dz(){return{provide:BP,useFactory:()=>{let n=U(Hx),e=U(Ve),t=U(Cs),r=U(Fp),i=U(ws);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uz(i,r,n,e,t)}}}function hz(){return{provide:_r,useClass:TE}}function fz(){return{provide:_r,useClass:ep}}function pz(n){return[n.initialNavigation==="disabled"?WP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?qP().\u0275providers:[]]}var fw=new te("");function gz(){return[{provide:fw,useFactory:HP},{provide:Yf,multi:!0,useExisting:fw}]}var aM=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(H(gr),H(hn))};static \u0275dir=Ke({type:n})}return n})(),ku=(()=>{class n extends aM{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,features:[vn]})}return n})(),oc=new te(""),mz={provide:oc,useExisting:$n(()=>ww),multi:!0},ww=(()=>{class n extends ku{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[qr([mz]),vn]})}return n})(),_z={provide:oc,useExisting:$n(()=>Kn),multi:!0};function vz(){let n=qn()?qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var yz=new te(""),Kn=(()=>{class n extends aM{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!vz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(H(gr),H(hn),H(yz,8))};static \u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[qr([_z]),vn]})}return n})();function Ez(n){return n==null||wz(n)===0}function wz(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var qp=new te(""),cM=new te("");function Iz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Cz(n){return Ez(n.value)?{required:!0}:null}function JP(n){return null}function lM(n){return n!=null}function uM(n){return ho(n)?se(n):n}function dM(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function hM(n,e){return e.map(t=>t(n))}function bz(n){return!n.validate}function fM(n){return n.map(e=>bz(e)?e:t=>e.validate(t))}function Tz(n){if(!n)return null;let e=n.filter(lM);return e.length==0?null:function(t){return dM(hM(t,e))}}function Iw(n){return n!=null?Tz(fM(n)):null}function Dz(n){if(!n)return null;let e=n.filter(lM);return e.length==0?null:function(t){let r=hM(t,e).map(uM);return rv(r).pipe(G(dM))}}function Cw(n){return n!=null?Dz(fM(n)):null}function XP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Sz(n){return n._rawValidators}function Az(n){return n._rawAsyncValidators}function vw(n){return n?Array.isArray(n)?n:[n]:[]}function Up(n,e){return Array.isArray(n)?n.includes(e):n===e}function eM(n,e){let t=vw(e);return vw(n).forEach(i=>{Up(t,i)||t.push(i)}),t}function tM(n,e){return vw(e).filter(t=>!Up(n,t))}var jp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Iw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ic=class extends jp{name;get formDirective(){return null}get path(){return null}},Nu=class extends jp{_parent=null;name=null;valueAccessor=null},Bp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Rz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Vse=X(O({},Rz),{"[class.ng-submitted]":"isSubmitted"}),Jr=(()=>{class n extends Bp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(H(Nu,2))};static \u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ms("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[vn]})}return n})(),Xr=(()=>{class n extends Bp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(H(ic,10))};static \u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ms("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[vn]})}return n})();var Au="VALID",Vp="INVALID",nc="PENDING",Ru="DISABLED",Eo=class{},$p=class extends Eo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pu=class extends Eo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Mu=class extends Eo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},rc=class extends Eo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},yw=class extends Eo{source;constructor(e){super(),this.source=e}},Ew=class extends Eo{source;constructor(e){super(),this.source=e}};function pM(n){return(Wp(n)?n.validators:n)||null}function xz(n){return Array.isArray(n)?Iw(n):n||null}function gM(n,e){return(Wp(e)?e.asyncValidators:n)||null}function Pz(n){return Array.isArray(n)?Cw(n):n||null}function Wp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Mz(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function Nz(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var Hp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zn(this.statusReactive)}set status(e){zn(()=>this.statusReactive.set(e))}_status=Ha(()=>this.statusReactive());statusReactive=Fa(void 0);get valid(){return this.status===Au}get invalid(){return this.status===Vp}get pending(){return this.status==nc}get disabled(){return this.status===Ru}get enabled(){return this.status!==Ru}errors;get pristine(){return zn(this.pristineReactive)}set pristine(e){zn(()=>this.pristineReactive.set(e))}_pristine=Ha(()=>this.pristineReactive());pristineReactive=Fa(!0);get dirty(){return!this.pristine}get touched(){return zn(this.touchedReactive)}set touched(e){zn(()=>this.touchedReactive.set(e))}_touched=Ha(()=>this.touchedReactive());touchedReactive=Fa(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tM(e,this._rawAsyncValidators))}hasValidator(e){return Up(this._rawValidators,e)}hasAsyncValidator(e){return Up(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(X(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(X(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pu(!0,r))}markAsPending(e={}){this.status=nc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(X(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ru,this.errors=null,this._forEachChild(i=>{i.disable(X(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $p(this.value,r)),this._events.next(new rc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this._forEachChild(r=>{r.enable(X(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(X(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Au||this.status===nc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $p(this.value,t)),this._events.next(new rc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(X(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ru:Au}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=nc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=uM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new rc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Ru:this.errors?Vp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nc)?nc:this._anyControlsHaveStatus(Vp)?Vp:Au}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Mu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Pz(this._rawAsyncValidators)}},zp=class extends Hp{constructor(e,t,r){super(pM(t),gM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Nz(this,!0,e),Object.keys(e).forEach(r=>{Mz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var bw=new te("",{providedIn:"root",factory:()=>Tw}),Tw="always";function kz(n,e){return[...e.path,n]}function mM(n,e,t=Tw){_M(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Fz(n,e),Vz(n,e),Lz(n,e),Oz(n,e)}function nM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Oz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function _M(n,e){let t=Sz(n);e.validator!==null?n.setValidators(XP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Az(n);e.asyncValidator!==null?n.setAsyncValidators(XP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();nM(e._rawValidators,i),nM(e._rawAsyncValidators,i)}function Fz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&vM(n,e)})}function Lz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&vM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function vM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Uz(n,e){n==null,_M(n,e)}function jz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Bz(n){return Object.getPrototypeOf(n.constructor)===ku}function $z(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Hz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Kn?t=o:Bz(o)?r=o:i=o}),i||r||t||null}var zz={provide:ic,useExisting:$n(()=>Er)},xu=Promise.resolve(),Er=(()=>{class n extends ic{callSetDisabledState;get submitted(){return zn(this.submittedReactive)}_submitted=Ha(()=>this.submittedReactive());submittedReactive=Fa(!1);_directives=new Set;form;ngSubmit=new vt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new zp({},Iw(t),Cw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mM(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xu.then(()=>{let r=this._findContainer(t.path),i=new zp({});Uz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$z(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new yw(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Ew(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(H(qp,10),H(cM,10),H(bw,8))};static \u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[qr([zz]),vn]})}return n})();function rM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qz=class extends Hp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(pM(t),gM(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(iM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Wz={provide:Nu,useExisting:$n(()=>wr)},oM=Promise.resolve(),wr=(()=>{class n extends Nu{_changeDetectorRef;callSetDisabledState;control=new qz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Hz(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),jz(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){oM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&po(r);oM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?kz(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(H(ic,9),H(qp,10),H(cM,10),H(oc,10),H(Pi,8),H(bw,8))};static \u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[qr([Wz]),vn,Sn]})}return n})();var ei=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Gz={provide:oc,useExisting:$n(()=>Ou),multi:!0},Ou=(()=>{class n extends ku{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[qr([Gz]),vn]})}return n})();var Kz={provide:oc,useExisting:$n(()=>Gp),multi:!0};function yM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Qz(n){return n.split(":")[0]}var Gp=(()=>{class n extends ku{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=yM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Qz(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qr([Kz]),vn]})}return n})(),EM=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(H(hn),H(gr),H(Gp,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Yz={provide:oc,useExisting:$n(()=>wM),multi:!0};function sM(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Zz(n){return n.split(":")[0]}var wM=(()=>{class n extends ku{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Zz(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[qr([Yz]),vn]})}return n})(),IM=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(sM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(H(hn),H(gr),H(wM,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Jz(n){return typeof n=="number"?n:parseFloat(n)}var CM=(()=>{class n{_validator=JP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):JP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,features:[Sn]})}return n})();var Xz={provide:qp,useExisting:$n(()=>Dw),multi:!0},Dw=(()=>{class n extends CM{min;inputName="min";normalizeInput=t=>Jz(t);createValidator=t=>Iz(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ja("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[qr([Xz]),vn]})}return n})(),e5={provide:qp,useExisting:$n(()=>Ir),multi:!0};var Ir=(()=>{class n extends CM{required;inputName="required";normalizeInput=po;createValidator=t=>Cz;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ja("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[qr([e5]),vn]})}return n})();var t5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=zr({type:n});static \u0275inj=$r({})}return n})();var ti=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bw,useValue:t.callSetDisabledState??Tw}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=zr({type:n});static \u0275inj=$r({imports:[t5]})}return n})();var bM=()=>{};var Aw={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var q=function(n,e){if(!n)throw Ts(e)},Ts=function(n){return new Error("Firebase Database ("+Aw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var SM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},n5=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new Rw;let g=o<<2|a>>4;if(r.push(g),u!==64){let m=a<<4&240|u>>2;if(r.push(m),f!==64){let w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Rw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Pw=function(n){let e=SM(n);return cc.encodeByteArray(e,!0)},Vu=function(n){return Pw(n).replace(/\./g,"")},sc=function(n){try{return cc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function AM(n){return RM(void 0,n)}function RM(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!r5(t)||(n[t]=RM(n[t],e[t]));return n}function r5(n){return n!=="__proto__"}function Mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var i5=()=>Mw().__FIREBASE_DEFAULTS__,o5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},s5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&sc(n[1]);return e&&JSON.parse(e)},Qp=()=>{try{return bM()||i5()||o5()||s5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nw=n=>{var e,t;return(t=(e=Qp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Yp=n=>{let e=Nw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},kw=()=>{var n;return(n=Qp())===null||n===void 0?void 0:n.config},Ow=n=>{var e;return(e=Qp())===null||e===void 0?void 0:e[`_${n}`]};var ni=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ri(n){return n.endsWith(".cloudworkstations.dev")}function lc(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Zp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vu(JSON.stringify(t)),Vu(JSON.stringify(s)),""].join(".")}var Lu={};function a5(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function c5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var TM=!1;function uc(n,e){if(typeof window>"u"||typeof document>"u"||!ri(window.location.host)||Lu[n]===e||Lu[n]||TM)return;Lu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=a5().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{TM=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=c5(r),m=t("text"),w=document.getElementById(m)||document.createElement("span"),N=t("learnmore"),k=document.getElementById(N)||document.createElement("a"),B=t("preprendIcon"),ne=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ce=g.element;a(ce),d(k,N);let Le=u();c(ne,B),ce.append(ne,w,k,Le),document.body.appendChild(ce)}o?(w.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function l5(){var n;let e=(n=Qp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MM(){let n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ii(){return Aw.NODE_CLIENT===!0||Aw.NODE_ADMIN===!0}function NM(){return!l5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ju(){try{return typeof indexedDB=="object"}catch{return!1}}function kM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var u5="FirebaseError",Mn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cr.prototype.create)}},Cr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?d5(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Mn(i,a,r)}};function d5(n,e){return n.replace(h5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var h5=/\{\$([^}]+)}/g;function ac(n){return JSON.parse(n)}function Ot(n){return JSON.stringify(n)}var OM=function(n){let e={},t={},r={},i="";try{let o=n.split(".");e=ac(sc(o[0])||""),t=ac(sc(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var FM=function(n){let e=OM(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},LM=function(n){let e=OM(n).claims;return typeof e=="object"&&e.admin===!0};function oi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ds(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Bu(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $u(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Qn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(DM(o)&&DM(s)){if(!Qn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function DM(n){return n!==null&&typeof n=="object"}function wo(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function hc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Kp=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)r[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){let g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let f=0;f<80;f++){f<40?f<20?(u=a^o&(s^a),d=1518500249):(u=o^s^a,d=1859775393):f<60?(u=o&s|a&(o|s),d=2400959708):(u=o^s^a,d=3395469782);let g=(i<<5|i>>>27)+u+c+d+r[f]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<t;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function VM(n,e){let t=new xw(n,e);return t.subscribe.bind(t)}var xw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");f5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Sw),i.error===void 0&&(i.error=Sw),i.complete===void 0&&(i.complete=Sw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function f5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Sw(){}function UM(n,e){return`${n} failed: ${e} argument `}var jM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,q(r<n.length,"Surrogate pair missing trail surrogate.");let s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Hu=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Hse=4*60*60*1e3;function tt(n){return n&&n._delegate?n._delegate:n}var $t=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ss="[DEFAULT]";var Xp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ni;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g5(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:p5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function p5(n){return n===Ss?void 0:n}function g5(n){return n.instantiationMode==="EAGER"}var zu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var m5=[],Ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ce||{}),_5={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},v5=Ce.INFO,y5={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},E5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=y5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=v5,this._logHandler=E5,this._userLogHandler=null,m5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}};var w5=(n,e)=>e.some(t=>n instanceof t),BM,$M;function I5(){return BM||(BM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C5(){return $M||($M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var HM=new WeakMap,Lw=new WeakMap,zM=new WeakMap,Fw=new WeakMap,Uw=new WeakMap;function b5(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(si(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&HM.set(t,n)}).catch(()=>{}),Uw.set(e,n),e}function T5(n){if(Lw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Lw.set(n,e)}var Vw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return si(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qM(n){Vw=n(Vw)}function D5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(eg(this),e,...t);return zM.set(r,e.sort?e.sort():[e]),si(r)}:C5().includes(n)?function(...e){return n.apply(eg(this),e),si(HM.get(this))}:function(...e){return si(n.apply(eg(this),e))}}function S5(n){return typeof n=="function"?D5(n):(n instanceof IDBTransaction&&T5(n),w5(n,I5())?new Proxy(n,Vw):n)}function si(n){if(n instanceof IDBRequest)return b5(n);if(Fw.has(n))return Fw.get(n);let e=S5(n);return e!==n&&(Fw.set(n,e),Uw.set(e,n)),e}var eg=n=>Uw.get(n);function GM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=si(s);return r&&s.addEventListener("upgradeneeded",c=>{r(si(s.result),c.oldVersion,c.newVersion,si(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var A5=["get","getKey","getAll","getAllKeys","count"],R5=["put","add","delete","clear"],jw=new Map;function WM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jw.get(e))return jw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=R5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||A5.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return jw.set(e,o),o}qM(n=>X(O({},n),{get:(e,t,r)=>WM(e,t)||n.get(e,t,r),has:(e,t)=>!!WM(e,t)||n.has(e,t)}));var $w=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function x5(n){let e=n.getComponent();return e?.type==="VERSION"}var Hw="@firebase/app",KM="0.13.0";var Mi=new Yn("@firebase/app"),P5="@firebase/app-compat",M5="@firebase/analytics-compat",N5="@firebase/analytics",k5="@firebase/app-check-compat",O5="@firebase/app-check",F5="@firebase/auth",L5="@firebase/auth-compat",V5="@firebase/database",U5="@firebase/data-connect",j5="@firebase/database-compat",B5="@firebase/functions",$5="@firebase/functions-compat",H5="@firebase/installations",z5="@firebase/installations-compat",q5="@firebase/messaging",W5="@firebase/messaging-compat",G5="@firebase/performance",K5="@firebase/performance-compat",Q5="@firebase/remote-config",Y5="@firebase/remote-config-compat",Z5="@firebase/storage",J5="@firebase/storage-compat",X5="@firebase/firestore",eq="@firebase/ai",tq="@firebase/firestore-compat",nq="firebase",rq="11.8.0";var zw="[DEFAULT]",iq={[Hw]:"fire-core",[P5]:"fire-core-compat",[N5]:"fire-analytics",[M5]:"fire-analytics-compat",[O5]:"fire-app-check",[k5]:"fire-app-check-compat",[F5]:"fire-auth",[L5]:"fire-auth-compat",[V5]:"fire-rtdb",[U5]:"fire-data-connect",[j5]:"fire-rtdb-compat",[B5]:"fire-fn",[$5]:"fire-fn-compat",[H5]:"fire-iid",[z5]:"fire-iid-compat",[q5]:"fire-fcm",[W5]:"fire-fcm-compat",[G5]:"fire-perf",[K5]:"fire-perf-compat",[Q5]:"fire-rc",[Y5]:"fire-rc-compat",[Z5]:"fire-gcs",[J5]:"fire-gcs-compat",[X5]:"fire-fst",[tq]:"fire-fst-compat",[eq]:"fire-vertex","fire-js":"fire-js",[nq]:"fire-js-all"};var qu=new Map,oq=new Map,qw=new Map;function QM(n,e){try{n.container.addComponent(e)}catch(t){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nn(n){let e=n.name;if(qw.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;qw.set(e,n);for(let t of qu.values())QM(t,n);for(let t of oq.values())QM(t,n);return!0}function Co(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ht(n){return n==null?!1:n.settings!==void 0}var sq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Cr("app","Firebase",sq);var Ww=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}};var ai=rq;function Qw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Io.create("bad-app-name",{appName:String(i)});if(t||(t=kw()),!t)throw Io.create("no-options");let o=qu.get(i);if(o){if(Qn(t,o.options)&&Qn(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}let s=new zu(i);for(let c of qw.values())s.addComponent(c);let a=new Ww(t,r,s);return qu.set(i,a),a}function Ni(n=zw){let e=qu.get(n);if(!e&&n===zw&&kw())return Qw();if(!e)throw Io.create("no-app",{appName:n});return e}function tg(){return Array.from(qu.values())}function ze(n,e,t){var r;let i=(r=iq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(a.join(" "));return}Nn(new $t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var aq="firebase-heartbeat-database",cq=1,Wu="firebase-heartbeat-store",Bw=null;function XM(){return Bw||(Bw=GM(aq,cq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Io.create("idb-open",{originalErrorMessage:n.message})})),Bw}function lq(n){return v(this,null,function*(){try{let t=(yield XM()).transaction(Wu),r=yield t.objectStore(Wu).get(eN(n));return yield t.done,r}catch(e){if(e instanceof Mn)Mi.warn(e.message);else{let t=Io.create("idb-get",{originalErrorMessage:e?.message});Mi.warn(t.message)}}})}function YM(n,e){return v(this,null,function*(){try{let r=(yield XM()).transaction(Wu,"readwrite");yield r.objectStore(Wu).put(e,eN(n)),yield r.done}catch(t){if(t instanceof Mn)Mi.warn(t.message);else{let r=Io.create("idb-set",{originalErrorMessage:t?.message});Mi.warn(r.message)}}})}function eN(n){return`${n.name}!${n.options.appId}`}var uq=1024,dq=30,Gw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Kw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ZM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>dq){let s=fq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mi.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ZM(),{heartbeatsToSend:r,unsentEntries:i}=hq(this._heartbeatsCache.heartbeats),o=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Mi.warn(t),""}})}};function ZM(){return new Date().toISOString().substring(0,10)}function hq(n,e=uq){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),JM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),JM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Kw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ju()?kM().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield lq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return YM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return YM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function JM(n){return Vu(JSON.stringify({version:2,heartbeats:n})).length}function fq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function pq(n){Nn(new $t("platform-logger",e=>new $w(e),"PRIVATE")),Nn(new $t("heartbeat",e=>new Gw(e),"PRIVATE")),ze(Hw,KM,n),ze(Hw,KM,"esm2017"),ze("fire-js","")}pq("");var gq="firebase",mq="11.8.1";ze(gq,mq,"app");function Yw(n){n===void 0&&(Cy(Yw),n=U(ht));let e=n.get(jf);return t=>new ve(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ci=new hs("ANGULARFIRE2_VERSION");function Rs(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var bo=(n,e)=>{let t=e?[e]:tg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},fc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(fc||{}),tN=gE()&&typeof Zone<"u"?fc.WARN:fc.SILENT;var ng=class{zone;delegate;constructor(e,t=tv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},li=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=U(Ve);this.outsideAngular=t.runOutsideAngular(()=>new ng(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ng(typeof Zone>"u"?void 0:Zone.current,ev))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nN=!1;function _q(n,e){!nN&&(tN>fc.SILENT||gE())&&(nN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function vq(n){let e=U(Ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function As(n){let e=U(Ve,{optional:!0});return e?e.run(()=>n()):n()}var yq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Zt(t,()=>As(()=>n.apply(void 0,r)))),Qe=(n,e,t)=>(t||=e?fc.WARN:fc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=U(li),s=U(jf),a=U(Qt)}catch{return _q(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=As(()=>s.add())),i[u]=yq(i[u],r,a));let c=vq(()=>n.apply(this,i));return e?c instanceof ve?c.pipe(no(o.outsideAngular),to(o.insideAngular),Yw(a)):c instanceof Promise?As(()=>new Promise((u,d)=>{s.run(()=>c).then(f=>Zt(a,()=>As(()=>u(f))),f=>Zt(a,()=>As(()=>d(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:As(()=>c):c instanceof ve?c.pipe(no(o.outsideAngular),to(o.insideAngular)):As(()=>c)});var br=class{constructor(e){return e}},ki=class{constructor(){return tg()}};function Eq(n){return n&&n.length===1?n[0]:new br(Ni())}var Zw=new te("angularfire2._apps"),wq={provide:br,useFactory:Eq,deps:[[new bt,Zw]]},Iq={provide:ki,deps:[[new bt,Zw]]};function Cq(n){return(e,t)=>{let r=t.get(lo);ze("angularfire",ci.full,"core"),ze("angularfire",ci.full,"app"),ze("angular",Cx.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new br(i)}}function Jw(n,...e){return Hn([wq,Iq,{provide:Zw,useFactory:Cq(n),multi:!0,deps:[Ve,ht,li,...e]}])}var Xw=Qe(Qw,!0);var bq=new Map,Tq={activated:!1,tokenObservers:[]},Dq={initialized:!1,enabled:!1};function Tr(n){return bq.get(n)||Object.assign({},Tq)}function sN(){return Dq}var Sq="https://content-firebaseappcheck.googleapis.com/v1";var Aq="exchangeDebugToken",rN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Kae=24*60*60*1e3;var n0=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new ni,this.pending.promise.catch(t=>{}),yield Rq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ni,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Rq(n){return new Promise(e=>{setTimeout(e,n)})}var xq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},To=new Cr("appCheck","AppCheck",xq);function aN(n){if(!Tr(n).activated)throw To.create("use-before-activation",{appName:n.name})}function cN(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw To.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw To.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw To.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw To.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function lN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Sq}/projects/${t}/apps/${r}:${Aq}?key=${i}`,body:{debug_token:e}}}var Pq="firebase-app-check-database",Mq=1,r0="firebase-app-check-store";var rg=null;function Nq(){return rg||(rg=new Promise((n,e)=>{try{let t=indexedDB.open(Pq,Mq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(To.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(r0,{keyPath:"compositeKey"})}}}catch(t){e(To.create("storage-open",{originalErrorMessage:t?.message}))}}),rg)}function kq(n,e){return Oq(Fq(n),e)}function Oq(n,e){return v(this,null,function*(){let r=(yield Nq()).transaction(r0,"readwrite"),o=r.objectStore(r0).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(To.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Fq(n){return`${n.options.appId}-${n.name}`}var Gu=new Yn("@firebase/app-check");function e0(n,e){return ju()?kq(n,e).catch(t=>{Gu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uN(){return sN().enabled}function dN(){return v(this,null,function*(){let n=sN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Lq={error:"UNKNOWN_ERROR"};function Vq(n){return cc.encodeString(JSON.stringify(n),!1)}function i0(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;aN(r);let i=Tr(r),o=i.token,s;if(o&&!Ku(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(Ku(u)?o=u:yield e0(r,void 0))}if(!e&&o&&Ku(o))return{token:o.token};let a=!1;if(uN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=cN(lN(r,yield dN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield e0(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Gu.warn(u.message):t&&Gu.error(u),t0(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Tr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Gu.warn(u.message):t&&Gu.error(u),s=u}let c;return o?s?Ku(o)?c={token:o.token,internalError:s}:c=t0(s):(c={token:o.token},i.token=o,yield e0(r,o)):c=t0(s),a&&$q(r,c),c})}function Uq(n){return v(this,null,function*(){let e=n.app;aN(e);let{provider:t}=Tr(e);if(uN()){let r=yield dN(),{token:i}=yield cN(lN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function jq(n,e,t,r){let{app:i}=n,o=Tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ku(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),iN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iN(n))}function hN(n,e){let t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function iN(n){let{app:e}=n,t=Tr(e),r=t.tokenRefresher;r||(r=Bq(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Bq(n){let{app:e}=n;return new n0(()=>v(null,null,function*(){let t=Tr(e),r;if(t.token?r=yield i0(n,!0):r=yield i0(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rN.RETRIAL_MIN_WAIT,rN.RETRIAL_MAX_WAIT)}function $q(n,e){let t=Tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ku(n){return n.expireTimeMillis-Date.now()>0}function t0(n){return{token:Vq(Lq),error:n}}var o0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Tr(this.app);for(let t of e)hN(this.app,t.next);return Promise.resolve()}};function Hq(n,e){return new o0(n,e)}function zq(n){return{getToken:e=>i0(n,e),getLimitedUseToken:()=>Uq(n),addTokenListener:e=>jq(n,"INTERNAL",e),removeTokenListener:e=>hN(n.app,e)}}var qq="@firebase/app-check",Wq="0.10.0";var Gq="app-check",oN="app-check-internal";function Kq(){Nn(new $t(Gq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Hq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oN).initialize()})),Nn(new $t(oN,n=>{let e=n.getProvider("app-check").getImmediate();return zq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ze(qq,Wq)}Kq();var Qq="app-check";var Do=class{constructor(){return bo(Qq)}};var Yq=["localhost","0.0.0.0","127.0.0.1"],ace=typeof window<"u"&&Yq.includes(window.location.hostname);function AN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RN=AN,xN=new Cr("auth","Firebase",AN());var lg=new Yn("@firebase/auth");function Zq(n,...e){lg.logLevel<=Ce.WARN&&lg.warn(`Auth (${ai}): ${n}`,...e)}function og(n,...e){lg.logLevel<=Ce.ERROR&&lg.error(`Auth (${ai}): ${n}`,...e)}function Zn(n,...e){throw A0(n,...e)}function Dr(n,...e){return A0(n,...e)}function S0(n,e,t){let r=Object.assign(Object.assign({},RN()),{[e]:t});return new Cr("auth","Firebase",r).create(e,{appName:n.name})}function Li(n){return S0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jq(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(n,"argument-error"),S0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function A0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xN.create(n,...e)}function de(n,e,...t){if(!n)throw A0(e,...t)}function Oi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw og(e),new Error(e)}function Vi(n,e){n||Oi(e)}function c0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Xq(){return fN()==="http:"||fN()==="https:"}function fN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function eW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xq()||PM()||"connection"in navigator)?navigator.onLine:!0}function tW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=Uu()||Jp()}get(){return eW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function R0(n,e){Vi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ug=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iW=new xs(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function xo(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return PN(n,i,()=>v(null,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=wo(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:g},u);return xM()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ri(n.emulatorConfig.host)&&(m.credentials="include"),ug.fetch()(yield MN(n,n.config.apiHost,t,f),m)}))})}function PN(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},nW),e);try{let i=new l0(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ig(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ig(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw ig(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw ig(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw S0(n,d,u);Zn(n,d)}}catch(i){if(i instanceof Mn)throw i;Zn(n,"network-request-failed",{message:String(i)})}})}function rd(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let u=yield xo(n,e,t,r,i);return"mfaPendingCredential"in u&&Zn(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function MN(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?R0(n.config,i):`${n.config.apiScheme}://${i}`;return rW.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function oW(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var l0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),iW.get())})}};function ig(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Dr(n,e,r);return i.customData._tokenResponse=t,i}function pN(n){return n!==void 0&&n.enterprise!==void 0}var u0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oW(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function sW(n,e){return v(this,null,function*(){return xo(n,"GET","/v2/recaptchaConfig",Ro(n,e))})}function aW(n,e){return v(this,null,function*(){return xo(n,"POST","/v1/accounts:delete",e)})}function dg(n,e){return v(this,null,function*(){return xo(n,"POST","/v1/accounts:lookup",e)})}function Yu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function x0(n,e=!1){return v(this,null,function*(){let t=tt(n),r=yield t.getIdToken(e),i=P0(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Yu(s0(i.auth_time)),issuedAtTime:Yu(s0(i.iat)),expirationTime:Yu(s0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function s0(n){return Number(n)*1e3}function P0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return og("JWT malformed, contained fewer than 3 sections"),null;try{let i=sc(t);return i?JSON.parse(i):(og("Failed to decode base64 JWT payload"),null)}catch(i){return og("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gN(n){let e=P0(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ju(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Mn&&cW(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function cW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var d0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hg(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ju(n,dg(t,{idToken:r}));de(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?NN(o.providerUserInfo):[],a=lW(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Xu(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function M0(n){return v(this,null,function*(){let e=tt(n);yield hg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NN(n){return n.map(e=>{var{providerId:t}=e,r=xh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uW(n,e){return v(this,null,function*(){let t=yield PN(n,{},()=>v(null,null,function*(){let r=wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield MN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ug.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function dW(n,e){return v(this,null,function*(){return xo(n,"POST","/v2/accounts:revokeToken",Ro(n,e))})}var Zu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");let t=gN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield uW(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(de(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(de(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Oi("not implemented")}};function So(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ao=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=xh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ju(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return x0(this,e)}reload(){return M0(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield hg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Ht(this.auth.app))return Promise.reject(Li(this.auth));let e=yield this.getIdToken();return yield Ju(this,aW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,B=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ne=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:ce,emailVerified:Le,isAnonymous:Pt,providerData:$e,stsTokenManager:D}=t;de(ce&&D,e,"internal-error");let y=Zu.fromJSON(this.name,D);de(typeof ce=="string",e,"internal-error"),So(f,e.name),So(g,e.name),de(typeof Le=="boolean",e,"internal-error"),de(typeof Pt=="boolean",e,"internal-error"),So(m,e.name),So(w,e.name),So(N,e.name),So(k,e.name),So(B,e.name),So(ne,e.name);let b=new n({uid:ce,auth:e,email:g,emailVerified:Le,displayName:f,isAnonymous:Pt,photoURL:w,phoneNumber:m,tenantId:N,stsTokenManager:y,createdAt:B,lastLoginAt:ne});return $e&&Array.isArray($e)&&(b.providerData=$e.map(T=>Object.assign({},T))),k&&(b._redirectEventId=k),b}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Zu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];de(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?NN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Zu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var mN=new Map;function Fi(n){Vi(n instanceof Function,"Expected a class definition");let e=mN.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mN.set(n,e),e)}var hW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),h0=hW;function sg(n,e,t){return`firebase:${n}:${e}:${t}`}var fg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=sg(this.userKey,i.apiKey,o),this.fullPersistenceKey=sg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield dg(this.auth,{idToken:e}).catch(()=>{});return t?Ao._fromGetAccountInfoResponse(this.auth,t,e):null}return Ao._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Fi(h0),e,r);let i=(yield Promise.all(t.map(u=>v(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Fi(h0),s=sg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f;if(typeof d=="string"){let g=yield dg(e,{idToken:d}).catch(()=>{});if(!g)break;f=yield Ao._fromGetAccountInfoResponse(e,g,d)}else f=Ao._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>v(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function _N(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UN(e))return"Blackberry";if(jN(e))return"Webos";if(ON(e))return"Safari";if((e.includes("chrome/")||FN(e))&&!e.includes("edge/"))return"Chrome";if(VN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kN(n=kt()){return/firefox\//i.test(n)}function ON(n=kt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FN(n=kt()){return/crios\//i.test(n)}function LN(n=kt()){return/iemobile/i.test(n)}function VN(n=kt()){return/android/i.test(n)}function UN(n=kt()){return/blackberry/i.test(n)}function jN(n=kt()){return/webos/i.test(n)}function N0(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fW(n=kt()){var e;return N0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pW(){return MM()&&document.documentMode===10}function BN(n=kt()){return N0(n)||VN(n)||jN(n)||UN(n)||/windows phone/i.test(n)||LN(n)}function $N(n,e=[]){let t;switch(n){case"Browser":t=_N(kt());break;case"Worker":t=`${_N(kt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ai}/${r}`}var f0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function gW(t){return v(this,arguments,function*(n,e={}){return xo(n,"GET","/v2/passwordPolicy",Ro(n,e))})}var mW=6,p0=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:mW,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var g0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pg(this),this.idTokenSubscription=new pg(this),this.beforeStateQueue=new f0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fi(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield fg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield dg(this,{idToken:e}),r=yield Ao._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Ht(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield hg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=tW()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Ht(this.app))return Promise.reject(Li(this));let t=e?tt(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Ht(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ht(this.app)?Promise.reject(Li(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Fi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield gW(this),t=new p0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Fi(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=yield fg.create(this,[Fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Zq(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Po(n){return tt(n)}var pg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=VM(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Cg={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _W(n){Cg=n}function HN(n){return Cg.loadJS(n)}function vW(){return Cg.recaptchaEnterpriseScript}function yW(){return Cg.gapiScript}function zN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var m0=class{constructor(){this.enterprise=new _0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},_0=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var EW="recaptcha-enterprise",qN="NO_RECAPTCHA",v0=class{constructor(e){this.type=EW,this.auth=Po(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){sW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new u0(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;pN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(qN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m0().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&pN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=vW();c.length!==0&&(c+=a),HN(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Qu(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new v0(n),s;if(i)s=qN;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function y0(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Qu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Qu(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Qu(n,e,t);return r(n,a).catch(c=>v(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield Qu(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield Qu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function k0(n,e){let t=Co(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qn(o,e??{}))return i;Zn(i,"already-initialized")}return t.initialize({options:e})}function wW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function O0(n,e,t){let r=Po(n);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=WN(e),{host:s,port:a}=IW(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(Qn(u,r.config.emulator)&&Qn(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ri(s)?(lc(`${o}//${s}${c}`),uc("Auth",!0)):i||CW()}function WN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IW(n){let e=WN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:vN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:vN(s)}}}function vN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CW(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var gc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}};function bW(n,e){return v(this,null,function*(){return xo(n,"POST","/v1/accounts:signUp",e)})}function TW(n,e){return v(this,null,function*(){return rd(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))})}function DW(n,e){return v(this,null,function*(){return rd(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))})}function SW(n,e){return v(this,null,function*(){return rd(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))})}var ed=class n extends gc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,t,"signInWithPassword",TW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DW(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,r,"signUpPassword",bW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SW(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function pc(n,e){return v(this,null,function*(){return rd(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))})}var AW="http://localhost",gg=class n extends gc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=xh(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return pc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,pc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,pc(e,t)}buildRequest(){let e={requestUri:AW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wo(t)}return e}};function RW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xW(n){let e=dc(hc(n)).link,t=e?dc(hc(e)).deep_link_id:null,r=dc(hc(n)).deep_link_id;return(r?dc(hc(r)).link:null)||r||t||e||n}var mg=class n{constructor(e){var t,r,i,o,s,a;let c=dc(hc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=RW((i=c.mode)!==null&&i!==void 0?i:null);de(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=xW(e);try{return new n(t)}catch{return null}}};var GN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ed._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=mg.parseLink(r);return de(i,"argument-error"),ed._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),td=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _g=class extends td{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var F0=(()=>{class n extends _g{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return gg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function PW(n,e){return v(this,null,function*(){return rd(n,"POST","/v1/accounts:signUp",Ro(n,e))})}var mc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Ao._fromIdTokenResponse(e,r,i),s=yN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=yN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function yN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var E0=class n extends Mn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function KN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?E0._fromErrorAndOperation(n,o,e,r):o})}function MW(n,e,t=!1){return v(this,null,function*(){let r=yield Ju(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mc._forOperation(n,"link",r)})}function NW(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Ht(r.app))return Promise.reject(Li(r));let i="reauthenticate";try{let o=yield Ju(n,KN(r,i,e,n),t);de(o.idToken,r,"internal-error");let s=P0(o.idToken);de(s,r,"internal-error");let{sub:a}=s;return de(n.uid===a,r,"user-mismatch"),mc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Zn(r,"user-mismatch"),o}})}function QN(n,e,t=!1){return v(this,null,function*(){if(Ht(n.app))return Promise.reject(Li(n));let r="signIn",i=yield KN(n,r,e),o=yield mc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function L0(n,e){return v(this,null,function*(){return QN(Po(n),e)})}function YN(n){return v(this,null,function*(){let e=Po(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function V0(n,e,t){return v(this,null,function*(){if(Ht(n.app))return Promise.reject(Li(n));let r=Po(n),s=yield y0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PW,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&YN(n),c}),a=yield mc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function U0(n,e,t){return Ht(n.app)?Promise.reject(Li(n)):L0(tt(n),GN.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&YN(n),r}))}function id(n,e,t,r){return tt(n).onIdTokenChanged(e,t,r)}function j0(n,e,t){return tt(n).beforeAuthStateChanged(e,t)}function bg(n,e,t,r){return tt(n).onAuthStateChanged(e,t,r)}function B0(n){return tt(n).signOut()}var vg="__sak";var yg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vg,"1"),this.storage.removeItem(vg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var kW=1e3,OW=10,FW=(()=>{class n extends yg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);pW()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,OW):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},kW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Xi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Xi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Xi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ZN=FW;var LW=(()=>{class n extends yg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),$0=LW;function VW(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var UW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,s)})),u=yield VW(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function H0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var w0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=H0("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ui(){return window}function jW(n){ui().location.href=n}function JN(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}function BW(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $W(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function HW(){return JN()?self:null}var XN="firebaseLocalStorageDb",zW=1,Eg="firebaseLocalStorage",e1="fbase_key",Ps=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Tg(n,e){return n.transaction([Eg],e?"readwrite":"readonly").objectStore(Eg)}function qW(){let n=indexedDB.deleteDatabase(XN);return new Ps(n).toPromise()}function I0(){let n=indexedDB.open(XN,zW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Eg,{keyPath:e1})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Eg)?e(r):(r.close(),yield qW(),e(yield I0()))}))})}function EN(n,e,t){return v(this,null,function*(){let r=Tg(n,!0).put({[e1]:e,value:t});return new Ps(r).toPromise()})}function WW(n,e){return v(this,null,function*(){let t=Tg(n,!1).get(e),r=yield new Ps(t).toPromise();return r===void 0?null:r.value})}function wN(n,e){let t=Tg(n,!0).delete(e);return new Ps(t).toPromise()}var GW=800,KW=3,QW=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield I0(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>KW)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return JN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=UW._getInstance(HW()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield BW(),!this.activeServiceWorker)return;this.sender=new w0(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$W()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield I0();return yield EN(t,vg,"1"),yield wN(t,vg),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>EN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>WW(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>wN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Tg(o,!1).getAll();return new Ps(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),GW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),t1=QW;var gce=zN("rcb"),mce=new xs(3e4,6e4);function n1(n,e){return e?Fi(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var nd=class extends gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function YW(n){return QN(n.auth,new nd(n),n.bypassAuthState)}function ZW(n){let{auth:e,user:t}=n;return de(t,e,"internal-error"),NW(t,new nd(n),n.bypassAuthState)}function JW(n){return v(this,null,function*(){let{auth:e,user:t}=n;return de(t,e,"internal-error"),MW(t,new nd(n),n.bypassAuthState)})}var wg=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YW;case"linkViaPopup":case"linkViaRedirect":return JW;case"reauthViaPopup":case"reauthViaRedirect":return ZW;default:Zn(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var XW=new xs(2e3,1e4);function z0(n,e,t){return v(this,null,function*(){if(Ht(n.app))return Promise.reject(Dr(n,"operation-not-supported-in-this-environment"));let r=Po(n);Jq(n,e,td);let i=n1(r,t);return new e6(r,"signInViaPopup",e,i).executeNotNull()})}var e6=(()=>{class n extends wg{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return de(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){Vi(this.filter.length===1,"Popup operations only handle one event");let t=H0();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,XW.get())};t()}}n.currentPopupAction=null;return n})(),t6="pendingRedirect",ag=new Map,C0=class n extends wg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=ag.get(this.auth._key());if(!e){try{let r=(yield n6(this.resolver,this.auth))?yield Xi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ag.set(this.auth._key(),e)}return this.bypassAuthState||ag.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Xi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Xi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function n6(n,e){return v(this,null,function*(){let t=o6(e),r=i6(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function r6(n,e){ag.set(n._key(),e)}function i6(n){return Fi(n._redirectPersistence)}function o6(n){return sg(t6,n.config.apiKey,n.name)}function s6(n,e,t=!1){return v(this,null,function*(){if(Ht(n.app))return Promise.reject(Li(n));let r=Po(n),i=n1(r,e),s=yield new C0(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var a6=10*60*1e3,b0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!r1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a6&&this.cachedEventUids.clear(),this.cachedEventUids.has(IN(e))}saveEventToCache(e){this.cachedEventUids.add(IN(e)),this.lastProcessedEventTime=Date.now()}};function IN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function r1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function c6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r1(n);default:return!1}}function l6(t){return v(this,arguments,function*(n,e={}){return xo(n,"GET","/v1/projects",e)})}var u6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d6=/^https?/;function h6(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield l6(n);for(let t of e)try{if(f6(t))return}catch{}Zn(n,"unauthorized-domain")})}function f6(n){let e=c0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!d6.test(t))return!1;if(u6.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var p6=new xs(3e4,6e4);function CN(){let n=ui().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function g6(n){return new Promise((e,t)=>{var r,i,o;function s(){CN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CN(),t(Dr(n,"network-request-failed"))},timeout:p6.get()})}if(!((i=(r=ui().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ui().gapi)===null||o===void 0)&&o.load)s();else{let a=zN("iframefcb");return ui()[a]=()=>{gapi.load?s():t(Dr(n,"network-request-failed"))},HN(`${yW()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw cg=null,e})}var cg=null;function m6(n){return cg=cg||g6(n),cg}var _6=new xs(5e3,15e3),v6="__/auth/iframe",y6="emulator/auth/iframe",E6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I6(n){let e=n.config;de(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?R0(e,y6):`https://${n.config.authDomain}/${v6}`,r={apiKey:e.apiKey,appName:n.name,v:ai},i=w6.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wo(r).slice(1)}`}function C6(n){return v(this,null,function*(){let e=yield m6(n),t=ui().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:I6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E6,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Dr(n,"network-request-failed"),a=ui().setTimeout(()=>{o(s)},_6.get());function c(){ui().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var b6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T6=500,D6=600,S6="_blank",A6="http://localhost",Ig=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function R6(n,e,t,r=T6,i=D6){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},b6),{width:r.toString(),height:i.toString(),top:o,left:s}),u=kt().toLowerCase();t&&(a=FN(u)?S6:t),kN(u)&&(e=e||A6,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[m,w])=>`${g}${m}=${w},`,"");if(fW(u)&&a!=="_self")return x6(e||"",a),new Ig(null);let f=window.open(e||"",a,d);de(f,n,"popup-blocked");try{f.focus()}catch{}return new Ig(f)}function x6(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var P6="__/auth/handler",M6="emulator/auth/handler",N6=encodeURIComponent("fac");function bN(n,e,t,r,i,o){return v(this,null,function*(){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ai,eventId:i};if(e instanceof td){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Bu(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof _g){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${N6}=${encodeURIComponent(c)}`:"";return`${k6(n)}?${wo(a).slice(1)}${u}`})}function k6({config:n}){return n.emulator?R0(n,M6):`https://${n.authDomain}/${P6}`}var a0="webStorageSupport",T0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$0,this._completeRedirectFn=s6,this._overrideRedirectResult=r6}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Vi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield bN(e,t,r,c0(),i);return R6(e,s,H0())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield bN(e,t,r,c0(),i);return jW(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield C6(e),r=new b0(e);return t.register("authEvent",i=>(de(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(a0,{type:a0},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[a0];s!==void 0&&t(!!s),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=h6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BN()||ON()||N0()}},i1=T0;var TN="@firebase/auth",DN="1.10.6";var D0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F6(n){Nn(new $t("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;de(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$N(n)},u=new g0(r,i,o,c);return wW(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nn(new $t("auth-internal",e=>{let t=Po(e.getProvider("auth").getImmediate());return(r=>new D0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze(TN,DN,O6(n)),ze(TN,DN,"esm2017")}var L6=5*60,V6=Ow("authIdTokenMaxAge")||L6,SN=null,U6=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>V6)return;let i=t?.token;SN!==i&&(SN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function q0(n=Ni()){let e=Co(n,"auth");if(e.isInitialized())return e.getImmediate();let t=k0(n,{popupRedirectResolver:i1,persistence:[t1,ZN,$0]}),r=Ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=U6(o.toString());j0(t,s,()=>s(t.currentUser)),id(t,a=>s(a))}}let i=Nw("auth");return i&&O0(t,`http://${i}`),t}function j6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_W({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Dr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",j6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F6("Browser");function s1(n){return new ve(function(e){var t=id(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var a1="auth",kn=class{constructor(e){return e}},Ms=class{constructor(){return bo(a1)}};var W0=new te("angularfire2.auth-instances");function D9(n,e){let t=Rs(a1,n,e);return t&&new kn(t)}function S9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new kn(r)}}var A9={provide:Ms,deps:[[new bt,W0]]},R9={provide:kn,useFactory:D9,deps:[[new bt,W0],br]};function c1(n,...e){return ze("angularfire",ci.full,"auth"),Hn([R9,A9,{provide:W0,useFactory:S9(n),multi:!0,deps:[Ve,ht,li,ki,[new bt,Do],...e]}])}var Dg=Qe(s1,!0);var l1=Qe(V0,!0,2);var u1=Qe(q0,!0);var d1=Qe(bg,!0);var h1=Qe(U0,!0,2);var f1=Qe(z0,!0,2);var p1=Qe(B0,!0,2);var g1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m1={};var Ui,G0;(function(){var n;function e(D,y){function b(){}b.prototype=y.prototype,D.D=y.prototype,D.prototype=new b,D.prototype.constructor=D,D.C=function(T,S,x){for(var C=Array(arguments.length-2),Ei=2;Ei<arguments.length;Ei++)C[Ei-2]=arguments[Ei];return y.prototype[S].apply(T,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,b){b||(b=0);var T=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)T[S]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(S=0;16>S;++S)T[S]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=D.g[0],b=D.g[1],S=D.g[2];var x=D.g[3],C=y+(x^b&(S^x))+T[0]+3614090360&4294967295;y=b+(C<<7&4294967295|C>>>25),C=x+(S^y&(b^S))+T[1]+3905402710&4294967295,x=y+(C<<12&4294967295|C>>>20),C=S+(b^x&(y^b))+T[2]+606105819&4294967295,S=x+(C<<17&4294967295|C>>>15),C=b+(y^S&(x^y))+T[3]+3250441966&4294967295,b=S+(C<<22&4294967295|C>>>10),C=y+(x^b&(S^x))+T[4]+4118548399&4294967295,y=b+(C<<7&4294967295|C>>>25),C=x+(S^y&(b^S))+T[5]+1200080426&4294967295,x=y+(C<<12&4294967295|C>>>20),C=S+(b^x&(y^b))+T[6]+2821735955&4294967295,S=x+(C<<17&4294967295|C>>>15),C=b+(y^S&(x^y))+T[7]+4249261313&4294967295,b=S+(C<<22&4294967295|C>>>10),C=y+(x^b&(S^x))+T[8]+1770035416&4294967295,y=b+(C<<7&4294967295|C>>>25),C=x+(S^y&(b^S))+T[9]+2336552879&4294967295,x=y+(C<<12&4294967295|C>>>20),C=S+(b^x&(y^b))+T[10]+4294925233&4294967295,S=x+(C<<17&4294967295|C>>>15),C=b+(y^S&(x^y))+T[11]+2304563134&4294967295,b=S+(C<<22&4294967295|C>>>10),C=y+(x^b&(S^x))+T[12]+1804603682&4294967295,y=b+(C<<7&4294967295|C>>>25),C=x+(S^y&(b^S))+T[13]+4254626195&4294967295,x=y+(C<<12&4294967295|C>>>20),C=S+(b^x&(y^b))+T[14]+2792965006&4294967295,S=x+(C<<17&4294967295|C>>>15),C=b+(y^S&(x^y))+T[15]+1236535329&4294967295,b=S+(C<<22&4294967295|C>>>10),C=y+(S^x&(b^S))+T[1]+4129170786&4294967295,y=b+(C<<5&4294967295|C>>>27),C=x+(b^S&(y^b))+T[6]+3225465664&4294967295,x=y+(C<<9&4294967295|C>>>23),C=S+(y^b&(x^y))+T[11]+643717713&4294967295,S=x+(C<<14&4294967295|C>>>18),C=b+(x^y&(S^x))+T[0]+3921069994&4294967295,b=S+(C<<20&4294967295|C>>>12),C=y+(S^x&(b^S))+T[5]+3593408605&4294967295,y=b+(C<<5&4294967295|C>>>27),C=x+(b^S&(y^b))+T[10]+38016083&4294967295,x=y+(C<<9&4294967295|C>>>23),C=S+(y^b&(x^y))+T[15]+3634488961&4294967295,S=x+(C<<14&4294967295|C>>>18),C=b+(x^y&(S^x))+T[4]+3889429448&4294967295,b=S+(C<<20&4294967295|C>>>12),C=y+(S^x&(b^S))+T[9]+568446438&4294967295,y=b+(C<<5&4294967295|C>>>27),C=x+(b^S&(y^b))+T[14]+3275163606&4294967295,x=y+(C<<9&4294967295|C>>>23),C=S+(y^b&(x^y))+T[3]+4107603335&4294967295,S=x+(C<<14&4294967295|C>>>18),C=b+(x^y&(S^x))+T[8]+1163531501&4294967295,b=S+(C<<20&4294967295|C>>>12),C=y+(S^x&(b^S))+T[13]+2850285829&4294967295,y=b+(C<<5&4294967295|C>>>27),C=x+(b^S&(y^b))+T[2]+4243563512&4294967295,x=y+(C<<9&4294967295|C>>>23),C=S+(y^b&(x^y))+T[7]+1735328473&4294967295,S=x+(C<<14&4294967295|C>>>18),C=b+(x^y&(S^x))+T[12]+2368359562&4294967295,b=S+(C<<20&4294967295|C>>>12),C=y+(b^S^x)+T[5]+4294588738&4294967295,y=b+(C<<4&4294967295|C>>>28),C=x+(y^b^S)+T[8]+2272392833&4294967295,x=y+(C<<11&4294967295|C>>>21),C=S+(x^y^b)+T[11]+1839030562&4294967295,S=x+(C<<16&4294967295|C>>>16),C=b+(S^x^y)+T[14]+4259657740&4294967295,b=S+(C<<23&4294967295|C>>>9),C=y+(b^S^x)+T[1]+2763975236&4294967295,y=b+(C<<4&4294967295|C>>>28),C=x+(y^b^S)+T[4]+1272893353&4294967295,x=y+(C<<11&4294967295|C>>>21),C=S+(x^y^b)+T[7]+4139469664&4294967295,S=x+(C<<16&4294967295|C>>>16),C=b+(S^x^y)+T[10]+3200236656&4294967295,b=S+(C<<23&4294967295|C>>>9),C=y+(b^S^x)+T[13]+681279174&4294967295,y=b+(C<<4&4294967295|C>>>28),C=x+(y^b^S)+T[0]+3936430074&4294967295,x=y+(C<<11&4294967295|C>>>21),C=S+(x^y^b)+T[3]+3572445317&4294967295,S=x+(C<<16&4294967295|C>>>16),C=b+(S^x^y)+T[6]+76029189&4294967295,b=S+(C<<23&4294967295|C>>>9),C=y+(b^S^x)+T[9]+3654602809&4294967295,y=b+(C<<4&4294967295|C>>>28),C=x+(y^b^S)+T[12]+3873151461&4294967295,x=y+(C<<11&4294967295|C>>>21),C=S+(x^y^b)+T[15]+530742520&4294967295,S=x+(C<<16&4294967295|C>>>16),C=b+(S^x^y)+T[2]+3299628645&4294967295,b=S+(C<<23&4294967295|C>>>9),C=y+(S^(b|~x))+T[0]+4096336452&4294967295,y=b+(C<<6&4294967295|C>>>26),C=x+(b^(y|~S))+T[7]+1126891415&4294967295,x=y+(C<<10&4294967295|C>>>22),C=S+(y^(x|~b))+T[14]+2878612391&4294967295,S=x+(C<<15&4294967295|C>>>17),C=b+(x^(S|~y))+T[5]+4237533241&4294967295,b=S+(C<<21&4294967295|C>>>11),C=y+(S^(b|~x))+T[12]+1700485571&4294967295,y=b+(C<<6&4294967295|C>>>26),C=x+(b^(y|~S))+T[3]+2399980690&4294967295,x=y+(C<<10&4294967295|C>>>22),C=S+(y^(x|~b))+T[10]+4293915773&4294967295,S=x+(C<<15&4294967295|C>>>17),C=b+(x^(S|~y))+T[1]+2240044497&4294967295,b=S+(C<<21&4294967295|C>>>11),C=y+(S^(b|~x))+T[8]+1873313359&4294967295,y=b+(C<<6&4294967295|C>>>26),C=x+(b^(y|~S))+T[15]+4264355552&4294967295,x=y+(C<<10&4294967295|C>>>22),C=S+(y^(x|~b))+T[6]+2734768916&4294967295,S=x+(C<<15&4294967295|C>>>17),C=b+(x^(S|~y))+T[13]+1309151649&4294967295,b=S+(C<<21&4294967295|C>>>11),C=y+(S^(b|~x))+T[4]+4149444226&4294967295,y=b+(C<<6&4294967295|C>>>26),C=x+(b^(y|~S))+T[11]+3174756917&4294967295,x=y+(C<<10&4294967295|C>>>22),C=S+(y^(x|~b))+T[2]+718787259&4294967295,S=x+(C<<15&4294967295|C>>>17),C=b+(x^(S|~y))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+S&4294967295,D.g[3]=D.g[3]+x&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var b=y-this.blockSize,T=this.B,S=this.h,x=0;x<y;){if(S==0)for(;x<=b;)i(this,D,x),x+=this.blockSize;if(typeof D=="string"){for(;x<y;)if(T[S++]=D.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<y;)if(T[S++]=D[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var b=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=b&255,b/=256;for(this.u(D),D=Array(16),y=b=0;4>y;++y)for(var T=0;32>T;T+=8)D[b++]=this.g[y]>>>T&255;return D};function o(D,y){var b=a;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=y(D)}function s(D,y){this.h=y;for(var b=[],T=!0,S=D.length-1;0<=S;S--){var x=D[S]|0;T&&x==y||(b[S]=x,T=!1)}this.g=b}var a={};function c(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return k(u(-D));for(var y=[],b=1,T=0;D>=b;T++)y[T]=D/b|0,b*=4294967296;return new s(y,0)}function d(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return k(d(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(y,8)),T=f,S=0;S<D.length;S+=8){var x=Math.min(8,D.length-S),C=parseInt(D.substring(S,S+x),y);8>x?(x=u(Math.pow(y,x)),T=T.j(x).add(u(C))):(T=T.j(b),T=T.add(u(C)))}return T}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-k(this).m();for(var D=0,y=1,b=0;b<this.g.length;b++){var T=this.i(b);D+=(0<=T?T:4294967296+T)*y,y*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(N(this))return"-"+k(this).toString(D);for(var y=u(Math.pow(D,6)),b=this,T="";;){var S=Le(b,y).g;b=B(b,S.j(y));var x=((0<b.g.length?b.g[0]:b.h)>>>0).toString(D);if(b=S,w(b))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=B(this,D),N(D)?-1:w(D)?0:1};function k(D){for(var y=D.g.length,b=[],T=0;T<y;T++)b[T]=~D.g[T];return new s(b,~D.h).add(g)}n.abs=function(){return N(this)?k(this):this},n.add=function(D){for(var y=Math.max(this.g.length,D.g.length),b=[],T=0,S=0;S<=y;S++){var x=T+(this.i(S)&65535)+(D.i(S)&65535),C=(x>>>16)+(this.i(S)>>>16)+(D.i(S)>>>16);T=C>>>16,x&=65535,C&=65535,b[S]=C<<16|x}return new s(b,b[b.length-1]&-2147483648?-1:0)};function B(D,y){return D.add(k(y))}n.j=function(D){if(w(this)||w(D))return f;if(N(this))return N(D)?k(this).j(k(D)):k(k(this).j(D));if(N(D))return k(this.j(k(D)));if(0>this.l(m)&&0>D.l(m))return u(this.m()*D.m());for(var y=this.g.length+D.g.length,b=[],T=0;T<2*y;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<D.g.length;S++){var x=this.i(T)>>>16,C=this.i(T)&65535,Ei=D.i(S)>>>16,cl=D.i(S)&65535;b[2*T+2*S]+=C*cl,ne(b,2*T+2*S),b[2*T+2*S+1]+=x*cl,ne(b,2*T+2*S+1),b[2*T+2*S+1]+=C*Ei,ne(b,2*T+2*S+1),b[2*T+2*S+2]+=x*Ei,ne(b,2*T+2*S+2)}for(T=0;T<y;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=y;T<2*y;T++)b[T]=0;return new s(b,0)};function ne(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function ce(D,y){this.g=D,this.h=y}function Le(D,y){if(w(y))throw Error("division by zero");if(w(D))return new ce(f,f);if(N(D))return y=Le(k(D),y),new ce(k(y.g),k(y.h));if(N(y))return y=Le(D,k(y)),new ce(k(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var b=g,T=y;0>=T.l(D);)b=Pt(b),T=Pt(T);var S=$e(b,1),x=$e(T,1);for(T=$e(T,2),b=$e(b,2);!w(T);){var C=x.add(T);0>=C.l(D)&&(S=S.add(b),x=C),T=$e(T,1),b=$e(b,1)}return y=B(D,S.j(y)),new ce(S,y)}for(S=f;0<=D.l(y);){for(b=Math.max(1,Math.floor(D.m()/y.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=u(b),C=x.j(y);N(C)||0<C.l(D);)b-=T,x=u(b),C=x.j(y);w(x)&&(x=g),S=S.add(x),D=B(D,C)}return new ce(S,D)}n.A=function(D){return Le(this,D).h},n.and=function(D){for(var y=Math.max(this.g.length,D.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)&D.i(T);return new s(b,this.h&D.h)},n.or=function(D){for(var y=Math.max(this.g.length,D.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)|D.i(T);return new s(b,this.h|D.h)},n.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)^D.i(T);return new s(b,this.h^D.h)};function Pt(D){for(var y=D.g.length+1,b=[],T=0;T<y;T++)b[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(b,D.h)}function $e(D,y){var b=y>>5;y%=32;for(var T=D.g.length-b,S=[],x=0;x<T;x++)S[x]=0<y?D.i(x+b)>>>y|D.i(x+b+1)<<32-y:D.i(x+b);return new s(S,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,G0=m1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Ui=m1.Integer=s}).apply(typeof g1<"u"?g1:typeof self<"u"?self:typeof window<"u"?window:{});var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={};var K0,x9,_c,Q0,od,Rg,Y0,Z0,J0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ag=="object"&&Ag];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var A=l[_];if(!(A in p))break e;p=p[A]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,_=!1,A={next:function(){if(!_&&p<l.length){var M=p++;return{value:h(M,l[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,_),l.apply(h,A)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,A,M){for(var $=Array(arguments.length-2),We=2;We<arguments.length;We++)$[We-2]=arguments[We];return h.prototype[A].apply(_,$)}}function N(l){let h=l.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function k(l,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let A=l.length||0,M=_.length||0;l.length=A+M;for(let $=0;$<M;$++)l[A+$]=_[$]}else l.push(_)}}class B{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ne(l){return/^[\s\xa0]*$/.test(l)}function ce(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Le(l){return Le[" "](l),l}Le[" "]=function(){};var Pt=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function $e(l,h,p){for(let _ in l)h.call(p,l[_],_,l)}function D(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,h){let p,_;for(let A=1;A<arguments.length;A++){_=arguments[A];for(p in _)l[p]=_[p];for(let M=0;M<b.length;M++)p=b[M],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function S(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function x(l){a.setTimeout(()=>{throw l},0)}function C(){var l=r_;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Ei{constructor(){this.h=this.g=null}add(h,p){let _=cl.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var cl=new B(()=>new iV,l=>l.reset());class iV{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ll,ul=!1,r_=new Ei,MT=()=>{let l=a.Promise.resolve(void 0);ll=()=>{l.then(oV)}};var oV=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){x(p)}var h=cl;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}ul=!1};function Ki(){this.s=this.s,this.C=this.C}Ki.prototype.s=!1,Ki.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ki.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var sV=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function dl(l,h){if(qt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Pt){e:{try{Le(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:aV[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&dl.aa.h.call(this)}}w(dl,qt);var aV={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),cV=0;function lV(l,h,p,_,A){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=A,this.key=++cV,this.da=this.fa=!1}function Yd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Zd(l){this.src=l,this.g={},this.h=0}Zd.prototype.add=function(l,h,p,_,A){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var $=o_(l,h,_,A);return-1<$?(h=l[$],p||(h.fa=!1)):(h=new lV(h,this.src,M,!!_,A),h.fa=p,l.push(h)),h};function i_(l,h){var p=h.type;if(p in l.g){var _=l.g[p],A=Array.prototype.indexOf.call(_,h,void 0),M;(M=0<=A)&&Array.prototype.splice.call(_,A,1),M&&(Yd(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function o_(l,h,p,_){for(var A=0;A<l.length;++A){var M=l[A];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==_)return A}return-1}var s_="closure_lm_"+(1e6*Math.random()|0),a_={};function NT(l,h,p,_,A){if(_&&_.once)return OT(l,h,p,_,A);if(Array.isArray(h)){for(var M=0;M<h.length;M++)NT(l,h[M],p,_,A);return null}return p=d_(p),l&&l[hl]?l.K(h,p,u(_)?!!_.capture:!!_,A):kT(l,h,p,!1,_,A)}function kT(l,h,p,_,A,M){if(!h)throw Error("Invalid event type");var $=u(A)?!!A.capture:!!A,We=l_(l);if(We||(l[s_]=We=new Zd(l)),p=We.add(h,p,_,$,M),p.proxy)return p;if(_=uV(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)sV||(A=$),A===void 0&&(A=!1),l.addEventListener(h.toString(),_,A);else if(l.attachEvent)l.attachEvent(LT(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function uV(){function l(p){return h.call(l.src,l.listener,p)}let h=dV;return l}function OT(l,h,p,_,A){if(Array.isArray(h)){for(var M=0;M<h.length;M++)OT(l,h[M],p,_,A);return null}return p=d_(p),l&&l[hl]?l.L(h,p,u(_)?!!_.capture:!!_,A):kT(l,h,p,!0,_,A)}function FT(l,h,p,_,A){if(Array.isArray(h))for(var M=0;M<h.length;M++)FT(l,h[M],p,_,A);else _=u(_)?!!_.capture:!!_,p=d_(p),l&&l[hl]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],p=o_(M,p,_,A),-1<p&&(Yd(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=l_(l))&&(h=l.g[h.toString()],l=-1,h&&(l=o_(h,p,_,A)),(p=-1<l?h[l]:null)&&c_(p))}function c_(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[hl])i_(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(LT(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=l_(h))?(i_(p,l),p.h==0&&(p.src=null,h[s_]=null)):Yd(l)}}}function LT(l){return l in a_?a_[l]:a_[l]="on"+l}function dV(l,h){if(l.da)l=!0;else{h=new dl(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&c_(l),l=p.call(_,h)}return l}function l_(l){return l=l[s_],l instanceof Zd?l:null}var u_="__closure_events_fn_"+(1e9*Math.random()>>>0);function d_(l){return typeof l=="function"?l:(l[u_]||(l[u_]=function(h){return l.handleEvent(h)}),l[u_])}function Wt(){Ki.call(this),this.i=new Zd(this),this.M=this,this.F=null}w(Wt,Ki),Wt.prototype[hl]=!0,Wt.prototype.removeEventListener=function(l,h,p,_){FT(this,l,h,p,_)};function ln(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new qt(h,l);else if(h instanceof qt)h.target=h.target||l;else{var A=h;h=new qt(_,l),T(h,A)}if(A=!0,p)for(var M=p.length-1;0<=M;M--){var $=h.g=p[M];A=Jd($,_,!0,h)&&A}if($=h.g=l,A=Jd($,_,!0,h)&&A,A=Jd($,_,!1,h)&&A,p)for(M=0;M<p.length;M++)$=h.g=p[M],A=Jd($,_,!1,h)&&A}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)Yd(p[_]);delete l.g[h],l.h--}}this.F=null},Wt.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},Wt.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Jd(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,M=0;M<h.length;++M){var $=h[M];if($&&!$.da&&$.capture==p){var We=$.listener,Ut=$.ha||$.src;$.fa&&i_(l.i,$),A=We.call(Ut,_)!==!1&&A}}return A&&!_.defaultPrevented}function VT(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function UT(l){l.g=VT(()=>{l.g=null,l.i&&(l.i=!1,UT(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class hV extends Ki{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:UT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fl(l){Ki.call(this),this.h=l,this.g={}}w(fl,Ki);var jT=[];function BT(l){$e(l.g,function(h,p){this.g.hasOwnProperty(p)&&c_(h)},l),l.g={}}fl.prototype.N=function(){fl.aa.N.call(this),BT(this)},fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var h_=a.JSON.stringify,fV=a.JSON.parse,pV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function f_(){}f_.prototype.h=null;function $T(l){return l.h||(l.h=l.i())}function HT(){}var pl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function p_(){qt.call(this,"d")}w(p_,qt);function g_(){qt.call(this,"c")}w(g_,qt);var jo={},zT=null;function Xd(){return zT=zT||new Wt}jo.La="serverreachability";function qT(l){qt.call(this,jo.La,l)}w(qT,qt);function gl(l){let h=Xd();ln(h,new qT(h))}jo.STAT_EVENT="statevent";function WT(l,h){qt.call(this,jo.STAT_EVENT,l),this.stat=h}w(WT,qt);function un(l){let h=Xd();ln(h,new WT(h,l))}jo.Ma="timingevent";function GT(l,h){qt.call(this,jo.Ma,l),this.size=h}w(GT,qt);function ml(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function _l(){this.g=!0}_l.prototype.xa=function(){this.g=!1};function gV(l,h,p,_,A,M){l.info(function(){if(l.g)if(M)for(var $="",We=M.split("&"),Ut=0;Ut<We.length;Ut++){var Ue=We[Ut].split("=");if(1<Ue.length){var Gt=Ue[0];Ue=Ue[1];var Kt=Gt.split("_");$=2<=Kt.length&&Kt[1]=="type"?$+(Gt+"="+Ue+"&"):$+(Gt+"=redacted&")}}else $=null;else $=M;return"XMLHTTP REQ ("+_+") [attempt "+A+"]: "+h+`
`+p+`
`+$})}function mV(l,h,p,_,A,M,$){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+A+"]: "+h+`
`+p+`
`+M+" "+$})}function ea(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+vV(l,p)+(_?" "+_:"")})}function _V(l,h){l.info(function(){return"TIMEOUT: "+h})}_l.prototype.info=function(){};function vV(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var A=_[1];if(Array.isArray(A)&&!(1>A.length)){var M=A[0];if(M!="noop"&&M!="stop"&&M!="close")for(var $=1;$<A.length;$++)A[$]=""}}}}return h_(p)}catch{return h}}var eh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},KT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},m_;function th(){}w(th,f_),th.prototype.g=function(){return new XMLHttpRequest},th.prototype.i=function(){return{}},m_=new th;function Qi(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new fl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new QT}function QT(){this.i=null,this.g="",this.h=!1}var YT={},__={};function v_(l,h,p){l.L=1,l.v=oh(wi(h)),l.m=p,l.P=!0,ZT(l,null)}function ZT(l,h){l.F=Date.now(),nh(l),l.A=wi(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),dD(p.i,"t",_),l.C=0,p=l.j.J,l.h=new QT,l.g=RD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new hV(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(jT[0]=A.toString()),A=jT);for(var M=0;M<A.length;M++){var $=NT(p,A[M],_||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),gl(),gV(l.i,l.u,l.A,l.l,l.R,l.m)}Qi.prototype.ca=function(l){l=l.target;let h=this.M;h&&Ii(l)==3?h.j():this.Y(l)},Qi.prototype.Y=function(l){try{if(l==this.g)e:{let Kt=Ii(this.g);var h=this.g.Ba();let ra=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||vD(this.g)))){this.J||Kt!=4||h==7||(h==8||0>=ra?gl(3):gl(2)),y_(this);var p=this.g.Z();this.X=p;t:if(JT(this)){var _=vD(this.g);l="";var A=_.length,M=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bo(this),vl(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(M&&h==A-1)});_.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,mV(this.i,this.u,this.A,this.l,this.R,Kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Ut=this.g;if((We=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(We)){var Ue=We;break t}}Ue=null}if(p=Ue)ea(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,E_(this,p);else{this.o=!1,this.s=3,un(12),Bo(this),vl(this);break e}}if(this.P){p=!0;let ar;for(;!this.J&&this.C<$.length;)if(ar=yV(this,$),ar==__){Kt==4&&(this.s=4,un(14),p=!1),ea(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==YT){this.s=4,un(15),ea(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else ea(this.i,this.l,ar,null),E_(this,ar);if(JT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||$.length!=0||this.h.h||(this.s=1,un(16),p=!1),this.o=this.o&&p,!p)ea(this.i,this.l,$,"[Invalid Chunked Response]"),Bo(this),vl(this);else if(0<$.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),D_(Gt),Gt.M=!0,un(11))}}else ea(this.i,this.l,$,null),E_(this,$);Kt==4&&Bo(this),this.o&&!this.J&&(Kt==4?TD(this.j,this):(this.o=!1,nh(this)))}else FV(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),Bo(this),vl(this)}}}catch{}finally{}};function JT(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function yV(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?__:(p=Number(h.substring(p,_)),isNaN(p)?YT:(_+=1,_+p>h.length?__:(h=h.slice(_,_+p),l.C=_+p,h)))}Qi.prototype.cancel=function(){this.J=!0,Bo(this)};function nh(l){l.S=Date.now()+l.I,XT(l,l.I)}function XT(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ml(g(l.ba,l),h)}function y_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Qi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(_V(this.i,this.A),this.L!=2&&(gl(),un(17)),Bo(this),this.s=2,vl(this)):XT(this,this.S-l)};function vl(l){l.j.G==0||l.J||TD(l.j,l)}function Bo(l){y_(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,BT(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function E_(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||w_(p.h,l))){if(!l.K&&w_(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var A=_;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)uh(p),ch(p);else break e;T_(p),un(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=ml(g(p.Za,p),6e3));if(1>=nD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ho(p,11)}else if((l.K||p.g==l)&&uh(p),!ne(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Ue=A[h];if(p.T=Ue[0],Ue=Ue[1],p.G==2)if(Ue[0]=="c"){p.K=Ue[1],p.ia=Ue[2];let Gt=Ue[3];Gt!=null&&(p.la=Gt,p.j.info("VER="+p.la));let Kt=Ue[4];Kt!=null&&(p.Aa=Kt,p.j.info("SVER="+p.Aa));let ra=Ue[5];ra!=null&&typeof ra=="number"&&0<ra&&(_=1.5*ra,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let ar=l.g;if(ar){let hh=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hh){var M=_.h;M.g||hh.indexOf("spdy")==-1&&hh.indexOf("quic")==-1&&hh.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(I_(M,M.h),M.h=null))}if(_.D){let S_=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;S_&&(_.ya=S_,Xe(_.I,_.D,S_))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var $=l;if(_.qa=AD(_,_.J?_.ia:null,_.W),$.K){rD(_.h,$);var We=$,Ut=_.L;Ut&&(We.I=Ut),We.B&&(y_(We),nh(We)),_.g=$}else CD(_);0<p.i.length&&lh(p)}else Ue[0]!="stop"&&Ue[0]!="close"||Ho(p,7);else p.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ho(p,7):b_(p):Ue[0]!="noop"&&p.l&&p.l.ta(Ue),p.v=0)}}gl(4)}catch{}}var EV=class{constructor(l,h){this.g=l,this.map=h}};function eD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function nD(l){return l.h?1:l.g?l.g.size:0}function w_(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function I_(l,h){l.g?l.g.add(h):l.h=h}function rD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}eD.prototype.cancel=function(){if(this.i=iD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function iD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return N(l.i)}function wV(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function IV(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let _ in l)h[p++]=_;return h}}}function oD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=IV(l),_=wV(l),A=_.length,M=0;M<A;M++)h.call(void 0,_[M],p&&p[M],l)}var sD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CV(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),A=null;if(0<=_){var M=l[p].substring(0,_);A=l[p].substring(_+1)}else M=l[p];h(M,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function $o(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof $o){this.h=l.h,rh(this,l.j),this.o=l.o,this.g=l.g,ih(this,l.s),this.l=l.l;var h=l.i,p=new wl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),aD(this,p),this.m=l.m}else l&&(h=String(l).match(sD))?(this.h=!1,rh(this,h[1]||"",!0),this.o=yl(h[2]||""),this.g=yl(h[3]||"",!0),ih(this,h[4]),this.l=yl(h[5]||"",!0),aD(this,h[6]||"",!0),this.m=yl(h[7]||"")):(this.h=!1,this.i=new wl(null,this.h))}$o.prototype.toString=function(){var l=[],h=this.j;h&&l.push(El(h,cD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(El(h,cD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(El(p,p.charAt(0)=="/"?DV:TV,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",El(p,AV)),l.join("")};function wi(l){return new $o(l)}function rh(l,h,p){l.j=p?yl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ih(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function aD(l,h,p){h instanceof wl?(l.i=h,RV(l.i,l.h)):(p||(h=El(h,SV)),l.i=new wl(h,l.h))}function Xe(l,h,p){l.i.set(h,p)}function oh(l){return Xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function yl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function El(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,bV),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function bV(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var cD=/[#\/\?@]/g,TV=/[#\?:]/g,DV=/[#\?]/g,SV=/[#\?@]/g,AV=/#/g;function wl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Yi(l){l.g||(l.g=new Map,l.h=0,l.i&&CV(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=wl.prototype,n.add=function(l,h){Yi(this),this.i=null,l=ta(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function lD(l,h){Yi(l),h=ta(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function uD(l,h){return Yi(l),h=ta(l,h),l.g.has(h)}n.forEach=function(l,h){Yi(this),this.g.forEach(function(p,_){p.forEach(function(A){l.call(h,A,_,this)},this)},this)},n.na=function(){Yi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let A=l[_];for(let M=0;M<A.length;M++)p.push(h[_])}return p},n.V=function(l){Yi(this);let h=[];if(typeof l=="string")uD(this,l)&&(h=h.concat(this.g.get(ta(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Yi(this),this.i=null,l=ta(this,l),uD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function dD(l,h,p){lD(l,h),0<p.length&&(l.i=null,l.g.set(ta(l,h),N(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let M=encodeURIComponent(String(_)),$=this.V(_);for(_=0;_<$.length;_++){var A=M;$[_]!==""&&(A+="="+encodeURIComponent(String($[_]))),l.push(A)}}return this.i=l.join("&")};function ta(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function RV(l,h){h&&!l.j&&(Yi(l),l.i=null,l.g.forEach(function(p,_){var A=_.toLowerCase();_!=A&&(lD(this,_),dD(this,A,p))},l)),l.j=h}function xV(l,h){let p=new _l;if(a.Image){let _=new Image;_.onload=m(Zi,p,"TestLoadImage: loaded",!0,h,_),_.onerror=m(Zi,p,"TestLoadImage: error",!1,h,_),_.onabort=m(Zi,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=m(Zi,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function PV(l,h){let p=new _l,_=new AbortController,A=setTimeout(()=>{_.abort(),Zi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(M=>{clearTimeout(A),M.ok?Zi(p,"TestPingServer: ok",!0,h):Zi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Zi(p,"TestPingServer: error",!1,h)})}function Zi(l,h,p,_,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),_(p)}catch{}}function MV(){this.g=new pV}function NV(l,h,p){let _=p||"";try{oD(l,function(A,M){let $=A;u(A)&&($=h_(A)),h.push(_+M+"="+encodeURIComponent($))})}catch(A){throw h.push(_+"type="+encodeURIComponent("_badmap")),A}}function Il(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Il,f_),Il.prototype.g=function(){return new sh(this.l,this.j)},Il.prototype.i=function(l){return function(){return l}}({});function sh(l,h){Wt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(sh,Wt),n=sh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,bl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function hD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Cl(this):bl(this),this.readyState==3&&hD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Cl(this))},n.Qa=function(l){this.g&&(this.response=l,Cl(this))},n.ga=function(){this.g&&Cl(this)};function Cl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,bl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function bl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(sh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fD(l){let h="";return $e(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function C_(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=fD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Xe(l,h,p))}function dt(l){Wt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(dt,Wt);var kV=/^https?$/i,OV=["POST","PUT"];n=dt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():m_.g(),this.v=this.o?$T(this.o):$T(m_),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){pD(this,M);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var A in _)p.set(A,_[A]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let M of _.keys())p.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(OV,h,void 0))||_||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,$]of p)this.g.setRequestHeader(M,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_D(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){pD(this,M)}};function pD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,gD(l),ah(l)}function gD(l){l.A||(l.A=!0,ln(l,"complete"),ln(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ln(this,"complete"),ln(this,"abort"),ah(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ah(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mD(this):this.bb())},n.bb=function(){mD(this)};function mD(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Ii(l)!=4||l.Z()!=2)){if(l.u&&Ii(l)==4)VT(l.Ea,0,l);else if(ln(l,"readystatechange"),Ii(l)==4){l.h=!1;try{let $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=$===0){var A=String(l.D).match(sD)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),_=!kV.test(A?A.toLowerCase():"")}p=_}if(p)ln(l,"complete"),ln(l,"success");else{l.m=6;try{var M=2<Ii(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",gD(l)}}finally{ah(l)}}}}function ah(l,h){if(l.g){_D(l);let p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ln(l,"ready");try{p.onreadystatechange=_}catch{}}}function _D(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Ii(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),fV(h)}};function vD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function FV(l){let h={};l=(l.g&&2<=Ii(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(ne(l[_]))continue;var p=S(l[_]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[A]||[];h[A]=M,M.push(p)}D(h,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function yD(l){this.Aa=0,this.i=[],this.j=new _l,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tl("baseRetryDelayMs",5e3,l),this.cb=Tl("retryDelaySeedMs",1e4,l),this.Wa=Tl("forwardChannelMaxRetries",2,l),this.wa=Tl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new eD(l&&l.concurrentRequestLimit),this.Da=new MV,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=yD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,_){un(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=AD(this,null,this.W),lh(this)};function b_(l){if(ED(l),l.G==3){var h=l.U++,p=wi(l.I);if(Xe(p,"SID",l.K),Xe(p,"RID",h),Xe(p,"TYPE","terminate"),Dl(l,p),h=new Qi(l,l.j,h),h.L=2,h.v=oh(wi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=RD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),nh(h)}SD(l)}function ch(l){l.g&&(D_(l),l.g.cancel(),l.g=null)}function ED(l){ch(l),l.u&&(a.clearTimeout(l.u),l.u=null),uh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function lh(l){if(!tD(l.h)&&!l.s){l.s=!0;var h=l.Ga;ll||MT(),ul||(ll(),ul=!0),r_.add(h,l),l.B=0}}function LV(l,h){return nD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ml(g(l.Ga,l,h),DD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new Qi(this,this.j,l),M=this.o;if(this.S&&(M?(M=y(M),T(M,this.S)):M=this.S),this.m!==null||this.O||(A.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ID(this,A,h),p=wi(this.I),Xe(p,"RID",l),Xe(p,"CVER",22),this.D&&Xe(p,"X-HTTP-Session-Id",this.D),Dl(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(fD(M)))+"&"+h:this.m&&C_(p,this.m,M)),I_(this.h,A),this.Ua&&Xe(p,"TYPE","init"),this.P?(Xe(p,"$req",h),Xe(p,"SID","null"),A.T=!0,v_(A,p,null)):v_(A,p,h),this.G=2}}else this.G==3&&(l?wD(this,l):this.i.length==0||tD(this.h)||wD(this))};function wD(l,h){var p;h?p=h.l:p=l.U++;let _=wi(l.I);Xe(_,"SID",l.K),Xe(_,"RID",p),Xe(_,"AID",l.T),Dl(l,_),l.m&&l.o&&C_(_,l.m,l.o),p=new Qi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=ID(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),I_(l.h,p),v_(p,_,h)}function Dl(l,h){l.H&&$e(l.H,function(p,_){Xe(h,_,p)}),l.l&&oD({},function(p,_){Xe(h,_,p)})}function ID(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var A=l.i;let M=-1;for(;;){let $=["count="+p];M==-1?0<p?(M=A[0].g,$.push("ofs="+M)):M=0:$.push("ofs="+M);let We=!0;for(let Ut=0;Ut<p;Ut++){let Ue=A[Ut].g,Gt=A[Ut].map;if(Ue-=M,0>Ue)M=Math.max(0,A[Ut].g-100),We=!1;else try{NV(Gt,$,"req"+Ue+"_")}catch{_&&_(Gt)}}if(We){_=$.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function CD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ll||MT(),ul||(ll(),ul=!0),r_.add(h,l),l.v=0}}function T_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ml(g(l.Fa,l),DD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,bD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ml(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),ch(this),bD(this))};function D_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function bD(l){l.g=new Qi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=wi(l.qa);Xe(h,"RID","rpc"),Xe(h,"SID",l.K),Xe(h,"AID",l.T),Xe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Xe(h,"TO",l.ja),Xe(h,"TYPE","xmlhttp"),Dl(l,h),l.m&&l.o&&C_(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=oh(wi(h)),p.m=null,p.P=!0,ZT(p,l)}n.Za=function(){this.C!=null&&(this.C=null,ch(this),T_(this),un(19))};function uh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function TD(l,h){var p=null;if(l.g==h){uh(l),D_(l),l.g=null;var _=2}else if(w_(l.h,h))p=h.D,rD(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=l.B;_=Xd(),ln(_,new GT(_,p)),lh(l)}else CD(l);else if(A=h.s,A==3||A==0&&0<h.X||!(_==1&&LV(l,h)||_==2&&T_(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),A){case 1:Ho(l,5);break;case 4:Ho(l,10);break;case 3:Ho(l,6);break;default:Ho(l,2)}}}function DD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Ho(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;let A=!_;_=new $o(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rh(_,"https"),oh(_),A?xV(_.toString(),p):PV(_.toString(),p)}else un(2);l.G=0,l.l&&l.l.sa(h),SD(l),ED(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function SD(l){if(l.G=0,l.ka=[],l.l){let h=iD(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function AD(l,h,p){var _=p instanceof $o?wi(p):new $o(p);if(_.g!="")h&&(_.g=h+"."+_.g),ih(_,_.s);else{var A=a.location;_=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var M=new $o(null);_&&rh(M,_),h&&(M.g=h),A&&ih(M,A),p&&(M.l=p),_=M}return p=l.D,h=l.ya,p&&h&&Xe(_,p,h),Xe(_,"VER",l.la),Dl(l,_),_}function RD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new dt(new Il({eb:p})):new dt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xD(){}n=xD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dh(){}dh.prototype.g=function(l,h){return new Cn(l,h)};function Cn(l,h){Wt.call(this),this.g=new yD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!ne(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ne(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new na(this)}w(Cn,Wt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){b_(this.g)},Cn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=h_(l),l=p);h.i.push(new EV(h.Ya++,l)),h.G==3&&lh(h)},Cn.prototype.N=function(){this.g.l=null,delete this.j,b_(this.g),delete this.g,Cn.aa.N.call(this)};function PD(l){p_.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(PD,p_);function MD(){g_.call(this),this.status=1}w(MD,g_);function na(l){this.g=l}w(na,xD),na.prototype.ua=function(){ln(this.g,"a")},na.prototype.ta=function(l){ln(this.g,new PD(l))},na.prototype.sa=function(l){ln(this.g,new MD)},na.prototype.ra=function(){ln(this.g,"b")},dh.prototype.createWebChannel=dh.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,J0=ji.createWebChannelTransport=function(){return new dh},Z0=ji.getStatEventTarget=function(){return Xd()},Y0=ji.Event=jo,Rg=ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eh.NO_ERROR=0,eh.TIMEOUT=8,eh.HTTP_ERROR=6,od=ji.ErrorCode=eh,KT.COMPLETE="complete",Q0=ji.EventType=KT,HT.EventType=pl,pl.OPEN="a",pl.CLOSE="b",pl.ERROR="c",pl.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,_c=ji.WebChannel=HT,x9=ji.FetchXmlHttpFactory=Il,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,K0=ji.XhrIo=dt}).apply(typeof Ag<"u"?Ag:typeof self<"u"?self:typeof window<"u"?window:{});var _1="@firebase/firestore",v1="4.7.16";var Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");var Uc="11.8.1";var Fs=new Yn("@firebase/firestore");function vc(){return Fs.logLevel}function Z(n,...e){if(Fs.logLevel<=Ce.DEBUG){let t=e.map(jC);Fs.debug(`Firestore (${Uc}): ${n}`,...t)}}function Bi(n,...e){if(Fs.logLevel<=Ce.ERROR){let t=e.map(jC);Fs.error(`Firestore (${Uc}): ${n}`,...t)}}function Tc(n,...e){if(Fs.logLevel<=Ce.WARN){let t=e.map(jC);Fs.warn(`Firestore (${Uc}): ${n}`,...t)}}function jC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uk(n,r,t)}function uk(n,e,t){let r=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bi(r),new Error(r)}function Be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||uk(e,i,r)}function fe(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J=class extends Mn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Sr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}},iI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},oI=class{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new Fg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}},sI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},aI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ht(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);let r=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function dk(){return new TextEncoder}var Vg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=P9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function be(n,e){return n<e?-1:n>e?1:0}function lI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return be(r,i);{let o=dk(),s=M9(o.encode(y1(n,t)),o.encode(y1(e,t)));return s!==0?s:be(r,i)}}t+=r>65535?2:1}return be(n.length,e.length)}function y1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function M9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return be(n[t],e[t]);return be(n.length,e.length)}function Dc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var E1=-62135596800,w1=1e6,zt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*w1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<E1)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w1}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-E1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ge=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new zt(0,0))}static max(){return new n(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var I1="__name__",Ug=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):lI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}},lt=class n extends Ug{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new J(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},N9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fn=class n extends Ug{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return N9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I1}static keyField(){return new n([I1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new J(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(lt.fromString(e))}static fromName(e){return new n(lt.fromString(e).popFirst(5))}static empty(){return new n(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new lt(e.slice()))}};var dd=-1,uI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};uI.UNKNOWN_ID=-1;function k9(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new Ls(i,le.empty(),e)}function O9(n){return new Ls(n.readTime,n.key,dd)}var Ls=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ge.min(),le.empty(),dd)}static max(){return new n(ge.max(),le.empty(),dd)}};function F9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}var L9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function jc(n){return v(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==L9)throw n;Z("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function V9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bc(n){return n.name==="IndexedDbTransactionError"}var BC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),$C=-1;function vm(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function U9(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var hk="";function j9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C1(e)),e=B9(n.get(t),e);return C1(e)}function B9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case hk:t+="";break;default:t+=o}}return t}function C1(n){return n+hk+""}var $9="remoteDocuments",fk="owner";var pk="mutationQueues";var gk="mutations";var mk="documentMutations",H9="remoteDocumentsV14";var _k="remoteDocumentGlobal";var vk="targets";var yk="targetDocuments";var Ek="targetGlobal",wk="collectionParents";var Ik="clientMetadata";var Ck="bundles";var bk="namedQueries";var z9="indexConfiguration";var q9="indexState";var W9="indexEntries";var Tk="documentOverlays";var G9="globals";var K9=[pk,gk,mk,$9,vk,fk,Ek,yk,Ik,_k,wk,Ck,bk],yle=[...K9,Tk],Q9=[pk,gk,mk,H9,vk,fk,Ek,yk,Ik,_k,wk,Ck,bk,Tk],Y9=Q9,Z9=[...Y9,z9,q9,W9];var Ele=[...Z9,G9];function b1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var pt=class n{constructor(e,t){this.comparator=e,this.root=t||di.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}},Ic=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},di=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}};di.EMPTY=null,di.RED=!0,di.BLACK=!1;di.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new di(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Lt=class n{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jg(this.data.getIterator())}getIteratorFrom(e){return new jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xn=class n{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Lt(Fn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Bg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rn.EMPTY_BYTE_STRING=new rn("");var J9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(Be(!!n,39018),typeof n=="string"){let e=0,t=J9.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(n.seconds),nanos:at(n.nanos)}}function at(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hi(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}var Sk="server_timestamp",Ak="__type__",Rk="__previous_value__",xk="__local_write_time__";function HC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ak])===null||t===void 0?void 0:t.stringValue)===Sk}function ym(n){let e=n.mapValue.fields[Rk];return HC(e)?ym(e):e}function fd(n){let e=$i(n.mapValue.fields[xk].timestampValue);return new zt(e.seconds,e.nanos)}var hI=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},$g="(default)",Hg=class n{constructor(e,t){this.projectId=e,this.database=t||$g}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===$g}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zC="__type__",Pk="__max__",xg={mapValue:{fields:{__type__:{stringValue:Pk}}}},qC="__vector__",Sc="value";function No(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HC(n)?4:Nk(n)?9007199254740991:Mk(n)?10:11:ue(28295,{value:n})}function gi(n,e){if(n===e)return!0;let t=No(n);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fd(n).isEqual(fd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$i(i.timestampValue),a=$i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Hi(i.bytesValue).isEqual(Hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return at(i.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return at(i.integerValue)===at(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=at(i.doubleValue),a=at(o.doubleValue);return s===a?hd(s)===hd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Dc(n.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(b1(s)!==b1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!gi(s[c],a[c])))return!1;return!0}(n,e);default:return ue(52216,{left:n})}}function pd(n,e){return(n.values||[]).find(t=>gi(t,e))!==void 0}function Ac(n,e){if(n===e)return 0;let t=No(n),r=No(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=at(o.integerValue||o.doubleValue),c=at(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return T1(n.timestampValue,e.timestampValue);case 4:return T1(fd(n),fd(e));case 5:return lI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Hi(o),c=Hi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=be(a[u],c[u]);if(d!==0)return d}return be(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=be(at(o.latitude),at(s.latitude));return a!==0?a:be(at(o.longitude),at(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return D1(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},g=s.fields||{},m=(a=f[Sc])===null||a===void 0?void 0:a.arrayValue,w=(c=g[Sc])===null||c===void 0?void 0:c.arrayValue,N=be(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:D1(m,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===xg.mapValue&&s===xg.mapValue)return 0;if(o===xg.mapValue)return 1;if(s===xg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=lI(c[f],d[f]);if(g!==0)return g;let m=Ac(a[c[f]],u[d[f]]);if(m!==0)return m}return be(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ue(23264,{Pe:t})}}function T1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);let t=$i(n),r=$i(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function D1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ac(t[i],r[i]);if(o)return o}return be(t.length,r.length)}function Rc(n){return fI(n)}function fI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=$i(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=fI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${fI(t.fields[s])}`;return i+"}"}(n.mapValue):ue(61005,{value:n})}function Ng(n){switch(No(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ym(n);return e?16+Ng(e):16;case 5:return 2*n.stringValue.length;case 6:return Hi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ng(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Fo(r.fields,(o,s)=>{i+=o.length+Ng(s)}),i}(n.mapValue);default:throw ue(13486,{value:n})}}function S1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pI(n){return!!n&&"integerValue"in n}function WC(n){return!!n&&"arrayValue"in n}function A1(n){return!!n&&"nullValue"in n}function R1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kg(n){return!!n&&"mapValue"in n}function Mk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||t===void 0?void 0:t.stringValue)===qC}function ad(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ad(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ad(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Nk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Pk}var Ile={mapValue:{fields:{[zC]:{stringValue:qC},[Sc]:{arrayValue:{}}}}};var On=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ad(t)}setAll(e){let t=Fn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ad(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());kg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];kg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ad(this.value))}};function kk(n){let e=[];return Fo(n.fields,(t,r)=>{let i=new Fn([t]);if(kg(r)){let o=kk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xn(e)}var Ar=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ge.min(),ge.min(),ge.min(),On.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ge.min(),ge.min(),On.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ge.min(),ge.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xc=class{constructor(e,t){this.position=e,this.inclusive=t}};function x1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(s.referenceValue),t.key):r=Ac(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function P1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gi(n.position[t],e.position[t]))return!1;return!0}var Pc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function X9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zg=class{},wt=class n extends zg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mI(e,t,r):t==="array-contains"?new yI(e,r):t==="in"?new EI(e,r):t==="not-in"?new wI(e,r):t==="array-contains-any"?new II(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _I(e,r):new vI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ac(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rr=class n extends zg{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return Ok(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function Ok(n){return n.op==="and"}function Fk(n){return eG(n)&&Ok(n)}function eG(n){for(let e of n.filters)if(e instanceof Rr)return!1;return!0}function gI(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Rc(n.value);if(Fk(n))return n.filters.map(e=>gI(e)).join(",");{let e=n.filters.map(t=>gI(t)).join(",");return`${n.op}(${e})`}}function Lk(n,e){return n instanceof wt?function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&gi(r.value,i.value)}(n,e):n instanceof Rr?function(r,i){return i instanceof Rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Lk(s,i.filters[a]),!0):!1}(n,e):void ue(19439)}function Vk(n){return n instanceof wt?function(t){return`${t.field.canonicalString()} ${t.op} ${Rc(t.value)}`}(n):n instanceof Rr?function(t){return t.op.toString()+" {"+t.getFilters().map(Vk).join(" ,")+"}"}(n):"Filter"}var mI=class extends wt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},_I=class extends wt{constructor(e,t){super(e,"in",t),this.keys=Uk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vI=class extends wt{constructor(e,t){super(e,"not-in",t),this.keys=Uk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Uk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>le.fromName(r.referenceValue))}var yI=class extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return WC(t)&&pd(t.arrayValue,this.value)}},EI=class extends wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pd(this.value.arrayValue,t)}},wI=class extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pd(this.value.arrayValue,t)}},II=class extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!WC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pd(this.value.arrayValue,r))}};var CI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function M1(n,e=null,t=[],r=[],i=null,o=null,s=null){return new CI(n,e,t,r,i,o,s)}function GC(n){let e=fe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rc(r)).join(",")),e.Ie=t}return e.Ie}function KC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!X9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Lk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P1(n.startAt,e.startAt)&&P1(n.endAt,e.endAt)}function bI(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Vs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function tG(n,e,t,r,i,o,s,a){return new Vs(n,e,t,r,i,o,s,a)}function Em(n){return new Vs(n)}function N1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jk(n){return n.collectionGroup!==null}function cd(n){let e=fe(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Lt(Fn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Pc(o,r))}),t.has(Fn.keyField().canonicalString())||e.Ee.push(new Pc(Fn.keyField(),r))}return e.Ee}function hi(n){let e=fe(n);return e.de||(e.de=nG(e,cd(n))),e.de}function nG(n,e){if(n.limitType==="F")return M1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Pc(i.field,o)});let t=n.endAt?new xc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xc(n.startAt.position,n.startAt.inclusive):null;return M1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function TI(n,e){let t=n.filters.concat([e]);return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function DI(n,e,t){return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wm(n,e){return KC(hi(n),hi(e))&&n.limitType===e.limitType}function Bk(n){return`${GC(hi(n))}|lt:${n.limitType}`}function yc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Vk(i)).join(", ")}]`),vm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Rc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Rc(i)).join(",")),`Target(${r})`}(hi(n))}; limitType=${n.limitType})`}function Im(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=x1(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,cd(r),i)||r.endAt&&!function(s,a,c){let u=x1(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,cd(r),i))}(n,e)}function rG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $k(n){return(e,t)=>{let r=!1;for(let i of cd(n)){let o=iG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iG(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ac(c,u):ue(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}var zi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Dk(this.inner)}size(){return this.innerSize}};var oG=new pt(le.comparator);function qi(){return oG}var Hk=new pt(le.comparator);function sd(...n){let e=Hk;for(let t of n)e=e.insert(t.key,t);return e}function zk(n){let e=Hk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ns(){return ld()}function qk(){return ld()}function ld(){return new zi(n=>n.toString(),(n,e)=>n.isEqual(e))}var sG=new pt(le.comparator),aG=new Lt(le.comparator);function xe(...n){let e=aG;for(let t of n)e=e.add(t);return e}var cG=new Lt(be);function lG(){return cG}function QC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function Wk(n){return{integerValue:""+n}}function uG(n,e){return U9(e)?Wk(e):QC(n,e)}var Mc=class{constructor(){this._=void 0}};function dG(n,e,t){return n instanceof Nc?function(i,o){let s={fields:{[Ak]:{stringValue:Sk},[xk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&HC(o)&&(o=ym(o)),o&&(s.fields[Rk]=o),{mapValue:s}}(t,e):n instanceof Us?Kk(n,e):n instanceof js?Qk(n,e):function(i,o){let s=Gk(i,o),a=k1(s)+k1(i.Re);return pI(s)&&pI(i.Re)?Wk(a):QC(i.serializer,a)}(n,e)}function hG(n,e,t){return n instanceof Us?Kk(n,e):n instanceof js?Qk(n,e):t}function Gk(n,e){return n instanceof kc?function(r){return pI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Nc=class extends Mc{},Us=class extends Mc{constructor(e){super(),this.elements=e}};function Kk(n,e){let t=Yk(e);for(let r of n.elements)t.some(i=>gi(i,r))||t.push(r);return{arrayValue:{values:t}}}var js=class extends Mc{constructor(e){super(),this.elements=e}};function Qk(n,e){let t=Yk(e);for(let r of n.elements)t=t.filter(i=>!gi(i,r));return{arrayValue:{values:t}}}var kc=class extends Mc{constructor(e,t){super(),this.serializer=e,this.Re=t}};function k1(n){return at(n.integerValue||n.doubleValue)}function Yk(n){return WC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Us&&i instanceof Us||r instanceof js&&i instanceof js?Dc(r.elements,i.elements,gi):r instanceof kc&&i instanceof kc?gi(r.Re,i.Re):r instanceof Nc&&i instanceof Nc}(n.transform,e.transform)}var SI=class{constructor(e,t){this.version=e,this.transformResults=t}},fi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Og(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Oc=class{};function Zk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gd(n.key,fi.none()):new Bs(n.key,n.data,fi.none());{let t=n.data,r=On.empty(),i=new Lt(Fn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mi(n.key,r,new Xn(i.toArray()),fi.none())}}function pG(n,e,t){n instanceof Bs?function(i,o,s){let a=i.value.clone(),c=F1(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mi?function(i,o,s){if(!Og(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=F1(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Jk(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ud(n,e,t,r){return n instanceof Bs?function(o,s,a,c){if(!Og(o.precondition,s))return a;let u=o.value.clone(),d=L1(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof mi?function(o,s,a,c){if(!Og(o.precondition,s))return a;let u=L1(o.fieldTransforms,c,s),d=s.data;return d.setAll(Jk(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Og(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function gG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Gk(r.transform,i||null);o!=null&&(t===null&&(t=On.empty()),t.set(r.field,o))}return t||null}function O1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dc(r,i,(o,s)=>fG(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bs=class extends Oc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mi=class extends Oc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Jk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function F1(n,e,t){let r=new Map;Be(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,hG(s,a,t[i]))}return r}function L1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,dG(o,s,e))}return r}var gd=class extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},AI=class extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var RI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pG(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=qk();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Zk(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(t,r)=>O1(t,r))&&Dc(this.baseMutations,e.baseMutations,(t,r)=>O1(t,r))}},xI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Be(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return sG}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var PI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var MI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var yt,ke;function mG(n){switch(n){case F.OK:return ue(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function Xk(n){if(n===void 0)return Bi("GRPC error has no .code"),F.UNKNOWN;switch(n){case yt.OK:return F.OK;case yt.CANCELLED:return F.CANCELLED;case yt.UNKNOWN:return F.UNKNOWN;case yt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case yt.INTERNAL:return F.INTERNAL;case yt.UNAVAILABLE:return F.UNAVAILABLE;case yt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case yt.NOT_FOUND:return F.NOT_FOUND;case yt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case yt.ABORTED:return F.ABORTED;case yt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case yt.DATA_LOSS:return F.DATA_LOSS;default:return ue(39323,{code:n})}}(ke=yt||(yt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var V1=null;var _G=new Ui([4294967295,4294967295],0);function U1(n){let e=dk().encode(n),t=new G0;return t.update(e),new Uint8Array(t.digest())}function j1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ui([t,r],0),new Ui([i,o],0)]}var NI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ks(`Invalid padding: ${t}`);if(r<0)throw new ks(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ks(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ks(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ui.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Ui.fromNumber(r)));return i.compare(_G)===1&&(i=new Ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=U1(e),[r,i]=j1(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.Se(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=U1(e),[r,i]=j1(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ks=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ge.min(),i,new pt(be),qi(),xe())}},md=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,xe(),xe(),xe())}};var Cc=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},Wg=class{constructor(e,t){this.targetId=e,this.Ce=t}},Gg=class{constructor(e,t,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kg=class{constructor(){this.Fe=0,this.Me=B1(),this.xe=rn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=xe(),t=xe(),r=xe();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:o})}}),new md(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=B1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Be(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},kI=class{constructor(e){this.ze=e,this.je=new Map,this.He=qi(),this.Je=Pg(),this.Ye=Pg(),this.Ze=new pt(be)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(bI(o))if(r===0){let s=new le(o.path);this.tt(t,s,Ar.newNoDocument(s,ge.min()))}else Be(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),c=a?this.lt(a,e,s):1;if(c!==0){this.st(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}V1?.ht(function(d,f,g,m,w){var N,k,B,ne,ce,Le;let Pt={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},$e=f.unchangedNames;return $e&&(Pt.bloomFilter={applied:w===0,hashCount:(N=$e?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(ne=(B=(k=$e?.bits)===null||k===void 0?void 0:k.bitmap)===null||B===void 0?void 0:B.length)!==null&&ne!==void 0?ne:0,padding:(Le=(ce=$e?.bits)===null||ce===void 0?void 0:ce.padding)!==null&&Le!==void 0?Le:0,mightContain:D=>{var y;return(y=m?.mightContain(D))!==null&&y!==void 0&&y}}),Pt}(s,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hi(r).toUint8Array()}catch(c){if(c instanceof Bg)return Tc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new NI(s,i,o)}catch(c){return Tc(c instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&bI(a.target)){let c=new le(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Ar.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=xe();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new qg(e,t,this.Ze,this.He,r);return this.He=qi(),this.Je=Pg(),this.Ye=Pg(),this.Ze=new pt(be),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Kg,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Lt(be),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Lt(be),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Kg),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Pg(){return new pt(le.comparator)}function B1(){return new pt(le.comparator)}var vG={asc:"ASCENDING",desc:"DESCENDING"},yG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EG={and:"AND",or:"OR"},OI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function FI(n,e){return n.useProto3Json||vm(e)?e:{value:e}}function Qg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wG(n,e){return Qg(n,e.toTimestamp())}function pi(n){return Be(!!n,49232),ge.fromTimestamp(function(t){let r=$i(t);return new zt(r.seconds,r.nanos)}(n))}function YC(n,e){return LI(n,e).canonicalString()}function LI(n,e){let t=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function tO(n){let e=lt.fromString(n);return Be(sO(e),10190,{key:e.toString()}),e}function VI(n,e){return YC(n.databaseId,e.path)}function X0(n,e){let t=tO(e);if(t.get(1)!==n.databaseId.projectId)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(rO(t))}function nO(n,e){return YC(n.databaseId,e)}function IG(n){let e=tO(n);return e.length===4?lt.emptyPath():rO(e)}function UI(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rO(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $1(n,e,t){return{name:VI(n,e),fields:t.value.mapValue.fields}}function CG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Be(d===void 0||typeof d=="string",58123),rn.fromBase64String(d||"")):(Be(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?F.UNKNOWN:Xk(u.code);return new J(d,u.message||"")}(s);t=new Gg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=X0(n,r.document.name),o=pi(r.document.updateTime),s=r.document.createTime?pi(r.document.createTime):ge.min(),a=new On({mapValue:{fields:r.document.fields}}),c=Ar.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Cc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=X0(n,r.document),o=r.readTime?pi(r.readTime):ge.min(),s=Ar.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Cc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=X0(n,r.document),o=r.removedTargetIds||[];t=new Cc([],o,i,null)}else{if(!("filter"in e))return ue(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new MI(i,o),a=r.targetId;t=new Wg(a,s)}}return t}function bG(n,e){let t;if(e instanceof Bs)t={update:$1(n,e.key,e.value)};else if(e instanceof gd)t={delete:VI(n,e.key)};else if(e instanceof mi)t={update:$1(n,e.key,e.data),updateMask:NG(e.fieldMask)};else{if(!(e instanceof AI))return ue(16599,{ft:e.type});t={verify:VI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Nc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Us)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kc)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw ue(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:wG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue(27497)}(n,e.precondition)),t}function TG(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?pi(i.updateTime):pi(o);return s.isEqual(ge.min())&&(s=pi(o)),new SI(s,i.transformResults||[])}(t,e))):[]}function DG(n,e){return{documents:[nO(n,e.path)]}}function SG(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nO(n,i);let o=function(u){if(u.length!==0)return oO(Rr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Ec(g.field),direction:xG(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=FI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function AG(n){let e=IG(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Be(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=iO(f);return g instanceof Rr&&Fk(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(w){return new Pc(wc(w.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,vm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new xc(m,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let g=!f.before,m=f.values||[];return new xc(m,g)}(t.endAt)),tG(e,i,s,o,a,"F",c,u)}function RG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wc(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wc(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=wc(t.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=wc(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(n):n.fieldFilter!==void 0?function(t){return wt.create(wc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Rr.create(t.compositeFilter.filters.map(r=>iO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(t.compositeFilter.op))}(n):ue(30097,{filter:n})}function xG(n){return vG[n]}function PG(n){return yG[n]}function MG(n){return EG[n]}function Ec(n){return{fieldPath:n.canonicalString()}}function wc(n){return Fn.fromServerFormat(n.fieldPath)}function oO(n){return n instanceof wt?function(t){if(t.op==="=="){if(R1(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NAN"}};if(A1(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R1(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NAN"}};if(A1(t.value))return{unaryFilter:{field:Ec(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(t.field),op:PG(t.op),value:t.value}}}(n):n instanceof Rr?function(t){let r=t.getFilters().map(i=>oO(i));return r.length===1?r[0]:{compositeFilter:{op:MG(t.op),filters:r}}}(n):ue(54877,{filter:n})}function NG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _d=class n{constructor(e,t,r,i,o=ge.min(),s=ge.min(),a=rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jI=class{constructor(e){this.wt=e}};function kG(n){let e=AG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?DI(e,e.limit,"L"):e}var Yg=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(at(e.integerValue));else if("doubleValue"in e){let r=at(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),hd(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=$i(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Hi(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?Nk(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Mk(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ue(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=Sc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(at(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),le.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Yg.Wt=new Yg;var BI=class{constructor(){this.Cn=new $I}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Ls.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},$I=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Lt(lt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lt(lt.comparator)).toArray()}};var Cle=new Uint8Array(0);var H1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aO=41943040,Jn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(aO,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);var vd=class n{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new n(0)}static lr(){return new n(-1)}};var z1="LruGarbageCollector",OG=1048576;function q1([n,e],[t,r]){let i=be(n,t);return i===0?be(e,r):i}var HI=class{constructor(e){this.Er=e,this.buffer=new Lt(q1),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();q1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},zI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Z(z1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bc(t)?Z(z1,"Ignoring IndexedDB error during garbage collection: ",t):yield jc(t)}yield this.mr(3e5)}))}},qI=class{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(BC.le);let r=new HI(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(H1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H1):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),vc()<=Ce.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function FG(n,e){return new qI(n,e)}var WI=class{constructor(){this.changes=new zi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var GI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var KI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ud(r.mutation,i,Xn.empty(),zt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){let i=Ns();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ns();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qi(),s=ld(),a=function(){return ld()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof mi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),ud(d.mutation,u,d.mutation.getFieldMask(),zt.now())):s.set(u.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new GI(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ld(),i=new pt((s,a)=>s-a),o=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Xn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||xe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=qk();d.forEach(g=>{if(!o.has(g)){let m=Zk(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(Ns()),a=dd,c=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,xe())).next(d=>({batchId:a,changes:zk(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=sd();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let u=function(f,g){return new Vs(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Ar.newInvalidDocument(d)))});let a=sd();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&ud(d.mutation,u,Xn.empty(),zt.now()),Im(t,u)&&(a=a.insert(c,u))}),a})}};var QI=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return V.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:pi(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:kG(i.bundledQuery),readTime:pi(i.readTime)}}(t)),V.resolve()}};var YI=class{constructor(){this.overlays=new pt(le.comparator),this.Qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ns();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=Ns(),o=t.length+1,s=new le(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new pt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Ns(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Ns(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new PI(t,r));let o=this.Qr.get(t);o===void 0&&(o=xe(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}};var ZI=class{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var yd=class{constructor(){this.$r=new Lt(Et.Ur),this.Kr=new Lt(Et.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let r=new Et(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Et(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){let t=new le(new lt([])),r=new Et(t,e),i=new Et(t,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new le(new lt([])),r=new Et(t,e),i=new Et(t,e+1),o=xe();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Et(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return le.comparator(e.key,t.key)||be(e.Zr,t.Zr)}static Wr(e,t){return be(e.Zr,t.Zr)||le.comparator(e.key,t.key)}};var JI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Lt(Et.Ur)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new RI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ti(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?$C:this.nr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Et(t,0),i=new Et(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(be);return t.forEach(i=>{let o=new Et(i,0),s=new Et(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),V.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;le.isDocumentKey(o)||(o=o.child(""));let s=new Et(new le(o),0),a=new Lt(be);return this.Xr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Zr)),!0)},s),V.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Be(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return V.forEach(t.mutations,i=>{let o=new Et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){let r=new Et(t,0),i=this.Xr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var XI=class{constructor(e){this.ii=e,this.docs=function(){return new pt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Ar.newInvalidDocument(t))}getEntries(e,t){let r=qi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ar.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qi(),s=t.path,a=new le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||F9(O9(d),r)<=0||(i.has(d.key)||Im(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ue(9500)}si(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eC(this)}getSize(e){return V.resolve(this.size)}},eC=class extends WI{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}};var tC=class{constructor(e){this.persistence=e,this.oi=new zi(t=>GC(t),KC),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this._i=0,this.ai=new yd,this.targetCount=0,this.ui=vd.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),V.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new vd(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Tr(t),V.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.oi.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ai.Yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.ai.containsKey(t))}};var Zg=class{constructor(e,t){this.ci={},this.overlays={},this.li=new BC(0),this.hi=!1,this.hi=!0,this.Pi=new ZI,this.referenceDelegate=e(this),this.Ti=new tC(this),this.indexManager=new BI,this.remoteDocumentCache=function(i){return new XI(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new jI(t),this.Ei=new QI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new JI(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);let i=new nC(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return V.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}},nC=class extends dI{constructor(e){super(),this.currentSequenceNumber=e}},rC=class n{constructor(e){this.persistence=e,this.Vi=new yd,this.mi=null}static fi(e){return new n(e)}get gi(){if(this.mi)return this.mi;throw ue(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.gi,r=>{let i=le.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,ge.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return V.or([()=>V.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}},Jg=class n{constructor(e,t){this.persistence=e,this.yi=new zi(r=>j9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FG(this,t)}static fi(e,t){return new n(e,t)}di(){}Ai(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return V.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ge.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),V.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ng(e.data.value)),t}Dr(e,t,r){return V.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.yi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var iC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=xe(),i=xe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var oC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sC=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return NM()?8:V9(kt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ws(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new oC;return this.bs(e,t,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,t,s,a.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(vc()<=Ce.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",yc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),V.resolve()):(vc()<=Ce.DEBUG&&Z("QueryEngine","Query:",yc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(vc()<=Ce.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",yc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(t))):V.resolve())}ws(e,t){if(N1(t))return V.resolve(null);let r=hi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=DI(t,null,"F"),r=hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=xe(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.vs(t,a);return this.Cs(t,u,s,c.readTime)?this.ws(e,DI(t,null,"F")):this.Fs(e,u,t,c)}))})))}Ss(e,t,r,i){return N1(t)||i.isEqual(ge.min())?V.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(t,o);return this.Cs(t,s,r,i)?V.resolve(null):(vc()<=Ce.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yc(t)),this.Fs(e,s,t,k9(i,dd)).next(a=>a))})}vs(e,t){let r=new Lt($k(e));return t.forEach((i,o)=>{Im(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}bs(e,t,r){return vc()<=Ce.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",yc(t)),this.ys.getDocumentsMatchingQuery(e,t,Ls.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ZC="LocalStore",LG=3e8,aC=class{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new pt(be),this.Os=new zi(o=>GC(o),KC),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}};function VG(n,e,t,r){return new aC(n,e,t,r)}function cO(n,e){return v(this,null,function*(){let t=fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=xe();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({ks:u,removedBatchIds:s,addedBatchIds:a}))})})})}function UG(n,e){let t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,g=f.keys(),m=V.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(N=>{let k=u.docVersions.get(w);Be(k!==null,48541),N.version.compareTo(k)<0&&(f.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),d.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lO(n){let e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function jG(n,e){let t=fe(n),r=e.snapshotVersion,i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ti.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ti.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(rn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(N,k,B){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=LG?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(g,m,d)&&a.push(t.Ti.updateTargetData(o,m))});let c=qi(),u=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(BG(o,s,e.documentUpdates).next(d=>{c=d.qs,u=d.Qs})),!r.isEqual(ge.min())){let d=t.Ti.getLastRemoteSnapshotVersion(o).next(f=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.xs=i,o))}function BG(n,e,t){let r=xe(),i=xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Z(ZC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{qs:s,Qs:i}})}function $G(n,e){let t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$C),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HG(n,e){let t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ti.allocateTargetId(r).next(s=>(i=new _d(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}function cC(n,e,t){return v(this,null,function*(){let r=fe(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Bc(s))throw s;Z(ZC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function W1(n,e,t){let r=fe(n),i=ge.min(),o=xe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=fe(c),g=f.Os.get(d);return g!==void 0?V.resolve(f.xs.get(g)):f.Ti.getTargetData(u,d)}(r,s,hi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,t?i:ge.min(),t?o:xe())).next(a=>(zG(r,rG(e),a),{documents:a,$s:o})))}function zG(n,e,t){let r=n.Ns.get(e)||ge.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}var Xg=class{constructor(){this.activeTargetIds=lG()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lC=class{constructor(){this.xo=new Xg,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Xg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uC=class{No(e){}shutdown(){}};var G1="ConnectivityMonitor",em=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Z(G1,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){Z(G1,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mg=null;function dC(){return Mg===null?Mg=function(){return 268435456+Math.round(2147483648*Math.random())}():Mg++,"0x"+Mg.toString(16)}var eI="RestConnection",qG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},hC=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===$g?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){let s=dC(),a=this.jo(e,t.toUriEncodedString());Z(eI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,o);let{host:u}=new URL(a),d=ri(u);return this.Jo(e,a,c,r,d).then(f=>(Z(eI,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Tc(eI,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,t,r,i,o,s){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){let r=qG[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}};var fC=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var tn="WebChannelConnection",pC=class extends hC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=dC();return new Promise((a,c)=>{let u=new K0;u.setWithCredentials(!0),u.listenOnce(Q0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case od.NO_ERROR:let f=u.getResponseJson();Z(tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case od.TIMEOUT:Z(tn,`RPC '${e}' ${s} timed out`),c(new J(F.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:let g=u.getStatus();if(Z(tn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let w=m?.error;if(w&&w.status&&w.message){let N=function(B){let ne=B.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(ne)>=0?ne:F.UNKNOWN}(w.status);c(new J(N,w.message))}else c(new J(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new J(F.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(tn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);Z(tn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}T_(e,t,r){let i=dC(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=J0(),a=Z0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");Z(tn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,m=!1,w=new fC({Zo:k=>{m?Z(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(Z(tn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),Z(tn,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},Xo:()=>f.close()}),N=(k,B,ne)=>{k.listen(B,ce=>{try{ne(ce)}catch(Le){setTimeout(()=>{throw Le},0)}})};return N(f,_c.EventType.OPEN,()=>{m||(Z(tn,`RPC '${e}' stream ${i} transport opened.`),w.__())}),N(f,_c.EventType.CLOSE,()=>{m||(m=!0,Z(tn,`RPC '${e}' stream ${i} transport closed`),w.u_())}),N(f,_c.EventType.ERROR,k=>{m||(m=!0,Tc(tn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),w.u_(new J(F.UNAVAILABLE,"The operation could not be completed")))}),N(f,_c.EventType.MESSAGE,k=>{var B;if(!m){let ne=k.data[0];Be(!!ne,16349);let ce=ne,Le=ce?.error||((B=ce[0])===null||B===void 0?void 0:B.error);if(Le){Z(tn,`RPC '${e}' stream ${i} received error:`,Le);let Pt=Le.status,$e=function(b){let T=yt[b];if(T!==void 0)return Xk(T)}(Pt),D=Le.message;$e===void 0&&($e=F.INTERNAL,D="Unknown error status: "+Pt+" with message "+Le.message),m=!0,w.u_(new J($e,D)),f.close()}else Z(tn,`RPC '${e}' stream ${i} received:`,ne),w.c_(ne)}}),N(a,Y0.STAT_EVENT,k=>{k.stat===Rg.PROXY?Z(tn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Rg.NOPROXY&&Z(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}};function tI(){return typeof document<"u"?document:null}function Cm(n){return new OI(n,!0)}var tm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();let t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}};var K1="PersistentStream",nm=class{constructor(e,t,r,i,o,s,a,c){this.xi=e,this.y_=r,this.w_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new tm(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}stop(){return v(this,null,function*(){this.F_()&&(yield this.close(0))})}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}B_(){return v(this,null,function*(){if(this.M_())return this.close(0)})}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}close(e,t){return v(this,null,function*(){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(t)})}Q_(){}auth(){this.state=1;let e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{let i=new J(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){let r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(()=>v(this,null,function*(){this.state=0,this.start()}))}W_(e){return Z(K1,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Z(K1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gC=class extends nm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();let t=CG(this.serializer,e),r=function(o){if(!("targetChange"in o))return ge.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ge.min():s.readTime?pi(s.readTime):ge.min()}(e);return this.listener.j_(t,r)}H_(e){let t={};t.database=UI(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=bI(c)?{documents:DG(o,c)}:{query:SG(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=eO(o,s.resumeToken);let u=FI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ge.min())>0){a.readTime=Qg(o,s.snapshotVersion.toTimestamp());let u=FI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=RG(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){let t={};t.database=UI(this.serializer),t.removeTarget=e,this.L_(t)}},mC=class extends nm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();let t=TG(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.ea(r,t)}ta(){let e={};e.database=UI(this.serializer),this.L_(e)}Z_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bG(this.serializer,r))};this.L_(t)}};var _C=class{},vC=class extends _C{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,LI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(F.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,LI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(F.UNKNOWN,s.toString())})}terminate(){this.na=!0,this.connection.terminate()}},yC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Bi(t),this.oa=!1):Z("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}};var $s="RemoteStore",EC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(s=>{r.enqueueAndForget(()=>v(this,null,function*(){zs(this)&&(Z($s,"Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let u=fe(c);u.Ta.add(4),yield Ad(u),u.da.set("Unknown"),u.Ta.delete(4),yield bm(u)})}(this))}))}),this.da=new yC(r,i)}};function bm(n){return v(this,null,function*(){if(zs(n))for(let e of n.Ia)yield e(!0)})}function Ad(n){return v(this,null,function*(){for(let e of n.Ia)yield e(!1)})}function uO(n,e){let t=fe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),tb(t)?eb(t):$c(t).M_()&&XC(t,e))}function JC(n,e){let t=fe(n),r=$c(t);t.Pa.delete(e),r.M_()&&dO(t,e),t.Pa.size===0&&(r.M_()?r.N_():zs(t)&&t.da.set("Unknown"))}function XC(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$c(n).H_(e)}function dO(n,e){n.Aa.Ke(e),$c(n).J_(e)}function eb(n){n.Aa=new kI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),$c(n).start(),n.da._a()}function tb(n){return zs(n)&&!$c(n).F_()&&n.Pa.size>0}function zs(n){return fe(n).Ta.size===0}function hO(n){n.Aa=void 0}function WG(n){return v(this,null,function*(){n.da.set("Online")})}function GG(n){return v(this,null,function*(){n.Pa.forEach((e,t)=>{XC(n,e)})})}function KG(n,e){return v(this,null,function*(){hO(n),tb(n)?(n.da.ca(e),eb(n)):n.da.set("Unknown")})}function QG(n,e,t){return v(this,null,function*(){if(n.da.set("Online"),e instanceof Gg&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Pa.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Pa.delete(a),i.Aa.removeTarget(a))})}(n,e)}catch(r){Z($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rm(n,r)}else if(e instanceof Cc?n.Aa.Xe(e):e instanceof Wg?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(ge.min()))try{let r=yield lO(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Aa.It(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Pa.get(u);d&&o.Pa.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Pa.get(c);if(!d)return;o.Pa.set(c,d.withResumeToken(rn.EMPTY_BYTE_STRING,d.snapshotVersion)),dO(o,c);let f=new _d(d.target,c,u,d.sequenceNumber);XC(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Z($s,"Failed to raise snapshot:",r),yield rm(n,r)}})}function rm(n,e,t){return v(this,null,function*(){if(!Bc(e))throw e;n.Ta.add(1),yield Ad(n),n.da.set("Offline"),t||(t=()=>lO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){Z($s,"Retrying IndexedDB access"),yield t(),n.Ta.delete(1),yield bm(n)}))})}function fO(n,e){return e().catch(t=>rm(n,t,e))}function Tm(n){return v(this,null,function*(){let e=fe(n),t=ko(e),r=e.ha.length>0?e.ha[e.ha.length-1].batchId:$C;for(;YG(e);)try{let i=yield $G(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,ZG(e,i)}catch(i){yield rm(e,i)}pO(e)&&gO(e)})}function YG(n){return zs(n)&&n.ha.length<10}function ZG(n,e){n.ha.push(e);let t=ko(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function pO(n){return zs(n)&&!ko(n).F_()&&n.ha.length>0}function gO(n){ko(n).start()}function JG(n){return v(this,null,function*(){ko(n).ta()})}function XG(n){return v(this,null,function*(){let e=ko(n);for(let t of n.ha)e.Z_(t.mutations)})}function e8(n,e,t){return v(this,null,function*(){let r=n.ha.shift(),i=xI.from(r,e,t);yield fO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Tm(n)})}function t8(n,e){return v(this,null,function*(){e&&ko(n).Y_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return mG(s)&&s!==F.ABORTED}(i.code)){let o=r.ha.shift();ko(r).O_(),yield fO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Tm(r)}})}(n,e)),pO(n)&&gO(n)})}function Q1(n,e){return v(this,null,function*(){let t=fe(n);t.asyncQueue.verifyOperationInProgress(),Z($s,"RemoteStore received new credentials");let r=zs(t);t.Ta.add(3),yield Ad(t),r&&t.da.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),yield bm(t)})}function n8(n,e){return v(this,null,function*(){let t=fe(n);e?(t.Ta.delete(2),yield bm(t)):e||(t.Ta.add(2),yield Ad(t),t.da.set("Unknown"))})}function $c(n){return n.Ra||(n.Ra=function(t,r,i){let o=fe(t);return o.ra(),new gC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:WG.bind(null,n),n_:GG.bind(null,n),i_:KG.bind(null,n),j_:QG.bind(null,n)}),n.Ia.push(e=>v(null,null,function*(){e?(n.Ra.O_(),tb(n)?eb(n):n.da.set("Unknown")):(yield n.Ra.stop(),hO(n))}))),n.Ra}function ko(n){return n.Va||(n.Va=function(t,r,i){let o=fe(t);return o.ra(),new mC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:JG.bind(null,n),i_:t8.bind(null,n),X_:XG.bind(null,n),ea:e8.bind(null,n)}),n.Ia.push(e=>v(null,null,function*(){e?(n.Va.O_(),yield Tm(n)):(yield n.Va.stop(),n.ha.length>0&&(Z($s,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))}))),n.Va}var wC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nb(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),Bc(n))return new J(F.UNAVAILABLE,`${e}: ${n}`);throw n}var im=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=sd(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var om=class{constructor(){this.ma=new pt(le.comparator)}track(e){let t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):ue(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){let e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}},Fc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,im.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var IC=class{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}},CC=class{constructor(){this.queries=Y1(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){let i=fe(t),o=i.queries;i.queries=Y1(),o.forEach((s,a)=>{for(let c of a.ya)c.onError(r)})})(this,new J(F.ABORTED,"Firestore shutting down"))}};function Y1(){return new zi(n=>Bk(n),wm)}function rb(n,e){return v(this,null,function*(){let t=fe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.wa()&&e.Sa()&&(r=2):(o=new IC,r=e.Sa()?0:1);try{switch(r){case 0:o.pa=yield t.onListen(i,!0);break;case 1:o.pa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=nb(s,`Initialization of query '${yc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ya.push(e),e.Da(t.onlineState),o.pa&&e.va(o.pa)&&ob(t)})}function ib(n,e){return v(this,null,function*(){let t=fe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ya.indexOf(e);s>=0&&(o.ya.splice(s,1),o.ya.length===0?i=e.Sa()?0:1:!o.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function r8(n,e){let t=fe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ya)a.va(i)&&(r=!0);s.pa=i}}r&&ob(t)}function i8(n,e,t){let r=fe(n),i=r.queries.get(e);if(i)for(let o of i.ya)o.onError(t);r.queries.delete(e)}function ob(n){n.ba.forEach(e=>{e.next()})}var bC,Z1;(Z1=bC||(bC={})).Ca="default",Z1.Cache="cache";var Ed=class{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;let r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;let t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==bC.Cache}};var sm=class{constructor(e){this.key=e}},am=class{constructor(e){this.key=e}},TC=class{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=xe(),this.mutatedKeys=xe(),this.Ha=$k(e),this.Ja=new im(this.Ha)}get Ya(){return this.Ga}Za(e,t){let r=t?t.Xa:new om,i=t?t.Ja:this.Ja,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Im(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),k=!1;g&&m?g.data.isEqual(m.data)?w!==N&&(r.track({type:3,doc:m}),k=!0):this.eu(g,m)||(r.track({type:2,doc:m}),k=!0,(c&&this.Ha(m,c)>0||u&&this.Ha(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),k=!0):g&&!m&&(r.track({type:1,doc:g}),k=!0,(c||u)&&(a=!0)),k&&(m?(s=s.add(m),o=N?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ja:s,Xa:r,Cs:a,mutatedKeys:o}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;let s=e.Xa.ga();s.sort((d,f)=>function(m,w){let N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Vt:k})}};return N(m)-N(w)}(d.type,f.type)||this.Ha(d.doc,f.doc)),this.tu(r),i=i!=null&&i;let a=t&&!i?this.nu():[],c=this.ja.size===0&&this.current&&!i?1:0,u=c!==this.za;return this.za=c,s.length!==0||u?{snapshot:new Fc(this.query,e.Ja,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new om,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];let e=this.ja;this.ja=xe(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});let t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new am(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new sm(r))}),t}su(e){this.Ga=e.$s,this.ja=xe();let t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Fc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}},sb="SyncEngine",DC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},SC=class{constructor(e){this.key=e,this._u=!1}},AC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new zi(a=>Bk(a),wm),this.cu=new Map,this.lu=new Set,this.hu=new pt(le.comparator),this.Pu=new Map,this.Tu=new yd,this.Iu={},this.Eu=new Map,this.du=vd.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}};function o8(n,e,t=!0){return v(this,null,function*(){let r=wO(n),i,o=r.uu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ou()):i=yield mO(r,e,t,!0),i})}function s8(n,e){return v(this,null,function*(){let t=wO(n);yield mO(t,e,!0,!1)})}function mO(n,e,t,r){return v(this,null,function*(){let i=yield HG(n.localStore,hi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield a8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&uO(n.remoteStore,i),a})}function a8(n,e,t,r,i){return v(this,null,function*(){n.Ru=(f,g,m)=>function(N,k,B,ne){return v(this,null,function*(){let ce=k.view.Za(B);ce.Cs&&(ce=yield W1(N.localStore,k.query,!1).then(({documents:D})=>k.view.Za(D,ce)));let Le=ne&&ne.targetChanges.get(k.targetId),Pt=ne&&ne.targetMismatches.get(k.targetId)!=null,$e=k.view.applyChanges(ce,N.isPrimaryClient,Le,Pt);return X1(N,k.targetId,$e.ru),$e.snapshot})}(n,f,g,m);let o=yield W1(n.localStore,e,!0),s=new TC(e,o.$s),a=s.Za(o.documents),c=md.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);X1(n,t,u.ru);let d=new DC(e,t,s);return n.uu.set(e,d),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),u.snapshot})}function c8(n,e,t){return v(this,null,function*(){let r=fe(n),i=r.uu.get(e),o=r.cu.get(i.targetId);if(o.length>1)return r.cu.set(i.targetId,o.filter(s=>!wm(s,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&JC(r.remoteStore,i.targetId),RC(r,i.targetId)}).catch(jc))):(RC(r,i.targetId),yield cC(r.localStore,i.targetId,!0))})}function l8(n,e){return v(this,null,function*(){let t=fe(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),JC(t.remoteStore,r.targetId))})}function u8(n,e,t){return v(this,null,function*(){let r=_8(n);try{let i=yield function(s,a){let c=fe(s),u=zt.now(),d=a.reduce((m,w)=>m.add(w.key),xe()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=qi(),N=xe();return c.Bs.getEntries(m,d).next(k=>{w=k,w.forEach((B,ne)=>{ne.isValidDocument()||(N=N.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(k=>{f=k;let B=[];for(let ne of a){let ce=gG(ne,f.get(ne.key).overlayedDocument);ce!=null&&B.push(new mi(ne.key,ce,kk(ce.value.mapValue),fi.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,B,a)}).next(k=>{g=k;let B=k.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(m,k.batchId,B)})}).then(()=>({batchId:g.batchId,changes:zk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Iu[s.currentUser.toKey()];u||(u=new pt(be)),u=u.insert(a,c),s.Iu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Rd(r,i.changes),yield Tm(r.remoteStore)}catch(i){let o=nb(i,"Failed to persist write");t.reject(o)}})}function _O(n,e){return v(this,null,function*(){let t=fe(n);try{let r=yield jG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Pu.get(o);s&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s._u=!0:i.modifiedDocuments.size>0?Be(s._u,14607):i.removedDocuments.size>0&&(Be(s._u,42227),s._u=!1))}),yield Rd(t,r,e)}catch(r){yield jc(r)}})}function J1(n,e,t){let r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.uu.forEach((o,s)=>{let a=s.view.Da(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=fe(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.ya)g.Da(a)&&(u=!0)}),u&&ob(c)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function d8(n,e,t){return v(this,null,function*(){let r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Pu.get(e),o=i&&i.key;if(o){let s=new pt(le.comparator);s=s.insert(o,Ar.newNoDocument(o,ge.min()));let a=xe().add(o),c=new qg(ge.min(),new Map,new pt(be),s,a);yield _O(r,c),r.hu=r.hu.remove(o),r.Pu.delete(e),ab(r)}else yield cC(r.localStore,e,!1).then(()=>RC(r,e,t)).catch(jc)})}function h8(n,e){return v(this,null,function*(){let t=fe(n),r=e.batch.batchId;try{let i=yield UG(t.localStore,e);yO(t,r,null),vO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rd(t,i)}catch(i){yield jc(i)}})}function f8(n,e,t){return v(this,null,function*(){let r=fe(n);try{let i=yield function(s,a){let c=fe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Be(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);yO(r,e,t),vO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rd(r,i)}catch(i){yield jc(i)}})}function vO(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function yO(n,e,t){let r=fe(n),i=r.Iu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function RC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||EO(n,r)})}function EO(n,e){n.lu.delete(e.path.canonicalString());let t=n.hu.get(e);t!==null&&(JC(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),ab(n))}function X1(n,e,t){for(let r of t)r instanceof sm?(n.Tu.addReference(r.key,e),p8(n,r)):r instanceof am?(Z(sb,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||EO(n,r.key)):ue(19791,{mu:r})}function p8(n,e){let t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(Z(sb,"New document in limbo: "+t),n.lu.add(r),ab(n))}function ab(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){let e=n.lu.values().next().value;n.lu.delete(e);let t=new le(lt.fromString(e)),r=n.du.next();n.Pu.set(r,new SC(t)),n.hu=n.hu.insert(t,r),uO(n.remoteStore,new _d(hi(Em(t.path)),r,"TargetPurposeLimboResolution",BC.le))}}function Rd(n,e,t){return v(this,null,function*(){let r=fe(n),i=[],o=[],s=[];r.uu.isEmpty()||(r.uu.forEach((a,c)=>{s.push(r.Ru(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=iC.Rs(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.au.j_(i),yield function(c,u){return v(this,null,function*(){let d=fe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,g=>V.forEach(g.ds,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>V.forEach(g.As,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Bc(f))throw f;Z(ZC,"Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=d.xs.get(g),w=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(w);d.xs=d.xs.insert(g,N)}}})}(r.localStore,o))})}function g8(n,e){return v(this,null,function*(){let t=fe(n);if(!t.currentUser.isEqual(e)){Z(sb,"User change. New user:",e.toKey());let r=yield cO(t.localStore,e);t.currentUser=e,function(o,s){o.Eu.forEach(a=>{a.forEach(c=>{c.reject(new J(F.CANCELLED,s))})}),o.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rd(t,r.ks)}})}function m8(n,e){let t=fe(n),r=t.Pu.get(e);if(r&&r._u)return xe().add(r.key);{let i=xe(),o=t.cu.get(e);if(!o)return i;for(let s of o){let a=t.uu.get(s);i=i.unionWith(a.view.Ya)}return i}}function wO(n){let e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_O.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d8.bind(null,e),e.au.j_=r8.bind(null,e.eventManager),e.au.Vu=i8.bind(null,e.eventManager),e}function _8(n){let e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f8.bind(null,e),e}var IO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Cm(t.databaseInfo.databaseId),this.sharedClientState=this.pu(t),this.persistence=this.yu(t),yield this.persistence.start(),this.localStore=this.wu(t),this.gcScheduler=this.Su(t,this.localStore),this.indexBackfillerScheduler=this.bu(t,this.localStore)})}Su(t,r){return null}bu(t,r){return null}wu(t){return VG(this.persistence,new sC,t.initialUser,this.serializer)}yu(t){return new Zg(rC.fi,this.serializer)}pu(t){return new lC}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),xC=class extends IO{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){Be(this.persistence.referenceDelegate instanceof Jg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zI(r,e.asyncQueue,t)}yu(e){let t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new Zg(r=>Jg.fi(r,t),this.serializer)}};var v8=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>J1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=g8.bind(null,this.syncEngine),yield n8(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new CC}()}createDatastore(t){let r=Cm(t.databaseInfo.databaseId),i=function(s){return new pC(s)}(t.databaseInfo);return function(s,a,c,u){return new vC(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new EC(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>J1(this.syncEngine,r,0),function(){return em.C()?new em:new uC}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let g=new AC(o,s,a,c,u,d);return f&&(g.Au=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=fe(o);Z($s,"RemoteStore shutting down."),s.Ta.add(5),yield Ad(s),s.Ea.shutdown(),s.da.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Oo="FirestoreClient",PC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=Vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){Z(Oo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Z(Oo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=nb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nI(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Z(Oo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield cO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ek(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield y8(n);Z(Oo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Q1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Q1(e.remoteStore,i)),n._onlineComponents=e})}function y8(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z(Oo,"Using user provided OfflineComponentProvider");try{yield nI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Tc("Error using user provided cache. Falling back to memory cache: "+t),yield nI(n,new IO)}}else Z(Oo,"Using default OfflineComponentProvider"),yield nI(n,new xC(void 0));return n._offlineComponents})}function CO(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z(Oo,"Using user provided OnlineComponentProvider"),yield ek(n,n._uninitializedComponentsProvider._online)):(Z(Oo,"Using default OnlineComponentProvider"),yield ek(n,new v8))),n._onlineComponents})}function E8(n){return CO(n).then(e=>e.syncEngine)}function cm(n){return v(this,null,function*(){let e=yield CO(n),t=e.eventManager;return t.onListen=o8.bind(null,e.syncEngine),t.onUnlisten=c8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=s8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l8.bind(null,e.syncEngine),t})}function w8(n,e,t={}){let r=new Sr;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,u){let d=new wd({next:g=>{d.Cu(),s.enqueueAndForget(()=>ib(o,f));let m=g.docs.has(a);!m&&g.fromCache?u.reject(new J(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new J(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Ed(Em(a.path),d,{includeMetadataChanges:!0,La:!0});return rb(o,f)}(yield cm(n),n.asyncQueue,e,t,r)})),r.promise}function I8(n,e,t={}){let r=new Sr;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,u){let d=new wd({next:g=>{d.Cu(),s.enqueueAndForget(()=>ib(o,f)),g.fromCache&&c.source==="server"?u.reject(new J(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Ed(a,d,{includeMetadataChanges:!0,La:!0});return rb(o,f)}(yield cm(n),n.asyncQueue,e,t,r)})),r.promise}function bO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tk=new Map;function TO(n,e,t){if(!t)throw new J(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C8(n,e,t,r){if(e===!0&&r===!0)throw new J(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nk(n){if(!le.isDocumentKey(n))throw new J(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rk(n){if(le.isDocumentKey(n))throw new J(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Dm(n);throw new J(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var DO="firestore.googleapis.com",ik=!0,lm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DO,this.ssl=ik}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:ik;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OG)throw new J(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Lc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rI;switch(r.type){case"firstParty":return new aI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=tk.get(t);r&&(Z("ComponentProvider","Removing Datastore"),tk.delete(t),r.terminate())}(this),Promise.resolve()}};function SO(n,e,t,r={}){var i;n=wn(n,Lc);let o=ri(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(lc(`https://${c}`),uc("Firestore",!0)),s.host!==DO&&s.host!==c&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Qn(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Ft.MOCK_USER;else{d=Zp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new J(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(g)}n._authCredentials=new iI(new Fg(d,f))}}var Hs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Mo=class n extends Hs{constructor(e,t,r){super(e,t,Em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function AO(n,e,...t){if(n=tt(n),TO("collection","path",e),n instanceof Lc){let r=lt.fromString(e,...t);return rk(r),new Mo(n,null,r)}{if(!(n instanceof nn||n instanceof Mo))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(lt.fromString(e,...t));return rk(r),new Mo(n.firestore,null,r)}}function cb(n,e,...t){if(n=tt(n),arguments.length===1&&(e=Vg.newId()),TO("doc","path",e),n instanceof Lc){let r=lt.fromString(e,...t);return nk(r),new nn(n,null,new le(r))}{if(!(n instanceof nn||n instanceof Mo))throw new J(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(lt.fromString(e,...t));return nk(r),new nn(n.firestore,n instanceof Mo?n.converter:null,new le(r))}}var ok="AsyncQueue",um=class{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new tm(this,"async_queue_retry"),this.ec=()=>{let r=tI();r&&Z(ok,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;let t=tI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;let t=tI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});let t=new Sr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}sc(){return v(this,null,function*(){if(this.zu.length!==0){try{yield this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Bc(e))throw e;Z(ok,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}})}rc(e){let t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Bi("INTERNAL UNHANDLED ERROR: ",sk(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);let i=wC.createAndSchedule(this,e,t,r,o=>this.oc(o));return this.Hu.push(i),i}nc(){this.Ju&&ue(47125,{_c:sk(this.Ju)})}verifyOperationInProgress(){}ac(){return v(this,null,function*(){let e;do e=this.tc,yield e;while(e!==this.tc)})}uc(e){for(let t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){let t=this.Hu.indexOf(e);this.Hu.splice(t,1)}};function sk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ak(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var xr=class extends Lc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new um,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new um(e),this._firestoreClient=void 0,yield e}})}};function RO(n,e){let t=typeof n=="object"?n:Ni(),r=typeof n=="string"?n:e||$g,i=Co(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Yp("firestore");o&&SO(i,...o)}return i}function Sm(n){if(n._terminated)throw new J(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||b8(n),n._firestoreClient}function b8(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new hI(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new PC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Id=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rn.fromBase64String(e))}catch(t){throw new J(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cd=class{constructor(e){this._methodName=e}};var bd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}};var Td=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var T8=/^__.*__$/,MC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bs(e,this.data,t,this.fieldTransforms)}},dm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function xO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{hc:n})}}var NC=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return fm(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(xO(this.hc)&&T8.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}},kC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cm(e)}gc(e,t,r,i=!1){return new NC({hc:e,methodName:t,fc:r,path:Fn.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Am(n){let e=n._freezeSettings(),t=Cm(n._databaseId);return new kC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PO(n,e,t,r,i,o={}){let s=n.gc(o.merge||o.mergeFields?2:0,e,t,i);lb("Data must be an object, but it was:",s,r);let a=MO(r,s),c,u;if(o.merge)c=new Xn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=OC(e,f,t);if(!s.contains(g))throw new J(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);kO(d,g)||d.push(g)}c=new Xn(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new MC(new On(a),c,u)}var hm=class n extends Cd{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function D8(n,e,t,r){let i=n.gc(1,e,t);lb("Data must be an object, but it was:",i,r);let o=[],s=On.empty();Fo(r,(c,u)=>{let d=ub(e,c,t);u=tt(u);let f=i.Ac(d);if(u instanceof hm)o.push(d);else{let g=xd(u,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Xn(o);return new dm(s,a,i.fieldTransforms)}function S8(n,e,t,r,i,o){let s=n.gc(1,e,t),a=[OC(e,r,t)],c=[i];if(o.length%2!=0)throw new J(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(OC(e,o[g])),c.push(o[g+1]);let u=[],d=On.empty();for(let g=a.length-1;g>=0;--g)if(!kO(u,a[g])){let m=a[g],w=c[g];w=tt(w);let N=s.Ac(m);if(w instanceof hm)u.push(m);else{let k=xd(w,N);k!=null&&(u.push(m),d.set(m,k))}}let f=new Xn(u);return new dm(d,f,s.fieldTransforms)}function A8(n,e,t,r=!1){return xd(t,n.gc(r?4:3,e))}function xd(n,e){if(NO(n=tt(n)))return lb("Unsupported field value:",e,n),MO(n,e);if(n instanceof Cd)return function(r,i){if(!xO(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=xd(a,i.Rc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=zt.fromDate(r);return{timestampValue:Qg(i.serializer,o)}}if(r instanceof zt){let o=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qg(i.serializer,o)}}if(r instanceof bd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Id)return{bytesValue:eO(i.serializer,r._byteString)};if(r instanceof nn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Vc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:YC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Td)return function(s,a){return{mapValue:{fields:{[zC]:{stringValue:qC},[Sc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Vc("VectorValues must only contain numeric values.");return QC(a.serializer,u)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Dm(r)}`)}(n,e)}function MO(n,e){let t={};return Dk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(n,(r,i)=>{let o=xd(i,e.Ic(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function NO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof bd||n instanceof Id||n instanceof nn||n instanceof Cd||n instanceof Td)}function lb(n,e,t){if(!NO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Dm(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function OC(n,e,t){if((e=tt(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return ub(n,e);throw fm("Field path arguments must be of type string or ",n,!1,void 0,t)}var R8=new RegExp("[~\\*/\\[\\]]");function ub(n,e,t){if(e.search(R8)>=0)throw fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vc(...e.split("."))._internalPath}catch{throw fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new J(F.INVALID_ARGUMENT,a+n+c)}function kO(n,e){return n.some(t=>t.isEqual(e))}var pm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},FC=class extends pm{data(){return super.data()}};function db(n,e){return typeof e=="string"?ub(n,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}function OO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dd=class{},LC=class extends Dd{};function FO(n,e,...t){let r=[];e instanceof Dd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof VC).length,a=o.filter(c=>c instanceof gm).length;if(s>1||s>0&&a>0)throw new J(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gm=class n extends LC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return VO(e._query,t),new Hs(e.firestore,e.converter,TI(e._query,t))}_parse(e){let t=Am(e.firestore);return function(o,s,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lk(f,d);let w=[];for(let N of f)w.push(ck(c,o,N));g={arrayValue:{values:w}}}else g=ck(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lk(f,d),g=A8(a,s,f,d==="in"||d==="not-in");return wt.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function LO(n,e,t){let r=e,i=db("where",n);return gm._create(i,r,t)}var VC=class n extends Dd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Rr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)VO(s,c),s=TI(s,c)}(e._query,t),new Hs(e.firestore,e.converter,TI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function ck(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new J(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jk(e)&&t.indexOf("/")!==-1)throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(lt.fromString(t));if(!le.isDocumentKey(r))throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S1(n,new le(r))}if(t instanceof nn)return S1(n,t._key);throw new J(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(t)}.`)}function lk(n,e){if(!Array.isArray(n)||n.length===0)throw new J(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new J(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var UC=class{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Fo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Sc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>at(s.doubleValue));return new Td(o)}convertGeoPoint(e){return new bd(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ym(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fd(e));default:return null}}convertTimestamp(e){let t=$i(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=lt.fromString(e);Be(sO(r),9688,{name:e});let i=new Hg(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(t)||Bi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function UO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Os=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},mm=class extends pm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(db("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},bc=class extends mm{data(e={}){return super.data(e)}},_m=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Os(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bc(this._firestore,this._userDataWriter,r.key,r,new Os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:x8(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}function jO(n){n=wn(n,nn);let e=wn(n.firestore,xr);return w8(Sm(e),n._key).then(t=>WO(e,n,t))}var Sd=class extends UC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}};function BO(n){n=wn(n,Hs);let e=wn(n.firestore,xr),t=Sm(e),r=new Sd(e);return OO(n._query),I8(t,n._query).then(i=>new _m(e,r,n,i))}function $O(n,e,t){n=wn(n,nn);let r=wn(n.firestore,xr),i=UO(n.converter,e,t);return Rm(r,[PO(Am(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fi.none())])}function HO(n,e,t,...r){n=wn(n,nn);let i=wn(n.firestore,xr),o=Am(i),s;return s=typeof(e=tt(e))=="string"||e instanceof Vc?S8(o,"updateDoc",n._key,e,t,r):D8(o,"updateDoc",n._key,e),Rm(i,[s.toMutation(n._key,fi.exists(!0))])}function zO(n){return Rm(wn(n.firestore,xr),[new gd(n._key,fi.none())])}function qO(n,e){let t=wn(n.firestore,xr),r=cb(n),i=UO(n.converter,e);return Rm(t,[PO(Am(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}function hb(n,...e){var t,r,i;n=tt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ak(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ak(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof nn)u=wn(n.firestore,xr),d=Em(n._key.path),c={next:f=>{e[s]&&e[s](WO(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=wn(n,Hs);u=wn(f.firestore,xr),d=f._query;let g=new Sd(u);c={next:m=>{e[s]&&e[s](new _m(u,g,f,m))},error:e[s+1],complete:e[s+2]},OO(n._query)}return function(g,m,w,N){let k=new wd(N),B=new Ed(m,k,w);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return rb(yield cm(g),B)})),()=>{k.Cu(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return ib(yield cm(g),B)}))}}(Sm(u),d,a,c)}function Rm(n,e){return function(r,i){let o=new Sr;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return u8(yield E8(r),i,o)})),o.promise}(Sm(n),e)}function WO(n,e,t){let r=t.docs.get(e._key),i=new Sd(n);return new mm(n,i,e._key,r,new Os(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Uc=i})(ai),Nn(new $t("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new xr(new oI(r.getProvider("auth-internal")),new cI(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hg(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ze(_1,v1,e),ze(_1,v1,"esm2017")})();var xm=function(){return xm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xm.apply(this,arguments)};var N8={includeMetadataChanges:!1};function fb(n,e){return e===void 0&&(e=N8),new ve(function(t){var r=hb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function GO(n){return fb(n,{includeMetadataChanges:!0})}function KO(n,e){return e===void 0&&(e={}),GO(n).pipe(G(function(t){return pb(t,e)}))}function pb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:xm(xm({},r),(t={},t[e.idField]=n.id,t))}function QO(n){return fb(n,{includeMetadataChanges:!0}).pipe(G(function(e){return e.docs}))}function YO(n,e){return e===void 0&&(e={}),QO(n).pipe(G(function(t){return t.map(function(r){return pb(r,e)})}))}var xt=class{constructor(e){return e}},ZO="firestore",gb=class{constructor(){return bo(ZO)}};var mb=new te("angularfire2.firestore-instances");function k8(n,e){let t=Rs(ZO,n,e);return t&&new xt(t)}function O8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new xt(r)}}var F8={provide:gb,deps:[[new bt,mb]]},L8={provide:xt,useFactory:k8,deps:[[new bt,mb],br]};function JO(n,...e){return ze("angularfire",ci.full,"fst"),Hn([L8,F8,{provide:mb,useFactory:O8(n),multi:!0,deps:[Ve,ht,li,ki,[new bt,Ms],[new bt,Do],...e]}])}var Pr=Qe(YO,!0);var XO=Qe(KO,!0);var er=Qe(qO,!0,2);var tr=Qe(AO,!0,2);var _i=Qe(zO,!0,2);var Je=Qe(cb,!0,2);var nr=Qe(jO,!0);var eF=Qe(BO,!0);var tF=Qe(RO,!0);var vi=Qe(FO,!0,2);var nF=Qe($O,!0,2);var rr=Qe(HO,!0,2);var yi=Qe(LO,!0,2);var on=class n{constructor(e,t){this.firestore=e;this.auth=t}getUser(){return Dg(this.auth)}getUid(){return this.auth.currentUser?this.auth.currentUser.uid:null}createUserProfile(e){return v(this,null,function*(){let t={uid:e.uid,email:e.email,createdAt:new Date,lastLoginAt:new Date},r=Je(this.firestore,"users",e.uid);return nF(r,t,{merge:!0}).then(()=>console.log(`Perfil de usu\xE1rio ${e.uid} criado/atualizado no Firestore.`)).catch(i=>console.error(`Erro ao criar/atualizar perfil de usu\xE1rio ${e.uid} no Firestore:`,i))})}getUserProfile(e){let t=Je(this.firestore,"users",e);return XO(t)}updateUserProfile(e,t){return v(this,null,function*(){let r=Je(this.firestore,"users",e);return rr(r,t).then(()=>console.log(`Perfil de usu\xE1rio ${e} atualizado no Firestore.`)).catch(i=>console.error(`Erro ao atualizar perfil de usu\xE1rio ${e} no Firestore:`,i))})}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(kn))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hc=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getReinosCollectionRef(){return this.userProfileService.getUser().pipe(it(1),G(e=>{if(!e||!e.uid)throw new Error("Usu\xE1rio n\xE3o autenticado. N\xE3o \xE9 poss\xEDvel acessar os reinos.");return tr(this.firestore,`users/${e.uid}/reinos`)}),re(e=>(console.error("Erro ao obter refer\xEAncia da cole\xE7\xE3o de reinos:",e),Pe(()=>new Error("Falha na autentica\xE7\xE3o ao acessar reinos.")))))}getReinos(){return this.getReinosCollectionRef().pipe(ie(e=>Pr(e,{idField:"id"}).pipe(re(t=>(console.error("Erro ao obter reinos:",t),j([]))))))}getReino(e){return this.getReinosCollectionRef().pipe(ie(t=>{let r=Je(t,e);return se(nr(r)).pipe(G(i=>{if(i.exists())return X(O({},i.data()),{id:i.id})}),re(i=>(console.error(`Erro ao obter reino ${e}:`,i),j(void 0))))}))}addReino(e){return this.getReinosCollectionRef().pipe(ie(t=>se(er(t,O({},e)))),re(t=>(console.error("Erro ao adicionar reino:",t),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar o reino."))))).toPromise()}updateReino(e){return e.id?this.getReinosCollectionRef().pipe(ie(t=>{let r=Je(t,e.id);return se(rr(r,e))}),re(t=>(console.error(`Erro ao atualizar reino ${e.id}:`,t),Pe(()=>new Error("N\xE3o foi poss\xEDvel atualizar o reino."))))).toPromise():Promise.reject("ID do reino \xE9 obrigat\xF3rio para atualiza\xE7\xE3o.")}deleteReino(e){return this.getReinosCollectionRef().pipe(ie(t=>{let r=Je(t,e);return se(_i(r))}),re(t=>(console.error(`Erro ao deletar reino ${e}:`,t),Pe(()=>new Error("N\xE3o foi poss\xEDvel deletar o reino."))))).toPromise()}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var zc=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getCidadesCollectionRef(e){return this.userProfileService.getUser().pipe(it(1),ie(t=>t&&t.uid?j(tr(this.firestore,`users/${t.uid}/reinos/${e}/cidades`)):Pe(()=>new Error("Usu\xE1rio n\xE3o autenticado. Por favor, fa\xE7a login."))))}getCidadesByReino(e){return this.getCidadesCollectionRef(e).pipe(ie(t=>Pr(t,{idField:"id"})),re(t=>(console.error(`Erro ao obter cidades para o reino ${e}:`,t),j([]))))}getCidadesByRegiao(e,t){return this.getCidadesCollectionRef(e).pipe(ie(r=>{let i=vi(r,yi("idRegiao","==",t));return Pr(i,{idField:"id"})}),re(r=>(console.error(`Erro ao obter cidades da regi\xE3o ${t}:`,r),j([]))))}getCidade(e,t){return this.getCidadesCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(nr(i)).pipe(G(o=>{if(o.exists())return X(O({},o.data()),{id:o.id})}),re(o=>(console.error(`Erro ao obter cidade ${t}:`,o),Pe(()=>new Error("N\xE3o foi poss\xEDvel obter a cidade.")))))}))}addCidade(e,t){return this.getCidadesCollectionRef(e).pipe(ie(r=>se(er(r,t))),re(r=>(console.error("Erro ao adicionar cidade:",r),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar a cidade."))))).toPromise()}updateCidade(e,t){return this.getCidadesCollectionRef(e).pipe(ie(r=>{if(!t.id)throw new Error("ID da cidade \xE9 obrigat\xF3rio para atualiza\xE7\xE3o.");let i=Je(r,t.id),a=t,{id:o}=a,s=Ji(a,["id"]);return se(rr(i,s))}),re(r=>(console.error(`Erro ao atualizar cidade ${t.id}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel atualizar a cidade."))))).toPromise()}deleteCidade(e,t){return this.getCidadesCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(_i(i))}),re(r=>(console.error(`Erro ao excluir cidade ${t}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel excluir a cidade."))))).toPromise()}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var oF=n=>["/reinos",n];function V8(n,e){if(n&1){let t=Ze();I(0,"div",16)(1,"div",17)(2,"h4")(3,"a",18),R(4),E()()(),I(5,"div",19)(6,"p")(7,"strong"),R(8,"Sistema Pol\xEDtico:"),E(),R(9),E(),I(10,"p")(11,"strong"),R(12,"Cidades:"),E(),R(13),E()(),I(14,"div",20)(15,"button",21),R(16,"Ver Detalhes"),E(),I(17,"button",22),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.editarReino(i))}),R(18,"Editar"),E(),I(19,"button",23),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.excluirReino(i.id))}),R(20,"Excluir"),E()()()}if(n&2){let t=e.$implicit;P(3),z("routerLink",Xl(5,oF,t.id)),P(),ot(t.nome),P(5),Ne(" ",t.sistemaPolitico,""),P(4),Ne(" ",t.cidades,""),P(2),z("routerLink",Xl(7,oF,t.id))}}function U8(n,e){if(n&1&&(I(0,"div",14),oe(1,V8,21,9,"div",15),E()),n&2){let t=L().ngIf;P(),z("ngForOf",t)}}function j8(n,e){n&1&&(I(0,"p",24),R(1,"Nenhum reino encontrado. Adicione um para come\xE7ar!"),E())}function B8(n,e){if(n&1&&(I(0,"div"),oe(1,U8,2,1,"div",13)(2,j8,2,0,"ng-template",null,1,Mt),E()),n&2){let t=e.ngIf,r=Bt(3);P(),z("ngIf",t.length>0)("ngIfElse",r)}}function $8(n,e){n&1&&(I(0,"p",25),R(1,"Carregando reinos..."),E())}function H8(n,e){if(n&1){let t=Ze();I(0,"div",26)(1,"div",27)(2,"div",3),R(3,"Editar Reino"),E(),I(4,"form",28),ae("ngSubmit",function(){K(t);let i=L();return Q(i.salvarEdicaoReino())}),I(5,"label",29),R(6,"Nome:"),E(),I(7,"input",30),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.reinoParaEdicao.nome,i)||(o.reinoParaEdicao.nome=i),Q(i)}),E(),I(8,"label",31),R(9,"Sistema Pol\xEDtico:"),E(),I(10,"input",32),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.reinoParaEdicao.sistemaPolitico,i)||(o.reinoParaEdicao.sistemaPolitico=i),Q(i)}),E(),I(11,"div",33)(12,"button",34),R(13,"Salvar"),E(),I(14,"button",35),ae("click",function(){K(t);let i=L();return Q(i.cancelarEdicaoReino())}),R(15,"Cancelar"),E()()()()()}if(n&2){let t=L();P(7),we("ngModel",t.reinoParaEdicao.nome),P(3),we("ngModel",t.reinoParaEdicao.sistemaPolitico)}}var Pm=class n{constructor(e,t,r,i){this.reinoService=e;this.cidadeService=t;this.auth=r;this.router=i}reinos$;novoReinoNome="";novoReinoSistemaPolitico="";reinoParaEdicao=null;ngOnInit(){this.reinos$=this.reinoService.getReinos().pipe(ie(e=>{if(e.length===0)return j([]);let t=e.map(r=>this.cidadeService.getCidadesByReino(r.id).pipe(G(i=>X(O({},r),{cidades:i.length})),re(i=>(console.error(`Erro ao carregar cidades para o reino ${r.nome}:`,i),j(X(O({},r),{cidades:0}))))));return Ti(t)}),re(e=>(console.error("Erro ao carregar reinos:",e),j([]))))}adicionarReino(){return v(this,null,function*(){if(this.novoReinoNome&&this.novoReinoSistemaPolitico)try{let e={nome:this.novoReinoNome,sistemaPolitico:this.novoReinoSistemaPolitico,cidades:0};yield this.reinoService.addReino(e),this.novoReinoNome="",this.novoReinoSistemaPolitico="",console.log("Reino adicionado com sucesso!")}catch(e){console.error("Erro ao adicionar reino:",e),alert("Erro ao adicionar reino. Verifique se voc\xEA est\xE1 logado e tente novamente: "+e.message)}})}editarReino(e){this.reinoParaEdicao=O({},e)}salvarEdicaoReino(){return v(this,null,function*(){if(this.reinoParaEdicao&&this.reinoParaEdicao.id)try{yield this.reinoService.updateReino(this.reinoParaEdicao),this.reinoParaEdicao=null,console.log("Reino atualizado com sucesso!")}catch(e){console.error("Erro ao atualizar reino:",e),alert("Erro ao atualizar reino. Verifique se voc\xEA est\xE1 logado e tente novamente: "+e.message)}})}cancelarEdicaoReino(){this.reinoParaEdicao=null}excluirReino(e){return v(this,null,function*(){if(confirm("Tem certeza que deseja excluir este reino? Isso tamb\xE9m excluir\xE1 todas as cidades, regi\xF5es, partidos e elei\xE7\xF5es associadas a ele!"))try{yield this.reinoService.deleteReino(e),console.log("Reino exclu\xEDdo com sucesso!")}catch(t){console.error("Erro ao excluir reino:",t),alert("Erro ao excluir reino. Verifique se voc\xEA est\xE1 logado e tente novamente: "+t.message)}})}logout(){return v(this,null,function*(){try{yield p1(this.auth),console.log("Logout bem-sucedido!"),this.router.navigate(["/auth"])}catch(e){console.error("Erro ao fazer logout:",e),alert("Erro ao fazer logout: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(H(Hc),H(zc),H(kn),H(Rt))};static \u0275cmp=Xt({type:n,selectors:[["app-reinos"]],decls:23,vars:7,consts:[["loading",""],["noReinos",""],[1,"card","reinos-container"],[1,"card-header"],[1,"logout-button",3,"click"],[1,"section-add-reino"],[1,"form-add-reino"],["type","text","placeholder","Nome do Reino","required","",1,"input-field",3,"ngModelChange","ngModel"],["type","text","placeholder","Sistema Pol\xEDtico","required","",1,"input-field",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"section-list-reinos"],[4,"ngIf","ngIfElse"],["class","modal-overlay",4,"ngIf"],["class","reinos-grid",4,"ngIf","ngIfElse"],[1,"reinos-grid"],["class","reino-card",4,"ngFor","ngForOf"],[1,"reino-card"],[1,"reino-header"],[3,"routerLink"],[1,"reino-body"],[1,"reino-actions-bottom"],[1,"btn-details",3,"routerLink"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-items-message"],[1,"loading-message"],[1,"modal-overlay"],[1,"modal-content","card"],[3,"ngSubmit"],["for","editReinoNome"],["id","editReinoNome","type","text","name","editReinoNome","required","",1,"input-field",3,"ngModelChange","ngModel"],["for","editReinoSistemaPolitico"],["id","editReinoSistemaPolitico","type","text","name","editReinoSistemaPolitico","required","",1,"input-field",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn-primary"],["type","button",1,"btn-secondary",3,"click"]],template:function(t,r){if(t&1){let i=Ze();I(0,"div",2)(1,"div",3)(2,"h1"),R(3,"Meus Reinos"),E(),I(4,"button",4),ae("click",function(){return K(i),Q(r.logout())}),R(5,"Sair"),E()(),I(6,"div",5)(7,"h3"),R(8,"Adicionar Novo Reino"),E(),I(9,"div",6)(10,"input",7),Ie("ngModelChange",function(s){return K(i),Te(r.novoReinoNome,s)||(r.novoReinoNome=s),Q(s)}),E(),I(11,"input",8),Ie("ngModelChange",function(s){return K(i),Te(r.novoReinoSistemaPolitico,s)||(r.novoReinoSistemaPolitico=s),Q(s)}),E(),I(12,"button",9),ae("click",function(){return K(i),Q(r.adicionarReino())}),R(13,"Adicionar Reino"),E()()(),ft(14,"hr"),I(15,"div",10)(16,"h3"),R(17,"Lista de Reinos"),E(),oe(18,B8,4,2,"div",11),Dt(19,"async"),oe(20,$8,2,0,"ng-template",null,0,Mt),E()(),oe(22,H8,16,2,"div",12)}if(t&2){let i=Bt(21);P(10),we("ngModel",r.novoReinoNome),P(),we("ngModel",r.novoReinoSistemaPolitico),P(7),z("ngIf",St(19,5,r.reinos$))("ngIfElse",i),P(4),z("ngIf",r.reinoParaEdicao)}},dependencies:[en,Gn,An,vr,ti,ei,Kn,Jr,Xr,Ir,wr,Er,Zr],styles:[".reinos-container[_ngcontent-%COMP%]{max-width:900px;margin:30px auto;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;border-bottom:1px solid #eeeeee;padding-bottom:15px}.card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2em;color:#fff;margin:0}.logout-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:10px 18px;border-radius:5px;cursor:pointer;font-size:.9em;transition:background-color .3s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.section-add-reino[_ngcontent-%COMP%], .section-list-reinos[_ngcontent-%COMP%]{margin-bottom:30px}.section-add-reino[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section-list-reinos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6em;color:#555;margin-bottom:15px;border-bottom:1px dashed #eee;padding-bottom:10px}.form-add-reino[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:flex-end;flex-wrap:wrap;margin-bottom:20px}.input-field[_ngcontent-%COMP%]{flex:1;min-width:180px;padding:10px 12px;border:1px solid #ddd;border-radius:5px;font-size:1em;box-sizing:border-box}.form-add-reino[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:10px 18px;height:42px;display:flex;align-items:center;justify-content:center;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-details[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{border:none;padding:10px 18px;border-radius:5px;cursor:pointer;font-size:.9em;transition:background-color .3s ease,transform .1s ease;white-space:nowrap}.btn-primary[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background-color:#f0ad4e;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#ec971f;transform:translateY(-1px)}.btn-details[_ngcontent-%COMP%]{background-color:#5bc0de;color:#fff}.btn-details[_ngcontent-%COMP%]:hover{background-color:#31b0d5;transform:translateY(-1px)}.btn-edit[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e67e22;transform:translateY(-1px)}.btn-delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c0392b;transform:translateY(-1px)}.reinos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.reino-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 2px 8px #0000000d;padding:20px;display:flex;flex-direction:column;justify-content:space-between;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.reino-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000001a}.reino-header[_ngcontent-%COMP%]{margin-bottom:15px}.reino-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.4em}.reino-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#3498db;transition:color .2s ease}.reino-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2980b9}.reino-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#666;font-size:.95em}.reino-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#444}.reino-actions-bottom[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px;flex-wrap:wrap}.no-items-message[_ngcontent-%COMP%], .loading-message[_ngcontent-%COMP%]{text-align:center;color:#777;padding:20px;background-color:#fff;border:1px solid #e0e0e0;border-radius:5px;box-shadow:0 1px 3px #00000008;margin-top:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px;box-shadow:0 5px 20px #0003;width:90%;max-width:500px}.modal-content[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:1.8em;color:#333;margin-bottom:20px;text-align:center;border-bottom:1px solid #eee;padding-bottom:10px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:700}.modal-content[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{width:calc(100% - 24px);margin-bottom:15px;padding:12px;border:1px solid #ddd;border-radius:5px;font-size:1em}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}"]})};var Wc=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getPartidosCollectionRef(e){return this.userProfileService.getUser().pipe(it(1),G(t=>{if(!t||!t.uid)throw new Error("Usu\xE1rio n\xE3o autenticado. N\xE3o \xE9 poss\xEDvel acessar os partidos.");return tr(this.firestore,`users/${t.uid}/reinos/${e}/partidos`)}),re(t=>(console.error("Erro ao obter refer\xEAncia da cole\xE7\xE3o de partidos:",t),Pe(()=>new Error("Falha na autentica\xE7\xE3o ou reinoId inv\xE1lido ao acessar partidos.")))))}getPartidosByReino(e){return this.getPartidosCollectionRef(e).pipe(ie(t=>{let r=vi(t,yi("idReino","==",e));return Pr(r,{idField:"id"})}),re(t=>(console.error("Erro ao obter partidos por reino:",t),j([]))))}getPartidoById(e,t){return this.getPartidosCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(nr(i)).pipe(G(o=>{if(o.exists())return X(O({},o.data()),{id:o.id})}),re(o=>(console.error(`Erro ao obter partido ${t}:`,o),j(void 0))))}))}addPartido(e,t){return this.getPartidosCollectionRef(e).pipe(ie(r=>{let i=X(O({},t),{idReino:e});return se(er(r,i))}),re(r=>(console.error("Erro ao adicionar partido:",r),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar o partido."))))).toPromise()}updatePartido(e,t){return this.getPartidosCollectionRef(e).pipe(ie(r=>{if(!t.id)throw new Error("ID do partido \xE9 obrigat\xF3rio para atualiza\xE7\xE3o.");let i=Je(r,t.id),a=t,{id:o}=a,s=Ji(a,["id"]);return se(rr(i,s))}),re(r=>(console.error(`Erro ao atualizar partido ${t.id}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel atualizar o partido."))))).toPromise()}deletePartido(e,t){return this.getPartidosCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(_i(i))}),re(r=>(console.error(`Erro ao deletar partido ${t}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel deletar o partido."))))).toPromise()}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function z8(n,e){if(n&1){let t=Ze();I(0,"li")(1,"div")(2,"strong"),R(3),E(),R(4),E(),I(5,"div")(6,"button",13),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.abrirEdicaoPartido(i))}),R(7,"Editar"),E(),I(8,"button",14),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.excluirPartido(i.id))}),R(9,"Excluir"),E()()()}if(n&2){let t=e.$implicit;P(3),ot(t.nome),P(),fo(" (",t.sigla,") - ",t.ideologia," ")}}function q8(n,e){if(n&1&&(I(0,"ul",11),oe(1,z8,10,3,"li",12),E()),n&2){let t=L().ngIf;P(),z("ngForOf",t)}}function W8(n,e){n&1&&(I(0,"p",15),R(1,"Nenhum partido cadastrado para este reino ainda. Adicione um!"),E())}function G8(n,e){if(n&1&&(I(0,"div"),oe(1,q8,2,1,"ul",10)(2,W8,2,0,"ng-template",null,1,Mt),E()),n&2){let t=e.ngIf,r=Bt(3);P(),z("ngIf",t.length>0)("ngIfElse",r)}}function K8(n,e){n&1&&(I(0,"p",16),R(1,"Carregando partidos..."),E())}function Q8(n,e){if(n&1){let t=Ze();I(0,"div",17)(1,"div",18)(2,"div",19),R(3,"Editar Partido"),E(),I(4,"form",20),ae("ngSubmit",function(){K(t);let i=L();return Q(i.salvarEdicaoPartido())}),I(5,"label",21),R(6,"Nome:"),E(),I(7,"input",22),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.partidoParaEdicao.nome,i)||(o.partidoParaEdicao.nome=i),Q(i)}),E(),I(8,"label",23),R(9,"Sigla:"),E(),I(10,"input",24),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.partidoParaEdicao.sigla,i)||(o.partidoParaEdicao.sigla=i),Q(i)}),E(),I(11,"label",25),R(12,"Ideologia:"),E(),I(13,"input",26),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.partidoParaEdicao.ideologia,i)||(o.partidoParaEdicao.ideologia=i),Q(i)}),E(),I(14,"div",27)(15,"button",28),R(16,"Salvar"),E(),I(17,"button",29),ae("click",function(){K(t);let i=L();return Q(i.cancelarEdicaoPartido())}),R(18,"Cancelar"),E()()()()()}if(n&2){let t=L();P(7),we("ngModel",t.partidoParaEdicao.nome),P(3),we("ngModel",t.partidoParaEdicao.sigla),P(3),we("ngModel",t.partidoParaEdicao.ideologia)}}var Mm=class n{constructor(e){this.partidoService=e}reinoId;partidos$;novoPartidoNome="";novoPartidoSigla="";novoPartidoIdeologia="";partidoParaEdicao=null;ngOnInit(){}ngOnChanges(e){e.reinoId&&this.reinoId&&(this.partidos$=this.partidoService.getPartidosByReino(this.reinoId))}adicionarPartido(){if(this.novoPartidoNome.trim()&&this.novoPartidoSigla.trim()&&this.reinoId){let e={nome:this.novoPartidoNome,sigla:this.novoPartidoSigla.toUpperCase(),ideologia:this.novoPartidoIdeologia,idReino:this.reinoId};this.partidoService.addPartido(this.reinoId,e).then(()=>{console.log("Partido adicionado com sucesso!"),this.novoPartidoNome="",this.novoPartidoSigla="",this.novoPartidoIdeologia=""}).catch(t=>console.error("Erro ao adicionar partido:",t))}}abrirEdicaoPartido(e){this.partidoParaEdicao=O({},e)}salvarEdicaoPartido(){this.partidoParaEdicao&&this.partidoParaEdicao.id&&this.partidoService.updatePartido(this.reinoId,this.partidoParaEdicao).then(()=>{console.log("Partido atualizado com sucesso!"),this.partidoParaEdicao=null}).catch(e=>console.error("Erro ao atualizar partido:",e))}cancelarEdicaoPartido(){this.partidoParaEdicao=null}excluirPartido(e){confirm("Tem certeza que deseja excluir este partido?")&&this.partidoService.deletePartido(this.reinoId,e).then(()=>console.log("Partido exclu\xEDdo com sucesso!")).catch(t=>console.error("Erro ao excluir partido:",t))}static \u0275fac=function(t){return new(t||n)(H(Wc))};static \u0275cmp=Xt({type:n,selectors:[["app-partidos"]],inputs:{reinoId:"reinoId"},features:[Sn],decls:12,vars:8,consts:[["loadingPartidos",""],["noPartidos",""],[1,"partidos-container"],[1,"form-add-partido"],["type","text","placeholder","Nome do Partido",3,"ngModelChange","ngModel"],["type","text","placeholder","Sigla",3,"ngModelChange","ngModel"],["type","text","placeholder","Ideologia",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf","ngIfElse"],["class","modal-overlay",4,"ngIf"],["class","partido-list",4,"ngIf","ngIfElse"],[1,"partido-list"],[4,"ngFor","ngForOf"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-partidos-message"],[1,"loading-message"],[1,"modal-overlay"],[1,"modal-content","card"],[1,"card-header"],[3,"ngSubmit"],["for","editPartidoNome"],["id","editPartidoNome","type","text","name","editPartidoNome","required","",3,"ngModelChange","ngModel"],["for","editPartidoSigla"],["id","editPartidoSigla","type","text","name","editPartidoSigla","required","",3,"ngModelChange","ngModel"],["for","editPartidoIdeologia"],["id","editPartidoIdeologia","type","text","name","editPartidoIdeologia","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit"],["type","button",3,"click"]],template:function(t,r){if(t&1){let i=Ze();I(0,"div",2)(1,"div",3)(2,"input",4),Ie("ngModelChange",function(s){return K(i),Te(r.novoPartidoNome,s)||(r.novoPartidoNome=s),Q(s)}),E(),I(3,"input",5),Ie("ngModelChange",function(s){return K(i),Te(r.novoPartidoSigla,s)||(r.novoPartidoSigla=s),Q(s)}),E(),I(4,"input",6),Ie("ngModelChange",function(s){return K(i),Te(r.novoPartidoIdeologia,s)||(r.novoPartidoIdeologia=s),Q(s)}),E(),I(5,"button",7),ae("click",function(){return K(i),Q(r.adicionarPartido())}),R(6,"Adicionar Partido"),E()(),oe(7,G8,4,2,"div",8),Dt(8,"async"),oe(9,K8,2,0,"ng-template",null,0,Mt),E(),oe(11,Q8,19,3,"div",9)}if(t&2){let i=Bt(10);P(2),we("ngModel",r.novoPartidoNome),P(),we("ngModel",r.novoPartidoSigla),P(),we("ngModel",r.novoPartidoIdeologia),P(3),z("ngIf",St(8,6,r.partidos$))("ngIfElse",i),P(4),z("ngIf",r.partidoParaEdicao)}},dependencies:[en,Gn,An,vr,ti,ei,Kn,Jr,Xr,Ir,wr,Er],styles:[".partidos-container[_ngcontent-%COMP%]{margin-top:20px}.form-add-partido[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:20px;padding:15px;background-color:#f9f9f9;border:1px solid #eee;border-radius:5px}.form-add-partido[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:150px;margin-bottom:0}.form-add-partido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.partido-list[_ngcontent-%COMP%]{list-style:none;padding:0}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fcfcfc;border:1px solid #e0e0e0;padding:12px 18px;margin-bottom:10px;border-radius:4px;display:flex;justify-content:space-between;align-items:center;font-size:.95em;box-shadow:0 1px 2px #00000008}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background-color:#f39c12}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background-color:#e67e22}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background-color:#e74c3c}.partido-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.no-partidos-message[_ngcontent-%COMP%], .loading-message[_ngcontent-%COMP%]{text-align:center;color:#777;padding:20px;background-color:#fff;border:1px solid #e0e0e0;border-radius:5px;box-shadow:0 1px 3px #00000008;margin-top:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:0;border-radius:5px;width:90%;max-width:500px;box-shadow:0 5px 15px #0000004d;position:relative}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:15px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}"]})};var Gc=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getLeisCollectionRef(e){return this.userProfileService.getUser().pipe(it(1),G(t=>{if(!t||!t.uid)throw new Error("Usu\xE1rio n\xE3o autenticado. N\xE3o \xE9 poss\xEDvel obter a cole\xE7\xE3o de leis.");return tr(this.firestore,`users/${t.uid}/reinos/${e}/leis`)}),re(t=>(console.error("Erro ao obter refer\xEAncia da cole\xE7\xE3o de leis:",t),Pe(()=>new Error("Falha na autentica\xE7\xE3o ou reinoId inv\xE1lido ao acessar leis.")))))}getLeisByReino(e){return this.getLeisCollectionRef(e).pipe(ie(t=>{let r=vi(t,yi("idReino","==",e));return Pr(r,{idField:"id"})}),re(t=>(console.error("Erro ao obter leis por reino:",t),j([]))))}getLeiById(e,t){return this.getLeisCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(nr(i)).pipe(G(o=>{if(o.exists())return X(O({},o.data()),{id:o.id})}),re(o=>(console.error(`Erro ao obter lei ${t}:`,o),j(void 0))))}))}addLei(e,t){return this.getLeisCollectionRef(e).pipe(ie(r=>{let i=X(O({},t),{idReino:e});return se(er(r,i))}),re(r=>(console.error("Erro ao adicionar lei:",r),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar a lei."))))).toPromise()}updateLei(e,t){return this.getLeisCollectionRef(e).pipe(ie(r=>{if(!t.id)throw new Error("ID da lei \xE9 obrigat\xF3rio para atualiza\xE7\xE3o.");let i=Je(r,t.id),a=t,{id:o}=a,s=Ji(a,["id"]);return se(rr(i,s))}),re(r=>(console.error(`Erro ao atualizar lei ${t.id}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel atualizar a lei."))))).toPromise()}deleteLei(e,t){return this.getLeisCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(_i(i))}),re(r=>(console.error(`Erro ao deletar lei ${t}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel deletar a lei."))))).toPromise()}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lo=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getEleicoesCollectionRef(e){return this.userProfileService.getUser().pipe(it(1),G(t=>{if(!t||!t.uid)throw new Error("Usu\xE1rio n\xE3o autenticado. N\xE3o \xE9 poss\xEDvel acessar as elei\xE7\xF5es.");return tr(this.firestore,`users/${t.uid}/reinos/${e}/eleicoes`)}),re(t=>(console.error("Erro ao obter refer\xEAncia da cole\xE7\xE3o de elei\xE7\xF5es:",t),Pe(()=>new Error("Falha na autentica\xE7\xE3o ou reinoId inv\xE1lido ao acessar elei\xE7\xF5es.")))))}addEleicao(e,t){return this.getEleicoesCollectionRef(e).pipe(ie(r=>se(er(r,t))),re(r=>(console.error("Erro ao adicionar elei\xE7\xE3o:",r),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar a elei\xE7\xE3o."))))).toPromise()}getEleicoesByReino(e){return this.getEleicoesCollectionRef(e).pipe(ie(t=>{let r=vi(t,yi("idReino","==",e));return se(eF(r)).pipe(G(i=>i.docs.map(o=>X(O({},o.data()),{id:o.id}))),re(i=>(console.error("Erro ao obter elei\xE7\xF5es por reino:",i),j([]))))}))}getEleicaoById(e,t){return this.getEleicoesCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(nr(i)).pipe(G(o=>{if(o.exists())return X(O({},o.data()),{id:o.id})}),re(o=>(console.error(`Erro ao obter elei\xE7\xE3o ${t}:`,o),j(void 0))))}))}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var cF=(n,e)=>({"status-ativa":n,"status-inativa":e});function Y8(n,e){if(n&1&&(I(0,"p"),R(1),E()),n&2){let t=L().$implicit;P(),Ne("Efeito: ",t.efeito,"")}}function Z8(n,e){if(n&1){let t=Ze();I(0,"li")(1,"div")(2,"strong"),R(3),E(),R(4),I(5,"span",17),R(6),E(),I(7,"p"),R(8),E(),oe(9,Y8,2,1,"p",18),I(10,"div",19)(11,"button",8),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.abrirEdicaoLei(i))}),R(12,"Editar"),E(),I(13,"button",8),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.excluirLei(i.id))}),R(14,"Excluir"),E(),I(15,"button",8),ae("click",function(){let i=K(t).$implicit,o=L(3);return Q(o.abrirModalVotacao(i))}),R(16,"Simular Vota\xE7\xE3o"),E()()()()}if(n&2){let t=e.$implicit;ms("lei-ativa",t.ativa)("lei-inativa",!t.ativa),P(3),ot(t.nome),P(),Ne(" (Criada em: ",t.dataCriacao,") "),P(),z("ngClass",pE(10,cF,t.ativa,!t.ativa)),P(),Ne(" ",t.ativa?"Ativa":"Inativa"," "),P(2),ot(t.descricao),P(),z("ngIf",t.efeito)}}function J8(n,e){if(n&1&&(I(0,"ul",15),oe(1,Z8,17,13,"li",16),E()),n&2){let t=L().ngIf,r=L();P(),z("ngForOf",t)("ngForTrackBy",r.trackByLeiId)}}function X8(n,e){n&1&&(I(0,"p",10),R(1,"Nenhuma lei personalizada adicionada ainda para este reino."),E())}function e7(n,e){if(n&1&&(I(0,"div"),oe(1,J8,2,2,"ul",14)(2,X8,2,0,"ng-template",null,1,Mt),E()),n&2){let t=e.ngIf,r=Bt(3);P(),z("ngIf",t.length>0)("ngIfElse",r)}}function t7(n,e){if(n&1&&(I(0,"span",17),R(1),E()),n&2){let t=L().$implicit;z("ngClass",pE(2,cF,t.ativa,!t.ativa)),P(),Ne(" (Status: ",t.ativa?"Ativa":"Inativa",") ")}}function n7(n,e){if(n&1&&(I(0,"p"),R(1),E()),n&2){let t=L().$implicit;P(),Ne("Efeito: ",t.efeito,"")}}function r7(n,e){if(n&1){let t=Ze();I(0,"button",8),ae("click",function(){K(t);let i=L().$implicit,o=L();return Q(o.abrirEdicaoLei(i))}),R(1,"Editar"),E()}}function i7(n,e){if(n&1){let t=Ze();I(0,"button",8),ae("click",function(){K(t);let i=L().$implicit,o=L();return Q(o.abrirModalVotacao(i))}),R(1,"Simular Vota\xE7\xE3o"),E()}}function o7(n,e){if(n&1){let t=Ze();I(0,"li")(1,"div",20)(2,"input",21),ae("change",function(){let i=K(t).$implicit,o=L();return Q(o.onLeiPreDefinidaChange(i))}),E(),I(3,"label",22)(4,"strong"),R(5),E(),oe(6,t7,2,5,"span",23),I(7,"p"),R(8),E(),oe(9,n7,2,1,"p",18),E(),I(10,"div",19),oe(11,r7,2,0,"button",24)(12,i7,2,0,"button",24),E()()()}if(n&2){let t=e.$implicit,r=L();P(),ms("lei-ativa",t.ativa)("lei-inativa",!t.ativa),P(),z("id","lei-predef-"+t.nome)("checked",t.adotada)("disabled",r.leiParaEdicao!==null),P(),z("for","lei-predef-"+t.nome),P(2),ot(t.nome),P(),z("ngIf",t.adotada),P(2),ot(t.descricao),P(),z("ngIf",t.efeito),P(2),z("ngIf",t.adotada),P(),z("ngIf",t.adotada)}}function s7(n,e){n&1&&(I(0,"p",10),R(1,"Carregando leis personalizadas..."),E())}function a7(n,e){if(n&1){let t=Ze();I(0,"div")(1,"label",38),R(2,"Ativa:"),E(),I(3,"input",39),Ie("ngModelChange",function(i){K(t);let o=L(2);return Te(o.leiParaEdicao.ativa,i)||(o.leiParaEdicao.ativa=i),Q(i)}),E()()}if(n&2){let t=L(2);P(3),we("ngModel",t.leiParaEdicao.ativa)}}function c7(n,e){if(n&1){let t=Ze();I(0,"div",25)(1,"div",26)(2,"div",27),R(3,"Editar Lei"),E(),I(4,"form",28),ae("ngSubmit",function(){K(t);let i=L();return Q(i.salvarEdicaoLei())}),I(5,"label",29),R(6,"Nome:"),E(),I(7,"input",30),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.leiParaEdicao.nome,i)||(o.leiParaEdicao.nome=i),Q(i)}),E(),I(8,"label",31),R(9,"Descri\xE7\xE3o:"),E(),I(10,"textarea",32),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.leiParaEdicao.descricao,i)||(o.leiParaEdicao.descricao=i),Q(i)}),E(),I(11,"label",33),R(12,"Efeito:"),E(),I(13,"input",34),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.leiParaEdicao.efeito,i)||(o.leiParaEdicao.efeito=i),Q(i)}),E(),oe(14,a7,4,1,"div",18),I(15,"div",35)(16,"button",36),R(17,"Salvar"),E(),I(18,"button",37),ae("click",function(){K(t);let i=L();return Q(i.cancelarEdicaoLei())}),R(19,"Cancelar"),E()()()()()}if(n&2){let t=L();P(7),we("ngModel",t.leiParaEdicao.nome),z("disabled",t.editandoLeiPreDefinida),P(3),we("ngModel",t.leiParaEdicao.descricao),P(3),we("ngModel",t.leiParaEdicao.efeito),P(),z("ngIf",t.editandoLeiPreDefinida)}}function l7(n,e){if(n&1&&(I(0,"p"),R(1),E()),n&2){let t=L(3);P(),Ne("Efeito: ",t.leiParaVotacao==null?null:t.leiParaVotacao.efeito,"")}}function u7(n,e){if(n&1){let t=Ze();I(0,"div")(1,"p"),R(2),E(),I(3,"p"),R(4),E(),oe(5,l7,2,1,"p",18),I(6,"label",40),R(7,"Quantidade de Votos:"),E(),I(8,"input",41),Ie("ngModelChange",function(i){K(t);let o=L(2);return Te(o.quantidadeVotosInput,i)||(o.quantidadeVotosInput=i),Q(i)}),E(),I(9,"button",8),ae("click",function(){K(t);let i=L(2);return Q(i.simularVotacao(i.leiParaVotacao))}),R(10,"Simular Vota\xE7\xE3o"),E(),I(11,"button",8),ae("click",function(){K(t);let i=L(2);return Q(i.fecharModalVotacao())}),R(12,"Cancelar"),E()()}if(n&2){let t=L(2);P(2),Ne('A lei "',t.leiParaVotacao==null?null:t.leiParaVotacao.nome,'" ser\xE1 submetida \xE0 vota\xE7\xE3o.'),P(2),Ne("Descri\xE7\xE3o: ",t.leiParaVotacao==null?null:t.leiParaVotacao.descricao,""),P(),z("ngIf",t.leiParaVotacao==null?null:t.leiParaVotacao.efeito),P(3),we("ngModel",t.quantidadeVotosInput)}}function d7(n,e){if(n&1){let t=Ze();I(0,"div")(1,"h5"),R(2,"Resultado Final:"),E(),I(3,"p"),R(4),E(),I(5,"p"),R(6),E(),I(7,"p"),R(8),E(),I(9,"button",8),ae("click",function(){K(t);let i=L(2);return Q(i.fecharModalVotacao())}),R(10,"Fechar"),E()()}if(n&2){let t=L(2);P(4),ot(t.resultadoVotacao.mensagem),P(2),Ne("Votos a favor: ",t.votosFavor,""),P(2),Ne("Votos contra: ",t.votosContra,"")}}function h7(n,e){if(n&1&&(I(0,"div",25)(1,"div",26)(2,"div",27),R(3),E(),oe(4,u7,13,4,"div",18)(5,d7,11,3,"div",18),E()()),n&2){let t=L();P(3),Ne("Vota\xE7\xE3o da Lei: ",t.leiParaVotacao==null?null:t.leiParaVotacao.nome,""),P(),z("ngIf",!t.mostrarResultadoVotacao),P(),z("ngIf",t.mostrarResultadoVotacao)}}var Nm=class n{constructor(e,t){this.leiService=e;this.eleicaoService=t;this.leisPreDefinidas=[{nome:"Lei da Paz Universal",descricao:"Pro\xEDbe declara\xE7\xF5es de guerra e exige negocia\xE7\xF5es diplom\xE1ticas.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Preserva\xE7\xE3o da \xDAltima Floresta",descricao:"Protege a floresta remanescente em G\xE1lia, com penalidades severas para desmatamento.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Expans\xE3o Sustent\xE1vel",descricao:"Regula o crescimento urbano e agr\xEDcola para minimizar o impacto ambiental.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Energia Limpa",descricao:"Incentiva o uso de fontes de energia renov\xE1veis e restringe combust\xEDveis f\xF3sseis.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Reciclagem Obrigat\xF3ria",descricao:"Exige a reciclagem de materiais e reduz o desperd\xEDcio.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Qualidade do Ar",descricao:"Estabelece padr\xF5es para a qualidade do ar e controla emiss\xF5es industriais.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Liberdade Religiosa",descricao:"Garante a liberdade de culto para todas as religi\xF5es, mas imp\xF5e restri\xE7\xF5es para evitar conflitos (ex: pro\xEDbe proselitismo agressivo).",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei de Incentivo \xE0 Imigra\xE7\xE3o",descricao:"Facilita a entrada e perman\xEAncia de imigrantes qualificados.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei de Controle de Fronteiras",descricao:"Imp\xF5e restri\xE7\xF5es rigorosas \xE0 imigra\xE7\xE3o e fortalece a seguran\xE7a nas fronteiras.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei de Integra\xE7\xE3o de Imigrantes",descricao:"Oferece programas de l\xEDngua e cultura para novos imigrantes, equilibrando a necessidade de m\xE3o de obra com a preserva\xE7\xE3o da cultura local.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Integra\xE7\xE3o Cultural",descricao:"Incentiva a integra\xE7\xE3o dos imigrantes na sociedade, mas respeitando suas tradi\xE7\xF5es.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Prote\xE7\xE3o aos N\xF4mades",descricao:"Garante direitos b\xE1sicos aos n\xF4mades e tenta criar solu\xE7\xF5es para sua integra\xE7\xE3o ou reassentamento.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Educa\xE7\xE3o Ambiental",descricao:"Inclui a preserva\xE7\xE3o ambiental no curr\xEDculo escolar.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Responsabilidade Corporativa",descricao:"Exige que empresas minimizem seu impacto ambiental.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei do Casamento Igualit\xE1rio",descricao:"Legaliza o casamento entre pessoas do mesmo sexo.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Autodetermina\xE7\xE3o Reprodutiva",descricao:"Garante o direito ao aborto seguro e legal.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei Antidiscrimina\xE7\xE3o",descricao:"Pro\xEDbe a discrimina\xE7\xE3o com base em ra\xE7a, religi\xE3o, orienta\xE7\xE3o sexual, etc.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Liberdade de Express\xE3o",descricao:"Garante a liberdade de express\xE3o, desde que n\xE3o promova viol\xEAncia ou \xF3dio.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei de Prote\xE7\xE3o de Dados",descricao:"Regula a coleta e uso de dados pessoais por empresas e governo.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei do Sal\xE1rio M\xEDnimo Universal",descricao:"Estabelece um sal\xE1rio m\xEDnimo garantido para todos os cidad\xE3os.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Sa\xFAde P\xFAblica Universal",descricao:"Garante acesso gratuito e de qualidade a servi\xE7os de sa\xFAde para todos.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Educa\xE7\xE3o Gratuita",descricao:"Oferece educa\xE7\xE3o p\xFAblica gratuita em todos os n\xEDveis, do prim\xE1rio ao superior.",idReino:"",dataCriacao:"",ativa:!1,efeito:""},{nome:"Lei da Propriedade Privada Limitada",descricao:"Limita a quantidade de propriedade que um indiv\xEDduo ou corpora\xE7\xE3o pode possuir.",idReino:"",dataCriacao:"",ativa:!1,efeito:""}]}reinoId;leisDoReino$;leisPersonalizadasDoReino$;leisPreDefinidas=[];leiParaEdicao=null;editandoLeiPreDefinida=!1;novaLeiNome="";novaLeiDescricao="";novaLeiEfeito="";mostrarModalVotacao=!1;leiParaVotacao=null;votosFavor=0;votosContra=0;mostrarResultadoVotacao=!1;resultadoVotacao={leiNome:"",status:"",mensagem:""};quantidadeVotosInput=0;ngOnInit(){}ngOnChanges(e){e.reinoId&&this.reinoId&&this.carregarLeisDoReino()}carregarLeisDoReino(){this.leisDoReino$=this.leiService.getLeisByReino(this.reinoId).pipe(mt(e=>{this.leisPreDefinidas.forEach(t=>{let r=e.find(i=>i.nome===t.nome);r?(t.adotada=!0,t.ativa=r.ativa,t.id=r.id):(t.adotada=!1,t.ativa=!1,t.id=void 0)})}),re(e=>(console.error("Erro ao carregar leis do reino:",e),j([]))))}onLeiPreDefinidaChange(e){return v(this,null,function*(){if(e.adotada=!e.adotada,e.ativa=e.adotada,e.adotada){let t={nome:e.nome,descricao:e.descricao,efeito:e.efeito||"",dataCriacao:new Date().toISOString().split("T")[0],ativa:!0,idReino:this.reinoId};try{let r=yield this.leiService.addLei(this.reinoId,t);e.id=r.id,console.log(`Lei predefinida '${t.nome}' adicionada ao reino!`)}catch(r){console.error(`Erro ao adicionar lei predefinida '${t.nome}':`,r),e.adotada=!1,e.ativa=!1}}else if(e.id)try{yield this.leiService.deleteLei(this.reinoId,e.id),e.id=void 0,console.log(`Lei predefinida '${e.nome}' removida do reino!`)}catch(t){console.error(`Erro ao remover lei predefinida '${e.nome}':`,t),e.adotada=!0,e.ativa=!0}this.carregarLeisDoReino()})}adicionarLeiPersonalizada(){if(this.novaLeiNome.trim()&&this.novaLeiDescricao.trim()&&this.reinoId){let e={nome:this.novaLeiNome,descricao:this.novaLeiDescricao,efeito:this.novaLeiEfeito,dataCriacao:new Date().toISOString().split("T")[0],ativa:!1,idReino:this.reinoId};this.leiService.addLei(this.reinoId,e).then(()=>{console.log("Lei personalizada adicionada com sucesso!"),this.novaLeiNome="",this.novaLeiDescricao="",this.novaLeiEfeito="",this.carregarLeisDoReino()}).catch(t=>console.error("Erro ao adicionar lei personalizada:",t))}}abrirEdicaoLei(e){this.leiParaEdicao=O({},e),this.editandoLeiPreDefinida=this.leisPreDefinidas.some(t=>t.nome===e.nome&&t.id===e.id)}salvarEdicaoLei(){if(this.leiParaEdicao&&this.leiParaEdicao.id){if(this.editandoLeiPreDefinida){let e=this.leisPreDefinidas.find(t=>t.id===this.leiParaEdicao?.id);e&&(this.leiParaEdicao.ativa=e.adotada)}this.leiService.updateLei(this.reinoId,this.leiParaEdicao).then(()=>{console.log("Lei atualizada com sucesso!"),this.leiParaEdicao=null,this.editandoLeiPreDefinida=!1,this.carregarLeisDoReino()}).catch(e=>console.error("Erro ao atualizar lei:",e))}}cancelarEdicaoLei(){this.leiParaEdicao=null,this.editandoLeiPreDefinida=!1}excluirLei(e){confirm("Tem certeza que deseja excluir esta lei?")&&this.leiService.deleteLei(this.reinoId,e).then(()=>{console.log("Lei exclu\xEDda com sucesso!");let t=this.leisPreDefinidas.find(r=>r.id===e);t&&(t.adotada=!1,t.ativa=!1,t.id=void 0),this.carregarLeisDoReino()}).catch(t=>console.error("Erro ao excluir lei:",t))}abrirModalVotacao(e){this.leiParaVotacao=e,this.quantidadeVotosInput=0,this.votosFavor=0,this.votosContra=0,this.mostrarResultadoVotacao=!1,this.mostrarModalVotacao=!0}fecharModalVotacao(){this.mostrarModalVotacao=!1,this.leiParaVotacao=null,this.mostrarResultadoVotacao=!1,this.quantidadeVotosInput=0}simularVotacao(e){if(this.quantidadeVotosInput<=0){alert("Por favor, digite uma quantidade de votos v\xE1lida (maior que zero).");return}let t=this.quantidadeVotosInput;this.votosFavor=0,this.votosContra=0;for(let i=0;i<t;i++)Math.random()<.5?this.votosFavor++:this.votosContra++;let r=this.votosFavor>this.votosContra;if(this.resultadoVotacao.leiNome=e.nome,this.resultadoVotacao.status=r?"Aprovada":"Reprovada",this.resultadoVotacao.mensagem=r?`A lei "${e.nome}" foi APROVADA com ${this.votosFavor} votos a favor e ${this.votosContra} contra.`:`A lei "${e.nome}" foi REPROVADA com ${this.votosFavor} votos a favor e ${this.votosContra} contra. (Total de votos: ${this.votosFavor+this.votosContra})`,this.mostrarResultadoVotacao=!0,r){let i=X(O({},e),{ativa:!0});i.id&&this.leiService.updateLei(this.reinoId,i).then(()=>{console.log(`Lei '${e.nome}' ativada com sucesso!`);let o=this.leisPreDefinidas.find(s=>s.id===i.id);o&&(o.ativa=!0)}).catch(o=>console.error("Erro ao ativar lei ap\xF3s vota\xE7\xE3o:",o))}else{let i=X(O({},e),{ativa:!1});i.id&&this.leiService.updateLei(this.reinoId,i).then(()=>{console.log(`Lei '${e.nome}' desativada ap\xF3s reprova\xE7\xE3o!`);let o=this.leisPreDefinidas.find(s=>s.id===i.id);o&&(o.ativa=!1)}).catch(o=>console.error("Erro ao desativar lei ap\xF3s vota\xE7\xE3o:",o))}this.carregarLeisDoReino()}trackByLeiId(e,t){return t.id||t.nome}static \u0275fac=function(t){return new(t||n)(H(Gc),H(Lo))};static \u0275cmp=Xt({type:n,selectors:[["app-leis"]],inputs:{reinoId:"reinoId"},features:[Sn],decls:26,vars:11,consts:[["loadingLeis",""],["noLeis",""],[1,"leis-container"],[1,"section-container"],[1,"form-add-lei"],["type","text","placeholder","Nome da Nova Lei Personalizada","name","novaLeiNome","required","",3,"ngModelChange","ngModel"],["placeholder","Descri\xE7\xE3o da Nova Lei","name","novaLeiDescricao","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Efeito da Nova Lei (opcional)","name","novaLeiEfeito",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf","ngIfElse"],[1,"info-message"],[1,"leis-list","predefinidas-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","modal-overlay",4,"ngIf"],["class","leis-list",4,"ngIf","ngIfElse"],[1,"leis-list"],[3,"lei-ativa","lei-inativa",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[4,"ngIf"],[1,"lei-actions"],[1,"lei-predefinida-item"],["type","checkbox",3,"change","id","checked","disabled"],[3,"for"],[3,"ngClass",4,"ngIf"],[3,"click",4,"ngIf"],[1,"modal-overlay"],[1,"modal-content","card"],[1,"card-header"],[3,"ngSubmit"],["for","editLeiNome"],["id","editLeiNome","type","text","name","editLeiNome","required","",3,"ngModelChange","ngModel","disabled"],["for","editLeiDescricao"],["id","editLeiDescricao","name","editLeiDescricao","required","",3,"ngModelChange","ngModel"],["for","editLeiEfeito"],["id","editLeiEfeito","type","text","name","editLeiEfeito",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit"],["type","button",3,"click"],["for","editLeiAtiva"],["id","editLeiAtiva","type","checkbox","name","editLeiAtiva","disabled","",3,"ngModelChange","ngModel"],["for","quantidadeVotos"],["id","quantidadeVotos","type","number","name","quantidadeVotos","min","1","required","",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=Ze();I(0,"div",2)(1,"h4"),R(2,"Gerenciar Leis"),E(),I(3,"div",3)(4,"h5"),R(5,"Leis Personalizadas do Reino"),E(),I(6,"div",4)(7,"input",5),Ie("ngModelChange",function(s){return K(i),Te(r.novaLeiNome,s)||(r.novaLeiNome=s),Q(s)}),E(),I(8,"textarea",6),Ie("ngModelChange",function(s){return K(i),Te(r.novaLeiDescricao,s)||(r.novaLeiDescricao=s),Q(s)}),E(),I(9,"input",7),Ie("ngModelChange",function(s){return K(i),Te(r.novaLeiEfeito,s)||(r.novaLeiEfeito=s),Q(s)}),E(),I(10,"button",8),ae("click",function(){return K(i),Q(r.adicionarLeiPersonalizada())}),R(11,"Adicionar Lei Personalizada"),E()(),oe(12,e7,4,2,"div",9),Dt(13,"async"),E(),ft(14,"hr"),I(15,"div",3)(16,"h5"),R(17,"Leis Predefinidas"),E(),I(18,"p",10),R(19,'Marque a caixa para "adotar" uma lei predefinida no seu reino. A lei ser\xE1 automaticamente ativada.'),E(),I(20,"ul",11),oe(21,o7,13,14,"li",12),E()(),oe(22,s7,2,0,"ng-template",null,0,Mt)(24,c7,20,5,"div",13)(25,h7,6,3,"div",13),E()}if(t&2){let i=Bt(23);P(7),we("ngModel",r.novaLeiNome),P(),we("ngModel",r.novaLeiDescricao),P(),we("ngModel",r.novaLeiEfeito),P(3),z("ngIf",St(13,9,r.leisDoReino$))("ngIfElse",i),P(9),z("ngForOf",r.leisPreDefinidas)("ngForTrackBy",r.trackByLeiId),P(3),z("ngIf",r.leiParaEdicao),P(),z("ngIf",r.mostrarModalVotacao)}},dependencies:[en,SE,Gn,An,vr,ti,ei,Kn,Ou,ww,Jr,Xr,Ir,Dw,wr,Er],styles:['.leis-container[_ngcontent-%COMP%]{padding:25px;max-width:1200px;width:95%;margin:20px auto;background-color:#f9f9f9;border-radius:10px;box-shadow:0 4px 10px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h4[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px;font-size:2.2em;border-bottom:2px solid #e0e0e0;padding-bottom:15px;letter-spacing:.8px;font-weight:600}.section-container[_ngcontent-%COMP%]{background-color:#fff;padding:25px;margin-bottom:35px;border-radius:10px;box-shadow:0 2px 8px #00000014}h5[_ngcontent-%COMP%]{color:#555;margin-top:0;margin-bottom:25px;font-size:1.8em;border-bottom:1px solid #f0f0f0;padding-bottom:12px;text-align:center;font-weight:500}.info-message[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#007bb6;border-left:5px solid #00acc1;padding:15px 20px;margin-bottom:25px;border-radius:6px;font-size:1em;line-height:1.5}.form-add-lei[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;margin-bottom:30px;padding:20px;border:1px dashed #e0e0e0;border-radius:8px;background-color:#fcfcfc;max-width:600px;margin-left:auto;margin-right:auto;align-items:center}.form-add-lei[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-add-lei[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:14px;border:1px solid #ccc;border-radius:6px;font-size:1.05em;box-sizing:border-box;transition:border-color .2s ease,box-shadow .2s ease}.form-add-lei[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-add-lei[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff40;outline:none}.form-add-lei[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-add-lei[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:14px 25px;border:none;border-radius:6px;cursor:pointer;font-size:1.15em;font-weight:700;transition:background-color .3s ease,transform .2s ease}.form-add-lei[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px)}.leis-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fefefe;border:1px solid #e0e0e0;border-radius:8px;padding:20px 20px 20px 35px;margin-bottom:18px;box-shadow:0 2px 8px #0000000d;transition:transform .2s ease,box-shadow .2s ease;display:flex;flex-direction:column;position:relative}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:8px;border-radius:8px 0 0 8px}.lei-ativa[_ngcontent-%COMP%]:before{background-color:#28a745}.lei-inativa[_ngcontent-%COMP%]:before{background-color:#dc3545}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 15px #0000001a}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.4em;color:#222;margin-bottom:5px}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1em;line-height:1.7;margin-top:10px;margin-bottom:10px}.lei-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px;justify-content:flex-end;flex-wrap:wrap}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:5px;cursor:pointer;font-size:.95em;font-weight:500;transition:background-color .2s ease,transform .2s ease}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){background-color:#007bff;color:#fff}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1):hover{background-color:#0069d9}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){background-color:#dc3545;color:#fff}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2):hover{background-color:#c82333}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){background-color:#ffc107;color:#333}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3):hover{background-color:#e0a800}.status-ativa[_ngcontent-%COMP%], .status-inativa[_ngcontent-%COMP%]{padding:4px 10px;border-radius:15px;font-size:.85em;font-weight:600;display:inline-block;margin-left:10px;vertical-align:middle;text-transform:uppercase;letter-spacing:.5px}.status-ativa[_ngcontent-%COMP%]{background-color:#e6ffe6;border:1px solid #4CAF50;color:#4caf50}.status-inativa[_ngcontent-%COMP%]{background-color:#ffe6e6;border:1px solid #dc3545;color:#dc3545}.predefinidas-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px;margin-top:20px}.predefinidas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;padding:18px 18px 18px 35px;background-color:#eef7ee;border:1px solid #d4edda;border-radius:10px;box-shadow:0 2px 5px #0000000d;transition:transform .2s ease,box-shadow .2s ease,background-color .2s ease;position:relative}.predefinidas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:8px;border-radius:10px 0 0 10px}.predefinidas-list[_ngcontent-%COMP%]   li.lei-ativa[_ngcontent-%COMP%]:before{background-color:#28a745}.predefinidas-list[_ngcontent-%COMP%]   li.lei-inativa[_ngcontent-%COMP%]:before{background-color:#dc3545}.predefinidas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 12px #0000001a;background-color:#e0f2e0}.lei-predefinida-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:100%}.lei-predefinida-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{min-width:22px;min-height:22px;margin-right:10px;cursor:pointer;accent-color:#28a745;align-self:flex-start}.lei-predefinida-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;align-items:flex-start;width:100%;margin-bottom:10px}.lei-predefinida-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;flex-grow:1;display:flex;flex-direction:column;margin:0}.lei-predefinida-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2em;color:#333;margin-bottom:5px}.lei-predefinida-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;line-height:1.6;margin-top:5px;margin-bottom:5px}.predefinidas-list[_ngcontent-%COMP%]   .lei-actions[_ngcontent-%COMP%]{margin-top:auto;justify-content:center;gap:8px;width:100%}.predefinidas-list[_ngcontent-%COMP%]   .lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:.85em}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:35px;border-radius:12px;box-shadow:0 8px 20px #0006;width:90%;max-width:550px;position:relative;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:1.6em;color:#333;margin-bottom:25px;border-bottom:1px solid #e0e0e0;padding-bottom:15px;text-align:center;font-weight:600}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:700;color:#444;font-size:.95em}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:calc(100% - 24px);padding:12px;margin-bottom:20px;border:1px solid #bbb;border-radius:6px;font-size:1em;box-sizing:border-box;transition:border-color .2s ease}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff33;outline:none}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px}.modal-actions[_ngcontent-%COMP%]{margin-top:25px;display:flex;justify-content:flex-end;gap:15px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 22px;border:none;border-radius:5px;cursor:pointer;font-size:1.05em;font-weight:600;transition:background-color .3s ease,transform .2s ease}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px)}.modal-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:translateY(-2px)}.chart-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:25px auto 10px;position:relative;height:280px}.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:100%}.success-message[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border:1px solid #c3e6cb;padding:15px;border-radius:5px;margin-bottom:20px;font-weight:500}.error-message[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border:1px solid #f5c6cb;padding:15px;border-radius:5px;margin-bottom:20px;font-weight:500}@media (max-width: 768px){.leis-container[_ngcontent-%COMP%]{padding:15px;width:100%;margin:10px auto}.section-container[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.form-add-lei[_ngcontent-%COMP%]{max-width:100%}.leis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .predefinidas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:25px}.predefinidas-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px}h4[_ngcontent-%COMP%]{font-size:1.8em}h5[_ngcontent-%COMP%]{font-size:1.4em}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 10px;font-size:.8em}.modal-content[_ngcontent-%COMP%]{padding:20px;max-width:95%}}@media (max-width: 480px){.predefinidas-list[_ngcontent-%COMP%]{grid-template-columns:1fr}.lei-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.lei-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};var km=class n{constructor(e,t){this.firestore=e;this.userProfileService=t}getRegioesCollectionRef(e){return this.userProfileService.getUser().pipe(it(1),G(t=>{if(!t||!t.uid)throw new Error("Usu\xE1rio n\xE3o autenticado. N\xE3o \xE9 poss\xEDvel acessar as regi\xF5es.");return tr(this.firestore,`users/${t.uid}/reinos/${e}/regioes`)}),re(t=>(console.error("Erro ao obter refer\xEAncia da cole\xE7\xE3o de regi\xF5es:",t),Pe(()=>new Error("Falha na autentica\xE7\xE3o ou reinoId inv\xE1lido ao acessar regi\xF5es.")))))}getRegioesByReino(e){return this.getRegioesCollectionRef(e).pipe(ie(t=>{let r=vi(t,yi("idReino","==",e));return Pr(r,{idField:"id"})}),re(t=>(console.error("Erro ao obter regi\xF5es por reino:",t),j([]))))}getRegiaoById(e,t){return this.getRegioesCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(nr(i)).pipe(G(o=>{if(o.exists())return X(O({},o.data()),{id:o.id})}),re(o=>(console.error(`Erro ao obter regi\xE3o ${t}:`,o),j(void 0))))}))}addRegiao(e,t){return this.getRegioesCollectionRef(e).pipe(ie(r=>{let i=X(O({},t),{idReino:e});return se(er(r,i))}),re(r=>(console.error("Erro ao adicionar regi\xE3o:",r),Pe(()=>new Error("N\xE3o foi poss\xEDvel adicionar a regi\xE3o."))))).toPromise()}updateRegiao(e,t){return this.getRegioesCollectionRef(e).pipe(ie(r=>{if(!t.id)throw new Error("ID da regi\xE3o \xE9 obrigat\xF3rio para atualiza\xE7\xE3o.");let i=Je(r,t.id),a=t,{id:o}=a,s=Ji(a,["id"]);return se(rr(i,s))}),re(r=>(console.error(`Erro ao atualizar regi\xE3o ${t.id}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel atualizar a regi\xE3o."))))).toPromise()}deleteRegiao(e,t){return this.getRegioesCollectionRef(e).pipe(ie(r=>{let i=Je(r,t);return se(_i(i))}),re(r=>(console.error(`Erro ao deletar regi\xE3o ${t}:`,r),Pe(()=>new Error("N\xE3o foi poss\xEDvel deletar a regi\xE3o."))))).toPromise()}static \u0275fac=function(t){return new(t||n)(Y(xt),Y(on))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var p7=n=>["/reinos",n,"historico-eleicoes"];function g7(n,e){if(n&1&&(I(0,"p"),R(1),E()),n&2){let t=L().$implicit;P(),Ne("Fundada em: ",t.dataCriacao,"")}}function m7(n,e){if(n&1&&(I(0,"option",36),R(1),E()),n&2){let t=e.$implicit;z("value",t.nome),P(),fo("",t.nome," (",t.sigla,")")}}function _7(n,e){if(n&1&&(Zl(0),oe(1,m7,2,3,"option",35),Jl()),n&2){let t=e.ngIf;P(),z("ngForOf",t)}}function v7(n,e){if(n&1&&(I(0,"p"),R(1),Dt(2,"number"),E()),n&2){let t=L().$implicit;P(),Ne("Popula\xE7\xE3o: ",St(2,1,t.populacao),"")}}function y7(n,e){if(n&1&&(I(0,"p"),R(1),E()),n&2){let t=L().$implicit;P(),Ne("Economia: ",t.economia,"")}}function E7(n,e){if(n&1){let t=Ze();I(0,"li")(1,"div")(2,"strong"),R(3),E(),oe(4,v7,3,3,"p",10)(5,y7,2,1,"p",10),I(6,"p"),R(7),E()(),I(8,"div",40)(9,"button",24),ae("click",function(){let i=K(t).$implicit,o=L(9);return Q(o.editarCidade(i))}),R(10,"Editar"),E(),I(11,"button",25),ae("click",function(){let i=K(t).$implicit,o=L(4).$implicit,s=L(5);return Q(s.excluirCidade(i.id,o.id))}),R(12,"Excluir"),E()()()}if(n&2){let t=e.$implicit;P(3),ot(t.nome),P(),z("ngIf",t.populacao),P(),z("ngIf",t.economia),P(2),Ne("Partido Governante: ",t.partidoGovernante||"Nenhum","")}}function w7(n,e){if(n&1&&(I(0,"ul",38),oe(1,E7,13,4,"li",39),E()),n&2){let t=L().ngIf,r=L(2).$implicit,i=L(5);P(),z("ngForOf",i.getCitiesForRegion(r.id,t))("ngForTrackBy",i.trackByCidadeId)}}function I7(n,e){n&1&&(I(0,"p",41),R(1,"Nenhuma cidade cadastrada nesta regi\xE3o ainda."),E())}function C7(n,e){if(n&1&&(I(0,"div"),oe(1,w7,2,2,"ul",37)(2,I7,2,0,"ng-template",null,4,Mt),E()),n&2){let t=e.ngIf,r=Bt(3),i=L(2).$implicit,o=L(5);P(),z("ngIf",o.getCitiesForRegion(i.id,t).length>0)("ngIfElse",r)}}function b7(n,e){n&1&&(I(0,"p",42),R(1,"Carregando cidades..."),E())}function T7(n,e){if(n&1){let t=Ze();I(0,"div",28),ft(1,"hr"),I(2,"h5"),R(3),E(),I(4,"div",29)(5,"input",30),Ie("ngModelChange",function(i){K(t);let o=L().$implicit,s=L(5);return Te(s.novaCidadeIdRegiao[o.id].nome,i)||(s.novaCidadeIdRegiao[o.id].nome=i),Q(i)}),E(),I(6,"input",31),Ie("ngModelChange",function(i){K(t);let o=L().$implicit,s=L(5);return Te(s.novaCidadeIdRegiao[o.id].populacao,i)||(s.novaCidadeIdRegiao[o.id].populacao=i),Q(i)}),E(),I(7,"input",32),Ie("ngModelChange",function(i){K(t);let o=L().$implicit,s=L(5);return Te(s.novaCidadeIdRegiao[o.id].economia,i)||(s.novaCidadeIdRegiao[o.id].economia=i),Q(i)}),E(),I(8,"select",33),Ie("ngModelChange",function(i){K(t);let o=L().$implicit,s=L(5);return Te(s.novaCidadeIdRegiao[o.id].partidoGovernante,i)||(s.novaCidadeIdRegiao[o.id].partidoGovernante=i),Q(i)}),I(9,"option",34),R(10,"Nenhum"),E(),oe(11,_7,2,1,"ng-container",10),Dt(12,"async"),E(),I(13,"button",8),ae("click",function(){K(t);let i=L().$implicit,o=L(5);return Q(o.adicionarCidade(i.id))}),R(14,"Adicionar Cidade"),E()(),I(15,"h5"),R(16),E(),oe(17,C7,4,2,"div",10),Dt(18,"async"),oe(19,b7,2,0,"ng-template",null,3,Mt),E()}if(n&2){let t=L().$implicit,r=L(5);P(3),Ne("Adicionar Nova Cidade em ",t.nome,""),P(2),we("ngModel",r.novaCidadeIdRegiao[t.id].nome),P(),we("ngModel",r.novaCidadeIdRegiao[t.id].populacao),P(),we("ngModel",r.novaCidadeIdRegiao[t.id].economia),P(),fE("name","novaCidadePartidoGovernante-",t.id,""),we("ngModel",r.novaCidadeIdRegiao[t.id].partidoGovernante),P(3),z("ngIf",St(12,10,r.partidosDoReino$)),P(5),Ne("Cidades em ",t.nome,""),P(),z("ngIf",St(18,12,r.cidadesDoReino$))}}function D7(n,e){if(n&1){let t=Ze();I(0,"div",21)(1,"div",22)(2,"h4"),R(3),E(),I(4,"div",23)(5,"button",24),ae("click",function(){let i=K(t).$implicit,o=L(5);return Q(o.editarRegiao(i))}),R(6,"Editar"),E(),I(7,"button",25),ae("click",function(){let i=K(t).$implicit,o=L(5);return Q(o.excluirRegiao(i.id))}),R(8,"Excluir"),E(),I(9,"button",26),ae("click",function(){let i=K(t).$implicit,o=L(5);return Q(o.toggleExpandRegiao(i.id))}),R(10),E()()(),oe(11,g7,2,1,"p",10)(12,T7,21,14,"div",27),E()}if(n&2){let t=e.$implicit,r=L(5);P(3),ot(t.nome),P(7),Ne(" ",r.expandedRegioes[t.id]?"Ocultar Cidades":"Gerenciar Cidades"," "),P(),z("ngIf",t.dataCriacao),P(),z("ngIf",r.expandedRegioes[t.id])}}function S7(n,e){if(n&1&&(I(0,"div",19),oe(1,D7,13,4,"div",20),E()),n&2){let t=L().ngIf,r=L(3);P(),z("ngForOf",t)("ngForTrackBy",r.trackByRegiaoId)}}function A7(n,e){n&1&&(I(0,"p",43),R(1,"Nenhuma regi\xE3o cadastrada para este reino ainda."),E())}function R7(n,e){if(n&1&&(I(0,"div"),oe(1,S7,2,2,"div",18)(2,A7,2,0,"ng-template",null,2,Mt),E()),n&2){let t=e.ngIf,r=Bt(3);P(),z("ngIf",t.length>0)("ngIfElse",r)}}function x7(n,e){n&1&&(I(0,"p",42),R(1,"Carregando regi\xF5es..."),E())}function P7(n,e){if(n&1){let t=Ze();I(0,"div")(1,"h2"),R(2),E(),I(3,"p")(4,"strong"),R(5,"Sistema Pol\xEDtico:"),E(),R(6),E(),I(7,"p")(8,"strong"),R(9,"N\xFAmero de Cidades:"),E(),R(10),Dt(11,"async"),E(),ft(12,"hr"),I(13,"h3"),R(14,"Partidos do Reino"),E(),ft(15,"app-partidos",11)(16,"hr"),I(17,"h3"),R(18,"Leis do Reino"),E(),ft(19,"app-leis",11)(20,"hr"),I(21,"h3"),R(22,"Gerenciar Regi\xF5es e Cidades"),E(),I(23,"div",12)(24,"div",13)(25,"input",14),Ie("ngModelChange",function(i){K(t);let o=L(2);return Te(o.novaRegiaoNome,i)||(o.novaRegiaoNome=i),Q(i)}),E(),I(26,"textarea",15),Ie("ngModelChange",function(i){K(t);let o=L(2);return Te(o.novaRegiaoDataCriacao,i)||(o.novaRegiaoDataCriacao=i),Q(i)}),E()(),I(27,"button",8),ae("click",function(){K(t);let i=L(2);return Q(i.adicionarRegiao())}),R(28,"Adicionar Regi\xE3o"),E()(),oe(29,R7,4,2,"div",7),Dt(30,"async"),oe(31,x7,2,0,"ng-template",null,1,Mt),ft(33,"hr"),I(34,"h3"),R(35,"Elei\xE7\xF5es"),E(),I(36,"button",16),ae("click",function(){K(t);let i=L(2);return Q(i.realizarEleicao())}),R(37,"Realizar Nova Elei\xE7\xE3o"),E(),I(38,"button",17),R(39,"Ver Hist\xF3rico de Elei\xE7\xF5es"),E(),ft(40,"hr"),E()}if(n&2){let t,r=Bt(32),i=L().ngIf,o=L();P(2),ot(i.nome),P(4),Ne(" ",i.sistemaPolitico,""),P(4),Ne(" ",((t=St(11,10,o.cidadesDoReino$))==null?null:t.length)||0,""),P(5),z("reinoId",i.id),P(4),z("reinoId",i.id),P(6),we("ngModel",o.novaRegiaoNome),P(),we("ngModel",o.novaRegiaoDataCriacao),P(3),z("ngIf",St(30,12,o.regioesDoReino$))("ngIfElse",r),P(9),z("routerLink",Xl(14,p7,i.id))}}function M7(n,e){if(n&1&&(I(0,"div"),oe(1,P7,41,16,"div",10),E()),n&2){let t=e.ngIf;P(),z("ngIf",t)}}function N7(n,e){n&1&&(I(0,"p",42),R(1,"Carregando detalhes do reino..."),E())}function k7(n,e){if(n&1&&(I(0,"option",36),R(1),E()),n&2){let t=e.$implicit;z("value",t.nome),P(),fo("",t.nome," (",t.sigla,")")}}function O7(n,e){if(n&1&&(Zl(0),oe(1,k7,2,3,"option",35),Jl()),n&2){let t=e.ngIf;P(),z("ngForOf",t)}}function F7(n,e){if(n&1&&(I(0,"option",36),R(1),E()),n&2){let t=e.$implicit;z("value",t.id),P(),ot(t.nome)}}function L7(n,e){if(n&1&&(Zl(0),oe(1,F7,2,2,"option",35),Jl()),n&2){let t=e.ngIf;P(),z("ngForOf",t)}}function V7(n,e){if(n&1){let t=Ze();I(0,"div",44)(1,"div",45)(2,"div",6),R(3,"Editar Cidade"),E(),I(4,"form",46),ae("ngSubmit",function(){K(t);let i=L();return Q(i.salvarEdicaoCidade())}),I(5,"label",47),R(6,"Nome:"),E(),I(7,"input",48),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.cidadeParaEdicao.nome,i)||(o.cidadeParaEdicao.nome=i),Q(i)}),E(),I(8,"label",49),R(9,"Popula\xE7\xE3o:"),E(),I(10,"input",50),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.cidadeParaEdicao.populacao,i)||(o.cidadeParaEdicao.populacao=i),Q(i)}),E(),I(11,"label",51),R(12,"Economia:"),E(),I(13,"input",52),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.cidadeParaEdicao.economia,i)||(o.cidadeParaEdicao.economia=i),Q(i)}),E(),I(14,"label",53),R(15,"Partido Governante:"),E(),I(16,"select",54),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.cidadeParaEdicao.partidoGovernante,i)||(o.cidadeParaEdicao.partidoGovernante=i),Q(i)}),I(17,"option",34),R(18,"Nenhum"),E(),oe(19,O7,2,1,"ng-container",10),Dt(20,"async"),E(),I(21,"label",55),R(22,"Regi\xE3o:"),E(),I(23,"select",56),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.cidadeParaEdicao.idRegiao,i)||(o.cidadeParaEdicao.idRegiao=i),Q(i)}),oe(24,L7,2,1,"ng-container",10),Dt(25,"async"),E(),I(26,"div",57)(27,"button",58),R(28,"Salvar"),E(),I(29,"button",59),ae("click",function(){K(t);let i=L();return Q(i.cancelarEdicaoCidade())}),R(30,"Cancelar"),E()()()()()}if(n&2){let t=L();P(7),we("ngModel",t.cidadeParaEdicao.nome),P(3),we("ngModel",t.cidadeParaEdicao.populacao),P(3),we("ngModel",t.cidadeParaEdicao.economia),P(3),we("ngModel",t.cidadeParaEdicao.partidoGovernante),P(3),z("ngIf",St(20,7,t.partidosDoReino$)),P(4),we("ngModel",t.cidadeParaEdicao.idRegiao),P(),z("ngIf",St(25,9,t.regioesDoReino$))}}function U7(n,e){if(n&1){let t=Ze();I(0,"div",44)(1,"div",45)(2,"div",6),R(3,"Editar Regi\xE3o"),E(),I(4,"form",46),ae("ngSubmit",function(){K(t);let i=L();return Q(i.salvarEdicaoRegiao())}),I(5,"label",60),R(6,"Nome:"),E(),I(7,"input",61),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.regiaoParaEdicao.nome,i)||(o.regiaoParaEdicao.nome=i),Q(i)}),E(),I(8,"label",62),R(9,"Descri\xE7\xE3o:"),E(),I(10,"textarea",63),Ie("ngModelChange",function(i){K(t);let o=L();return Te(o.regiaoParaEdicao.dataCriacao,i)||(o.regiaoParaEdicao.dataCriacao=i),Q(i)}),E(),I(11,"div",57)(12,"button",58),R(13,"Salvar"),E(),I(14,"button",59),ae("click",function(){K(t);let i=L();return Q(i.cancelarEdicaoRegiao())}),R(15,"Cancelar"),E()()()()()}if(n&2){let t=L();P(7),we("ngModel",t.regiaoParaEdicao.nome),P(3),we("ngModel",t.regiaoParaEdicao.dataCriacao)}}var Om=class n{constructor(e,t,r,i,o,s,a,c,u){this.route=e;this.router=t;this.reinoService=r;this.cidadeService=i;this.partidoService=o;this.eleicaoService=s;this.regiaoService=a;this.leiService=c;this.location=u}reinoId;reino$;cidadesDoReino$;partidosDoReino$;eleicoesDoReino$;regioesDoReino$;novaCidadeNome="";novaCidadePopulacao=null;novaCidadeIdRegiao={};novaCidadeIdPartido="";novaRegiaoNome="";novaRegiaoDataCriacao="";cidadeParaEdicao=null;regiaoParaEdicao=null;expandedRegioes={};subscriptions=new rt;ngOnInit(){this.reino$=this.route.paramMap.pipe(ie(e=>(this.reinoId=e.get("id"),this.reinoId?this.reinoService.getReino(this.reinoId).pipe(mt(t=>{t||(console.warn("Reino n\xE3o encontrado:",this.reinoId),this.router.navigate(["/reinos"]))}),re(t=>(console.error("Erro ao buscar reino:",t),this.router.navigate(["/reinos"]),j(void 0)))):(console.error("ID do reino n\xE3o encontrado na rota."),this.router.navigate(["/reinos"]),j(void 0)))),Qo(1)),this.cidadesDoReino$=this.reino$.pipe(Ct(e=>!!e&&!!e.id),ie(e=>this.cidadeService.getCidadesByReino(e.id).pipe(re(t=>(console.error("Erro ao carregar cidades do reino:",t),j([]))))),Qo(1)),this.partidosDoReino$=this.reino$.pipe(Ct(e=>!!e&&!!e.id),ie(e=>this.partidoService.getPartidosByReino(e.id).pipe(re(t=>(console.error("Erro ao carregar partidos do reino:",t),j([]))))),Qo(1)),this.eleicoesDoReino$=this.reino$.pipe(Ct(e=>!!e&&!!e.id),ie(e=>this.eleicaoService.getEleicoesByReino(e.id).pipe(re(t=>(console.error("Erro ao carregar elei\xE7\xF5es do reino:",t),j([]))))),Qo(1)),this.regioesDoReino$=this.reino$.pipe(Ct(e=>!!e&&!!e.id),ie(e=>{let t=e.id;return this.regiaoService.getRegioesByReino(t).pipe(G(r=>r.filter(i=>i!=null)),ie(r=>{if(r.length===0)return j([]);let i=r.map(o=>(this.novaCidadeIdRegiao[o.id]||(this.novaCidadeIdRegiao[o.id]={nome:"",populacao:null,economia:"",partidoGovernante:"Nenhum"}),this.cidadeService.getCidadesByRegiao(t,o.id).pipe(G(s=>X(O({},o),{cidades:s})),re(s=>(console.error(`Erro ao carregar cidades para a regi\xE3o ${o.nome}:`,s),j(X(O({},o),{cidades:[]})))))));return Ti(i).pipe(re(o=>(console.error("Erro no combineLatest de regi\xF5es com cidades:",o),j([]))))}),Qo(1),re(r=>(console.error("Erro ao carregar regi\xF5es do reino:",r),j([]))))}))}ngAfterViewInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleExpandRegiao(e){this.expandedRegioes[e]=!this.expandedRegioes[e]}getCitiesForRegion(e,t){return t.filter(r=>r.idRegiao===e)}adicionarCidade(e){return v(this,null,function*(){let t=this.novaCidadeIdRegiao[e];if(!t||!t.nome||t.populacao===null||!this.reinoId){alert("Por favor, preencha o nome, popula\xE7\xE3o, economia e selecione o partido para a nova cidade.");return}if(t.populacao<=0){alert("A popula\xE7\xE3o deve ser um n\xFAmero positivo.");return}let r=t.partidoGovernante==="Nenhum"?void 0:t.partidoGovernante,i={id:"",nome:t.nome,idRegiao:e,partidoGovernante:r,economia:t.economia||void 0,populacao:t.populacao,dataFundacao:new Date().toISOString().split("T")[0],idReino:this.reinoId};try{yield this.cidadeService.addCidade(this.reinoId,i),this.novaCidadeIdRegiao[e]={nome:"",populacao:null,economia:"",partidoGovernante:"Nenhum"},console.log("Cidade adicionada com sucesso!")}catch(o){console.error("Erro ao adicionar cidade:",o),alert("Erro ao adicionar cidade: "+o.message)}})}editarCidade(e){this.cidadeParaEdicao=O({},e)}salvarEdicaoCidade(){return v(this,null,function*(){if(!(!this.cidadeParaEdicao||!this.reinoId)){if(this.cidadeParaEdicao.populacao!==void 0&&this.cidadeParaEdicao.populacao<=0){alert("A popula\xE7\xE3o deve ser um n\xFAmero positivo.");return}try{this.cidadeParaEdicao.partidoGovernante===void 0&&(this.cidadeParaEdicao.partidoGovernante=null),yield this.cidadeService.updateCidade(this.reinoId,this.cidadeParaEdicao),this.cidadeParaEdicao=null,console.log("Cidade atualizada com sucesso!")}catch(e){console.error("Erro ao atualizar cidade:",e),alert("Erro ao atualizar cidade: "+e.message)}}})}cancelarEdicaoCidade(){this.cidadeParaEdicao=null}excluirCidade(e,t){return v(this,null,function*(){if(confirm("Tem certeza que deseja excluir esta cidade?"))try{yield this.cidadeService.deleteCidade(this.reinoId,e),console.log("Cidade exclu\xEDda com sucesso!")}catch(r){console.error("Erro ao excluir cidade:",r),alert("Erro ao excluir cidade: "+r.message)}})}adicionarRegiao(){return v(this,null,function*(){if(!this.novaRegiaoNome||!this.reinoId){alert("Por favor, preencha o nome da nova regi\xE3o.");return}let e={id:"",idReino:this.reinoId,nome:this.novaRegiaoNome,dataCriacao:this.novaRegiaoDataCriacao||void 0};try{yield this.regiaoService.addRegiao(this.reinoId,e),this.novaRegiaoNome="",this.novaRegiaoDataCriacao="",console.log("Regi\xE3o adicionada com sucesso!")}catch(t){console.error("Erro ao adicionar regi\xE3o:",t),alert("Erro ao adicionar regi\xE3o: "+t.message)}})}editarRegiao(e){this.regiaoParaEdicao=O({},e)}cancelarEdicaoRegiao(){this.regiaoParaEdicao=null}salvarEdicaoRegiao(){return v(this,null,function*(){if(!(!this.regiaoParaEdicao||!this.reinoId))try{yield this.regiaoService.updateRegiao(this.reinoId,this.regiaoParaEdicao),this.regiaoParaEdicao=null,console.log("Regi\xE3o atualizada com sucesso!")}catch(e){console.error("Erro ao atualizar regi\xE3o:",e),alert("Erro ao atualizar regi\xE3o: "+e.message)}})}excluirRegiao(e){return v(this,null,function*(){if(confirm("Tem certeza que deseja excluir esta regi\xE3o? Isso tamb\xE9m pode afetar as cidades associadas."))try{yield this.regiaoService.deleteRegiao(this.reinoId,e),console.log("Regi\xE3o exclu\xEDda com sucesso!")}catch(t){console.error("Erro ao excluir regi\xE3o:",t),alert("Erro ao excluir regi\xE3o: "+t.message)}})}realizarEleicao(){return v(this,null,function*(){if(confirm("Tem certeza que deseja realizar uma nova elei\xE7\xE3o para este reino? Isso ir\xE1 redistribuir os partidos governantes das cidades.")){if(!this.reinoId){alert("Erro: ID do reino n\xE3o dispon\xEDvel para realizar a elei\xE7\xE3o.");return}try{let e=yield this.cidadesDoReino$?Bh(this.cidadesDoReino$.pipe(Un())):Promise.resolve([]),t=yield this.partidosDoReino$?Bh(this.partidosDoReino$.pipe(Un())):Promise.resolve([]);if(!e||e.length===0){alert("N\xE3o h\xE1 cidades cadastradas neste reino para realizar a elei\xE7\xE3o.");return}if(!t||t.length===0){alert("N\xE3o h\xE1 partidos cadastrados neste reino para realizar a elei\xE7\xE3o. Cadastre pelo menos um partido.");return}let r={},i={},o=[],s=0,a=[...e].sort(()=>Math.random()-.5);for(let d of a){let f=t[s],g=d.partidoGovernante?t.find(w=>w.id===d.partidoGovernante)?.nome||"Desconhecido":null;console.log("Partido Vencedor - Nome:",f.nome),console.log("Partido Vencedor - ID:",f.id);let m=X(O({},d),{partidoGovernante:f.nome,idPartidoVencedor:f.id});o.push(m),r[d.id]={idCidade:d.id,nomeCidade:d.nome,idPartidoVencedor:f.id,nomePartidoVencedor:f.nome,nomePartidoAnterior:g},i[f.nome]=(i[f.nome]||0)+1,s=(s+1)%t.length}let c=o.map(d=>this.cidadeService.updateCidade(this.reinoId,d));yield Promise.all(c),console.log("Cidades atualizadas com novos partidos governantes.");let u={id:"",idReino:this.reinoId,data:new Date().toISOString().split("T")[0],resultadosCidades:r,resumoGeral:{totalCidades:e.length,partidosVencedoresContagem:i,vencedorGeral:this.determinarVencedorGeral(i)}};yield this.eleicaoService.addEleicao(this.reinoId,u),alert("Elei\xE7\xE3o realizada com sucesso! Os partidos governantes das cidades foram atualizados e o hist\xF3rico da elei\xE7\xE3o foi salvo."),console.log("Nova elei\xE7\xE3o registrada:",u)}catch(e){console.error("Erro ao realizar elei\xE7\xE3o:",e),alert("Erro ao realizar elei\xE7\xE3o: "+(e.message||"Verifique o console para mais detalhes."))}}})}determinarVencedorGeral(e){let t,r=-1,i=!1;for(let o in e)if(e.hasOwnProperty(o)){let s=e[o];s>r?(r=s,t=o,i=!1):s===r&&(i=!0)}if(i&&t!==void 0)return`Empate entre: ${Object.keys(e).filter(s=>e[s]===r).join(", ")}`;if(t!==void 0)return t}voltarParaReinos(){this.location.back()}trackByRegiaoId(e,t){return t.id}trackByCidadeId(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(H(En),H(Rt),H(Hc),H(zc),H(Wc),H(Lo),H(km),H(Gc),H(Wn))};static \u0275cmp=Xt({type:n,selectors:[["app-reino-detalhes"]],decls:11,vars:6,consts:[["loading",""],["loadingRegioes",""],["noRegioes",""],["loadingCidades",""],["noCidadesForRegion",""],[1,"card"],[1,"card-header"],[4,"ngIf","ngIfElse"],[3,"click"],["class","modal-overlay",4,"ngIf"],[4,"ngIf"],[3,"reinoId"],[1,"form-add-regiao"],[1,"form-inputs-inline"],["type","text","placeholder","Nome da Nova Regi\xE3o","required","",3,"ngModelChange","ngModel"],["placeholder","Data da funda\xE7\xE3o",3,"ngModelChange","ngModel"],[1,"btnNova",3,"click"],[1,"btnHistorico",3,"routerLink"],["class","regioes-grid",4,"ngIf","ngIfElse"],[1,"regioes-grid"],["class","regiao-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"regiao-item"],[1,"regiao-header"],[1,"regiao-actions"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"btn-toggle-expand",3,"click"],["class","regiao-content",4,"ngIf"],[1,"regiao-content"],[1,"form-add-cidade"],["type","text","placeholder","Nome da Cidade","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Popula\xE7\xE3o (opcional)",3,"ngModelChange","ngModel"],["type","text","placeholder","Economia (opcional)",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel","name"],["value","Nenhum"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","cidade-list",4,"ngIf","ngIfElse"],[1,"cidade-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cidade-actions"],[1,"no-cidades-message"],[1,"loading-message"],[1,"no-regioes-message"],[1,"modal-overlay"],[1,"modal-content","card"],[3,"ngSubmit"],["for","editCidadeNome"],["id","editCidadeNome","type","text","name","editCidadeNome","required","",3,"ngModelChange","ngModel"],["for","editCidadePopulacao"],["id","editCidadePopulacao","type","number","name","editCidadePopulacao",3,"ngModelChange","ngModel"],["for","editCidadeEconomia"],["id","editCidadeEconomia","type","text","name","editCidadeEconomia",3,"ngModelChange","ngModel"],["for","editCidadePartido"],["id","editCidadePartido","name","editCidadePartido",3,"ngModelChange","ngModel"],["for","editCidadeRegiao"],["id","editCidadeRegiao","name","editCidadeRegiao","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit"],["type","button",3,"click"],["for","editRegiaoNome"],["id","editRegiaoNome","type","text","name","editRegiaoNome","required","",3,"ngModelChange","ngModel"],["for","editRegiaoDescricao"],["id","editRegiaoDescricao","name","editRegiaoDataCriacao",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=Ze();I(0,"div",5)(1,"div",6),R(2,"Detalhes do Reino"),E(),oe(3,M7,2,1,"div",7),Dt(4,"async"),oe(5,N7,2,0,"ng-template",null,0,Mt),I(7,"button",8),ae("click",function(){return K(i),Q(r.voltarParaReinos())}),R(8,"Voltar para Reinos"),E()(),oe(9,V7,31,11,"div",9)(10,U7,16,2,"div",9)}if(t&2){let i=Bt(6);P(3),z("ngIf",St(4,4,r.reino$))("ngIfElse",i),P(6),z("ngIf",r.cidadeParaEdicao),P(),z("ngIf",r.regiaoParaEdicao)}},dependencies:[en,Gn,An,vr,RE,ti,ei,EM,IM,Kn,Ou,Gp,Jr,Xr,Ir,wr,Er,_w,Zr,Mm,Nm],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 4px 8px #0000001a;color:#333}.card-header[_ngcontent-%COMP%]{font-size:1.8em;color:#333;margin-bottom:15px;border-bottom:1px solid #ddd;padding-bottom:10px}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:#333;margin-top:20px;margin-bottom:10px}p[_ngcontent-%COMP%]{color:#555;margin-bottom:5px}hr[_ngcontent-%COMP%]{border:none;border-top:1px solid #ddd;margin:20px 0}.form-section[_ngcontent-%COMP%], .form-add-regiao[_ngcontent-%COMP%], .form-add-cidade[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #eee;border-radius:8px;padding:15px;margin-bottom:15px;display:flex;flex-direction:column;gap:10px}.form-inputs-inline[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.form-add-regiao[_ngcontent-%COMP%]   .form-inputs-inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-add-regiao[_ngcontent-%COMP%]   .form-inputs-inline[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;min-width:150px;width:auto}.form-add-regiao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-add-regiao[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-add-cidade[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-add-cidade[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #ccc;background-color:#fff;color:#333;font-size:1em;width:calc(100% - 22px)}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder, .modal-content[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::placeholder, .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#999}.btnHistorico[_ngcontent-%COMP%]{margin-left:10px}.btnNova[_ngcontent-%COMP%]{margin-bottom:10px}.form-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .form-add-regiao[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .form-add-cidade[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #007bff;background-color:#007bff;color:#fff;font-size:1em;cursor:pointer;transition:background-color .3s ease,border-color .3s ease}.form-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .form-add-regiao[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .form-add-cidade[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.regioes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:20px}.regiao-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:15px;border-radius:8px;background-color:#fff;border:1px solid #ccc;box-shadow:0 2px 4px #0000001a;color:#333;transition:background-color .3s ease}.regiao-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .regiao-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#333}.regiao-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .regiao-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555}.regiao-item[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top:1px solid #ddd}.regiao-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;flex-wrap:wrap}.regiao-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.4em;flex-grow:1}.regiao-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.regiao-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .cidade-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;border-radius:5px;border:none;cursor:pointer;font-size:.9em;transition:background-color .3s ease}.btn-toggle-expand[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-toggle-expand[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-edit[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.regiao-content[_ngcontent-%COMP%]{margin-top:15px}.cidade-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin-top:10px}.cidade-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #bbb}.cidade-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.cidade-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.cidade-list[_ngcontent-%COMP%]   .cidade-actions[_ngcontent-%COMP%]{display:flex;gap:5px;flex-shrink:0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#333;padding:30px;border-radius:10px;box-shadow:0 5px 15px #0006;width:90%;max-width:500px;color:#eee}.modal-content[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-size:1.5em;text-align:center;margin-bottom:20px;color:#fff}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ccc;font-weight:700}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px;border:none;cursor:pointer;font-size:1em;transition:background-color .3s ease}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.modal-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#5a6268}.loading-message[_ngcontent-%COMP%], .no-cidades-message[_ngcontent-%COMP%], .no-regioes-message[_ngcontent-%COMP%], .no-partidos-message[_ngcontent-%COMP%], .no-parliament-data[_ngcontent-%COMP%], .info-message[_ngcontent-%COMP%]{text-align:center;color:#555;font-style:italic;padding:15px;border:1px dashed #bbb;border-radius:5px;margin-top:20px}.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;height:400px;margin:20px auto;background-color:#f9f9f9;border:1px solid #eee;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000000d}@media (max-width: 768px){.regioes-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.regiao-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}.form-add-regiao[_ngcontent-%COMP%]   .form-inputs-inline[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.form-add-regiao[_ngcontent-%COMP%]   .form-inputs-inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-add-regiao[_ngcontent-%COMP%]   .form-inputs-inline[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}}"]})};function j7(n,e){if(n&1&&(I(0,"span"),R(1),E()),n&2){let t=L().$implicit;P(),Ne(" (Anterior: ",t.value.nomePartidoAnterior,") ")}}function B7(n,e){if(n&1&&(I(0,"li")(1,"strong"),R(2),E(),ft(3,"br"),R(4," Partido Eleito: "),I(5,"span",10),R(6),E(),oe(7,j7,2,1,"span",11),E()),n&2){let t=e.$implicit;P(2),ot(t.value.nomeCidade),P(4),ot(t.value.nomePartidoVencedor),P(),z("ngIf",t.value.nomePartidoAnterior&&t.value.nomePartidoAnterior!==t.value.nomePartidoVencedor)}}function $7(n,e){if(n&1&&(I(0,"li")(1,"strong"),R(2),E(),R(3),E()),n&2){let t=e.$implicit;P(2),ot(t.key),P(),Ne(": ",t.value," vit\xF3ria(s) ")}}function H7(n,e){if(n&1&&(I(0,"div",6)(1,"h3"),R(2),E(),I(3,"p")(4,"strong"),R(5,"Total de Cidades Participantes:"),E(),R(6),E(),I(7,"h4"),R(8,"Resultados por Cidade:"),E(),I(9,"ul",7),oe(10,B7,8,3,"li",8),Dt(11,"keyvalue"),E(),I(12,"h4"),R(13,"Contagem de Vit\xF3rias por Partido:"),E(),I(14,"ul",9),oe(15,$7,4,2,"li",8),Dt(16,"keyvalue"),E(),ft(17,"hr"),E()),n&2){let t=e.$implicit;P(2),fo("Elei\xE7\xE3o de ",t.data," (Ano Hist\xF3rico: ",t.anoHistorico||"N/A",")"),P(4),Ne(" ",t.resumoGeral==null?null:t.resumoGeral.totalCidades,""),P(4),z("ngForOf",St(11,5,t.resultadosCidades)),P(5),z("ngForOf",St(16,7,t.resumoGeral==null?null:t.resumoGeral.partidosVencedoresContagem))}}function z7(n,e){if(n&1&&(I(0,"div"),oe(1,H7,18,9,"div",5),E()),n&2){let t=L().ngIf;P(),z("ngForOf",t)}}function q7(n,e){n&1&&(I(0,"p",12),R(1,"Nenhuma elei\xE7\xE3o encontrada para este reino."),E())}function W7(n,e){if(n&1&&(I(0,"div"),oe(1,z7,2,1,"div",4)(2,q7,2,0,"ng-template",null,1,Mt),E()),n&2){let t=e.ngIf,r=Bt(3);P(),z("ngIf",t.length>0)("ngIfElse",r)}}function G7(n,e){n&1&&(I(0,"p",12),R(1,"Carregando hist\xF3rico de elei\xE7\xF5es..."),E())}var Fm=class n{constructor(e,t,r){this.route=e;this.eleicaoService=t;this.location=r}reinoId;eleicoes$;START_YEAR=1146;ELECTION_CYCLE_YEARS=4;ngOnInit(){this.eleicoes$=this.route.paramMap.pipe(ie(e=>(this.reinoId=e.get("id"),this.reinoId?this.eleicaoService.getEleicoesByReino(this.reinoId).pipe(G(t=>t.sort((r,i)=>new Date(r.data).getTime()-new Date(i.data).getTime())),G(t=>this.calcularAnoHistorico(t))):j([]))))}calcularAnoHistorico(e){return e.map((t,r)=>{let i=this.START_YEAR+r*this.ELECTION_CYCLE_YEARS;return X(O({},t),{anoHistorico:i})})}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)(H(En),H(Lo),H(Wn))};static \u0275cmp=Xt({type:n,selectors:[["app-eleicao-historico"]],decls:7,vars:4,consts:[["loadingEleicoes",""],["noEleicoes",""],[1,"card"],[1,"card-header"],[4,"ngIf","ngIfElse"],["class","eleicao-card",4,"ngFor","ngForOf"],[1,"eleicao-card"],[1,"resultados-cidades-list"],[4,"ngFor","ngForOf"],[1,"partidos-vencedores-list"],[1,"partido-eleito"],[4,"ngIf"],[1,"message"]],template:function(t,r){if(t&1&&(I(0,"div",2)(1,"div",3),R(2,"Hist\xF3rico de Elei\xE7\xF5es do Reino"),E(),oe(3,W7,4,2,"div",4),Dt(4,"async"),oe(5,G7,2,0,"ng-template",null,0,Mt),E()),t&2){let i=Bt(6);P(3),z("ngIf",St(4,2,r.eleicoes$))("ngIfElse",i)}},dependencies:[en,Gn,An,vr,AE],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin:20px auto;padding:25px;max-width:800px}.card-header[_ngcontent-%COMP%]{font-size:1.8em;color:#333;margin-bottom:20px;border-bottom:2px solid #eee;padding-bottom:10px;text-align:center}.eleicao-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;padding:15px;margin-bottom:20px;background-color:#f9f9f9}.eleicao-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0056b3;margin-top:0;margin-bottom:10px;font-size:1.4em}.eleicao-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#444;margin-top:15px;margin-bottom:8px;font-size:1.1em}.resultados-cidades-list[_ngcontent-%COMP%], .partidos-vencedores-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin-left:15px}.resultados-cidades-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .partidos-vencedores-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;line-height:1.5}.partido-eleito[_ngcontent-%COMP%]{font-weight:700;color:#28a745}hr[_ngcontent-%COMP%]{border:0;border-top:1px dashed #ccc;margin:25px 0}.message[_ngcontent-%COMP%], .loading-message[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:20px}.back-button[_ngcontent-%COMP%]{display:block;width:auto;padding:10px 20px;margin:20px auto 0;background-color:#6c757d;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1em;transition:background-color .2s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})};function K7(n,e){if(n&1&&(I(0,"div",15),R(1),E()),n&2){let t=L();P(),Ne(" ",t.errorMessage," ")}}var Lm=class n{constructor(e,t,r){this.auth=e;this.router=t;this.userProfileService=r}email="";password="";isLoginMode=!0;errorMessage=null;ngOnInit(){d1(this.auth,e=>v(this,null,function*(){e&&(yield this.userProfileService.createUserProfile(e),this.router.navigate(["/reinos"]))}))}onSwitchMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=null}onSubmit(){return v(this,null,function*(){this.errorMessage=null;try{let e;this.isLoginMode?(e=yield h1(this.auth,this.email,this.password),console.log("Login bem-sucedido!",e)):(e=yield l1(this.auth,this.email,this.password),console.log("Registro bem-sucedido!",e)),e.user&&(yield this.userProfileService.createUserProfile(e.user)),this.router.navigate(["/reinos"])}catch(e){switch(console.error("Erro de autentica\xE7\xE3o:",e),e.code){case"auth/email-already-in-use":this.errorMessage="Este e-mail j\xE1 est\xE1 em uso.";break;case"auth/invalid-email":this.errorMessage="Formato de e-mail inv\xE1lido.";break;case"auth/weak-password":this.errorMessage="A senha deve ter pelo menos 6 caracteres.";break;case"auth/user-not-found":case"auth/wrong-password":this.errorMessage="E-mail ou senha incorretos.";break;case"auth/network-request-failed":this.errorMessage="Erro de conex\xE3o. Verifique sua internet.";break;default:this.errorMessage="Ocorreu um erro. Tente novamente.";break}}})}signInWithGoogle(){return v(this,null,function*(){this.errorMessage=null;try{let e=new F0,t=yield f1(this.auth,e);console.log("Login com Google bem-sucedido!"),t.user&&(yield this.userProfileService.createUserProfile(t.user)),this.router.navigate(["/reinos"])}catch(e){switch(console.error("Erro no login com Google:",e),e.code){case"auth/cancelled-popup-request":this.errorMessage="Solicita\xE7\xE3o de popup cancelada.";break;case"auth/popup-closed-by-user":this.errorMessage="A janela de login do Google foi fechada.";break;default:this.errorMessage="Erro no login com Google. Tente novamente.";break}}})}static \u0275fac=function(t){return new(t||n)(H(kn),H(Rt),H(on))};static \u0275cmp=Xt({type:n,selectors:[["app-auth"]],decls:26,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],[1,"auth-divider"],["type","button",1,"google-signin-btn",3,"click"],["src","https://img.icons8.com/color/16/000000/google-logo.png","alt","Google icon"],[1,"switch-mode-text"],[3,"click"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1)(2,"h2"),R(3),E(),I(4,"form",2),ae("ngSubmit",function(){return r.onSubmit()}),I(5,"div",3)(6,"label",4),R(7,"E-mail:"),E(),I(8,"input",5),Ie("ngModelChange",function(o){return Te(r.email,o)||(r.email=o),o}),E()(),I(9,"div",3)(10,"label",6),R(11,"Senha:"),E(),I(12,"input",7),Ie("ngModelChange",function(o){return Te(r.password,o)||(r.password=o),o}),E()(),I(13,"button",8),R(14),E()(),I(15,"div",9)(16,"span"),R(17,"OU"),E()(),I(18,"button",10),ae("click",function(){return r.signInWithGoogle()}),ft(19,"img",11),R(20," Entrar com Google "),E(),I(21,"p",12),R(22),I(23,"a",13),ae("click",function(){return r.onSwitchMode()}),R(24),E()(),oe(25,K7,2,1,"div",14),E()()),t&2&&(P(3),ot(r.isLoginMode?"Login":"Registrar"),P(5),we("ngModel",r.email),P(4),we("ngModel",r.password),P(2),ot(r.isLoginMode?"Entrar":"Cadastrar"),P(8),Ne(" ",r.isLoginMode?"N\xE3o tem uma conta?":"J\xE1 tem uma conta?"," "),P(2),ot(r.isLoginMode?"Registre-se aqui":"Fa\xE7a login"),P(),z("ngIf",r.errorMessage))},dependencies:[en,An,ti,ei,Kn,Jr,Xr,Ir,wr,Er],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 60px);background-color:#f0f2f5;padding:20px}.auth-card[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:8px;box-shadow:0 4px 12px #0000001a;width:100%;max-width:400px;text-align:center}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:25px;color:#333;font-size:1.8em}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff40}button[_ngcontent-%COMP%]{width:100%;padding:12px 15px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:1.1em;cursor:pointer;transition:background-color .3s ease;margin-top:10px}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.auth-divider[_ngcontent-%COMP%]{margin:25px 0;display:flex;align-items:center;font-size:.9em;color:#aaa}.auth-divider[_ngcontent-%COMP%]:before, .auth-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#eee}.auth-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px;background-color:#fff}.google-signin-btn[_ngcontent-%COMP%]{background-color:#db4437;display:flex;align-items:center;justify-content:center;gap:10px;margin-top:15px}.google-signin-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}.google-signin-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px}.switch-mode-text[_ngcontent-%COMP%]{margin-top:25px;color:#777;font-size:.9em}.switch-mode-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:none;font-weight:700}.switch-mode-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;padding:10px;border-radius:5px;margin-top:20px;font-size:.9em;text-align:left}']})};var vb=G(n=>!!n),Pd=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>vb);return Dg(this.auth).pipe(it(1),i(t,r),G(o=>typeof o=="boolean"?o:Array.isArray(o)?this.router.createUrlTree(o):this.router.parseUrl(o)))};static \u0275fac=function(r){return new(r||n)(Y(Rt),Y(kn))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var lF=n=>Go(vb,G(e=>e||n)),uF=n=>Go(vb,G(e=>e&&n||!0));var yb=()=>lF(["/auth"]),Q7=()=>uF(["/reinos"]),dF=[{path:"",redirectTo:"reinos",pathMatch:"full"},{path:"reinos",component:Pm,canActivate:[Pd],data:{authGuardPipe:yb}},{path:"reinos/:id",component:Om,canActivate:[Pd],data:{authGuardPipe:yb}},{path:"reinos/:id/historico-eleicoes",component:Fm,canActivate:[Pd],data:{authGuardPipe:yb}},{path:"auth",component:Lm,canActivate:[Pd],data:{authGuardPipe:Q7}},{path:"**",redirectTo:"reinos"}];var hF="@firebase/database",fF="1.0.19";var _T="";function Y7(n){_T=n}var Sb=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ot(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ac(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ab=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Sb(e)}}catch{}return new Ab},Ks=qF("localStorage"),Rb=qF("sessionStorage");var Zc=new Yn("@firebase/database"),Z7=function(){let n=1;return function(){return n++}}(),WF=function(n){let e=jM(n),t=new Kp;t.update(e);let r=t.digest();return cc.encodeByteArray(r)},zd=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zd.apply(null,r):typeof r=="object"?e+=Ot(r):e+=r,e+=" "}return e},Qs=null,pF=!0,J7=function(n,e){q(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Zc.logLevel=Ce.VERBOSE,Qs=Zc.log.bind(Zc),e&&Rb.set("logging_enabled",!0)):typeof n=="function"?Qs=n:(Qs=null,Rb.remove("logging_enabled"))},sn=function(...n){if(pF===!0&&(pF=!1,Qs===null&&Rb.get("logging_enabled")===!0&&J7(!0)),Qs){let e=zd.apply(null,n);Qs(e)}},qd=function(n){return function(...e){sn(n,...e)}},xb=function(...n){let e="FIREBASE INTERNAL ERROR: "+zd(...n);Zc.error(e)},Gi=function(...n){let e=`FIREBASE FATAL ERROR: ${zd(...n)}`;throw Zc.error(e),new Error(e)},Ln=function(...n){let e="FIREBASE WARNING: "+zd(...n);Zc.warn(e)},X7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},GF=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},eK=function(n){if(ii()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Xc="[MIN_NAME]",Ys="[MAX_NAME]",sl=function(n,e){if(n===e)return 0;if(n===Xc||e===Ys)return-1;if(e===Xc||n===Ys)return 1;{let t=gF(n),r=gF(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},tK=function(n,e){return n===e?0:n<e?-1:1},Md=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ot(e))},vT=function(n){if(typeof n!="object"||n===null)return Ot(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Ot(e[r]),t+=":",t+=vT(n[e[r]]);return t+="}",t},KF=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function sr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var QF=function(n){q(!GF(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},nK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var iK=new RegExp("^-?(0*)\\d{1,10}$"),oK=-2147483648,sK=2147483647,gF=function(n){if(iK.test(n)){let e=Number(n);if(e>=oK&&e<=sK)return e}return null},Wd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ln("Exception was thrown by user callback.",t),e},Math.floor(0))}},aK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ld=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Pb=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Ht(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ln(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Mb=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ln(e)}},Vd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Um="5",YF="v",ZF="s",JF="r",XF="f",eL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tL="ls",nL="p",Nb="ac",rL="websocket",iL="long_polling";var jm=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1,u=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ks.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ks.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function cK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function oL(n,e,t){q(typeof e=="string","typeof type must == string"),q(typeof t=="object","typeof params must == object");let r;if(e===rL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===iL)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cK(n)&&(t.ns=n.namespace);let i=[];return sr(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var kb=class{constructor(){this.counters_={}}incrementCounter(e,t=1){oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return AM(this.counters_)}};var Eb={},wb={};function yT(n){let e=n.toString();return Eb[e]||(Eb[e]=new kb),Eb[e]}function lK(n,e){let t=n.toString();return wb[t]||(wb[t]=e()),wb[t]}var Ob=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var mF="start",uK="close",dK="pLPCommand",hK="pRTLPCB",sL="id",aL="pw",cL="ser",fK="cb",pK="seg",gK="ts",mK="d",_K="dframe",lL=1870,uL=30,vK=lL-uL,yK=25e3,EK=3e4,Fb=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qd(e),this.stats_=yT(t),this.urlFn=c=>(this.appCheckToken&&(c[Nb]=this.appCheckToken),oL(t,iL,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ob(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(EK)),eK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lb((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===mF)this.id=a,this.password=c;else if(s===uK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[mF]="t",r[cL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[fK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[YF]=Um,this.transportSessionId&&(r[ZF]=this.transportSessionId),this.lastSessionId&&(r[tL]=this.lastSessionId),this.applicationId&&(r[nL]=this.applicationId),this.appCheckToken&&(r[Nb]=this.appCheckToken),typeof location<"u"&&location.hostname&&eL.test(location.hostname)&&(r[JF]=XF);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return ii()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nK()&&!rK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Pw(t),i=KF(r,vK);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ii())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[_K]="t",r[sL]=e,r[aL]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ot(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Lb=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ii())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Z7(),window[dK+this.uniqueCallbackIdentifier]=e,window[hK+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){sn("frame writing exception"),a.stack&&sn(a.stack),sn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||sn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[sL]=this.myID,e[aL]=this.myPW,e[cL]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uL+r.length<=lL;){let s=this.pendingSegs.shift();r=r+"&"+pK+i+"="+s.seg+"&"+gK+i+"="+s.ts+"&"+mK+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(yK)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){ii()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var wK=16384,IK=45e3,Bm=null;typeof MozWebSocket<"u"?Bm=MozWebSocket:typeof WebSocket<"u"&&(Bm=WebSocket);var Nd=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qd(this.connId),this.stats_=yT(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[YF]=Um,!ii()&&typeof location<"u"&&location.hostname&&eL.test(location.hostname)&&(a[JF]=XF),r&&(a[ZF]=r),i&&(a[tL]=i),o&&(a[Nb]=o),s&&(a[nL]=s),oL(t,rL,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ks.set("previous_websocket_failure",!0);try{let i;if(ii()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Um}/${_T}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Bm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Bm!==null&&!n.forceDisallow_}static previouslyFailed(){return Ks.isInMemoryStorage||Ks.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ks.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ac(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Ot(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=KF(r,wK);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(IK))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),CK=(()=>{class n{static get ALL_TRANSPORTS(){return[Fb,Nd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Nd&&Nd.isAvailable(),i=r&&!Nd.previouslyFailed();if(t.webSocketOnly&&(r||Ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Nd];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),bK=6e4,TK=5e3,DK=10*1024,SK=100*1024,Ib="t",_F="d",AK="s",vF="r",RK="e",yF="o",EF="a",wF="n",IF="p",xK="h",Vb=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qd("c:"+this.id+":"),this.transportManager_=new CK(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ld(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ib in e){let t=e[Ib];t===EF?this.upgradeIfSecondaryHealthy_():t===vF?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===yF&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Md("t",e),r=Md("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IF,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:EF,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wF,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Md("t",e),r=Md("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Md(Ib,e);if(_F in e){let r=e[_F];if(t===xK){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===wF){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===AK?this.onConnectionShutdown_(r):t===vF?this.onReset_(r):t===RK?xb("Server Error: "+r):t===yF?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xb("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Um!==r&&Ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ld(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ld(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(TK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IF,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var $m=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Hm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){q(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var zm=class n extends Hm{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Uu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var CF=32,bF=768,Ye=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function qe(){return new Ye("")}function Oe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uo(n){return n.pieces_.length-n.pieceNum_}function nt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ye(n.pieces_,e)}function dL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function PK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function hL(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fL(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ye(e,0)}function Vt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ye)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ye(t,0)}function Me(n){return n.pieceNum_>=n.pieces_.length}function ir(n,e){let t=Oe(n),r=Oe(e);if(t===null)return e;if(t===r)return ir(nt(n),nt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function pL(n,e){if(Uo(n)!==Uo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Nr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Uo(n)>Uo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Ub=class{constructor(e,t){this.errorPrefix_=t,this.parts_=hL(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Hu(this.parts_[r]);gL(this)}};function MK(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Hu(e),gL(n)}function NK(n){let e=n.parts_.pop();n.byteLength_-=Hu(e),n.parts_.length>0&&(n.byteLength_-=1)}function gL(n){if(n.byteLength_>bF)throw new Error(n.errorPrefix_+"has a key path longer than "+bF+" bytes ("+n.byteLength_+").");if(n.parts_.length>CF)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+CF+") or object contains a cycle "+Gs(n))}function Gs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var jb=class n extends Hm{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}};var kd=1e3,kK=60*5*1e3,TF=30*1e3,OK=1.3,FK=3e4,LK="server_kill",DF=3,ET=(()=>{class n extends $m{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=qd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kd,this.maxReconnectDelay_=kK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!ii())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jb.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&zm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Ot(s)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new ni,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&oi(t,"w")){let i=Ds(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||LM(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=TF)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=FM(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ot(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):xb("Unrecognized action received from server: "+Ot(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FK&&(this.reconnectDelay_=kd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OK)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(g){q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,m]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=m&&m.token,c=new Vb(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{Ln(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(LK)},s))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Ln(g),u())}}})}interrupt(t){sn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){sn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Bu(this.interruptReasons_)&&(this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>vT(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new Ye(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){sn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DF&&(this.reconnectDelay_=TF,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){sn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=DF&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";ii()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+_T.replace(/\./g,"-")]=1,Uu()?t["framework.cordova"]=1:Jp()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=zm.getInstance().currentlyOnline();return Bu(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Fe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var el=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Fe(Xc,e),i=new Fe(Xc,t);return this.compare(r,i)!==0}minPost(){return Fe.MIN}};var Vm,qm=class extends el{static get __EMPTY_NODE(){return Vm}static set __EMPTY_NODE(e){Vm=e}compare(e,t){return sl(e.name,t.name)}isDefinedOn(e){throw Ts("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Fe.MIN}maxPost(){return new Fe(Ys,Vm)}makePost(e,t){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new Fe(e,Vm)}toString(){return".key"}},Jc=new qm;var Qc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Mr=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??or.EMPTY_NODE,this.right=s??or.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return or.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return or.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Bb=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Mr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},or=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mr.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qc(this.root_,null,this.comparator_,!0,e)}};or.EMPTY_NODE=new Bb;function VK(n,e){return sl(n.name,e.name)}function wT(n,e){return sl(n,e)}var $b;function UK(n){$b=n}var mL=function(n){return typeof n=="number"?"number:"+QF(n):"string:"+n},_L=function(n){if(n.isLeafNode()){let e=n.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&oi(e,".sv"),"Priority must be a string or number.")}else q(n===$b||n.isEmpty(),"priority of unexpected type.");q(n===$b||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var SF,tl=(()=>{class n{static set __childrenNodeConstructor(t){SF=t}static get __childrenNodeConstructor(){return SF}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_L(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Me(t)?this:Oe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Oe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(q(i!==".priority"||Uo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mL(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=QF(this.value_):t+=this.value_,this.lazyHash_=WF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return q(o>=0,"Unknown leaf type: "+r),q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),vL,yL;function jK(n){vL=n}function BK(n){yL=n}var Hb=class extends el{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?sl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Fe.MIN}maxPost(){return new Fe(Ys,new tl("[PRIORITY-POST]",yL))}makePost(e,t){let r=vL(e);return new Fe(t,new tl("[PRIORITY-POST]",r))}toString(){return".priority"}},cn=new Hb;var $K=Math.log(2),zb=class{constructor(e){let t=o=>parseInt(Math.log(o)/$K,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Wm=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new Mr(g,f.node,Mr.BLACK,null,null);{let m=parseInt(d/2,10)+c,w=i(c,m),N=i(m+1,u);return f=n[m],g=t?t(f):f,new Mr(g,f.node,Mr.BLACK,w,N)}},o=function(c){let u=null,d=null,f=n.length,g=function(w,N){let k=f-w,B=f;f-=w;let ne=i(k+1,B),ce=n[k],Le=t?t(ce):ce;m(new Mr(Le,ce.node,N,null,ne))},m=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){let N=c.nextBitIsOne(),k=Math.pow(2,c.count-(w+1));N?g(k,Mr.BLACK):(g(k,Mr.BLACK),g(k,Mr.RED))}return d},s=new zb(n.length),a=o(s);return new or(r||e,a)};var Cb,Kc={},nl=class n{static get Default(){return q(Kc&&cn,"ChildrenNode.ts has not been loaded"),Cb=Cb||new n({".priority":Kc},{".priority":cn}),Cb}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Ds(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof or?t:null}hasIndex(e){return oi(this.indexSet_,e.toString())}addIndex(e,t){q(e!==Jc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Fe.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Wm(r,e.getCompare()):a=Kc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=$u(this.indexes_,(i,o)=>{let s=Ds(this.indexSet_,o);if(q(s,"Missing index implementation for "+o),i===Kc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Fe.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Wm(a,s.getCompare())}else return Kc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Fe(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=$u(this.indexes_,i=>{if(i===Kc)return i;{let o=t.get(e.name);return o?i.remove(new Fe(e.name,o)):i}});return new n(r,this.indexSet_)}};var Od,ut=(()=>{class n{static get EMPTY_NODE(){return Od||(Od=new n(new or(wT),null,nl.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_L(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Od}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Od:r}}getChild(t){let r=Oe(t);return r===null?this:this.getImmediateChild(r).getChild(nt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Fe(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Od:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Oe(t);if(i===null)return r;{q(Oe(t)!==".priority"||Uo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(nt(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(cn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+mL(this.getPriority().val())+":"),this.forEachChild(cn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":WF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Fe(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Fe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Fe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Fe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Fe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gd?-1:0}withIndex(t){if(t===Jc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Jc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(cn),o=r.getIterator(cn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Jc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),qb=class extends ut{constructor(){super(new or(wT),ut.EMPTY_NODE,nl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ut.EMPTY_NODE}isEmpty(){return!1}},Gd=new qb;Object.defineProperties(Fe,{MIN:{value:new Fe(Xc,ut.EMPTY_NODE)},MAX:{value:new Fe(Ys,Gd)}});qm.__EMPTY_NODE=ut.EMPTY_NODE;tl.__childrenNodeConstructor=ut;UK(Gd);BK(Gd);var HK=!0;function an(n,e=null){if(n===null)return ut.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new tl(t,an(e))}if(!(n instanceof Array)&&HK){let t=[],r=!1;if(sr(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=an(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Fe(s,c)))}}),t.length===0)return ut.EMPTY_NODE;let o=Wm(t,VK,s=>s.name,wT);if(r){let s=Wm(t,cn.getCompare());return new ut(o,an(e),new nl({".priority":s},{".priority":cn}))}else return new ut(o,an(e),nl.Default)}else{let t=ut.EMPTY_NODE;return sr(n,(r,i)=>{if(oi(n,r)&&r.substring(0,1)!=="."){let o=an(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(an(e))}}jK(an);var Wb=class extends el{constructor(e){super(),this.indexPath_=e,q(!Me(e)&&Oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?sl(e.name,t.name):o}makePost(e,t){let r=an(e),i=ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new Fe(t,i)}maxPost(){let e=ut.EMPTY_NODE.updateChild(this.indexPath_,Gd);return new Fe(Ys,e)}toString(){return hL(this.indexPath_,0).join("/")}};var Gb=class extends el{compare(e,t){let r=e.node.compareTo(t.node);return r===0?sl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Fe.MIN}maxPost(){return Fe.MAX}makePost(e,t){let r=an(e);return new Fe(t,r)}toString(){return".value"}},zK=new Gb;function qK(n){return{type:"value",snapshotNode:n}}function WK(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function GK(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function AF(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function KK(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Kb=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xc}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function RF(n){let e={};if(n.isDefault())return e;let t;if(n.index_===cn?t="$priority":n.index_===zK?t="$value":n.index_===Jc?t="$key":(q(n.index_ instanceof Wb,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ot(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Ot(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Ot(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Ot(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Ot(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function xF(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==cn&&(e.i=n.index_.toString()),e}var Qb=class n extends $m{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=qd("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=RF(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),Ds(this.listens_,s)===a){let g;u?u===401?g="permission_denied":g="rest_error:"+u:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=RF(e._queryParams),r=e._path.toString(),i=new ni;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wo(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ac(a.responseText)}catch{Ln("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ln("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Yb=class{constructor(){this.rootNode_=ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Gm(){return{value:null,children:new Map}}function EL(n,e,t){if(Me(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Oe(e);n.children.has(r)||n.children.set(r,Gm());let i=n.children.get(r);e=nt(e),EL(i,e,t)}}function Zb(n,e,t){n.value!==null?t(e,n.value):QK(n,(r,i)=>{let o=new Ye(e.toString()+"/"+r);Zb(i,o,t)})}function QK(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Jb=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&sr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var PF=10*1e3,YK=30*1e3,ZK=5*60*1e3,Xb=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Jb(e);let r=PF+(YK-PF)*Math.random();Ld(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;sr(e,(i,o)=>{o>0&&oi(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Ld(this.reportStats_.bind(this),Math.floor(Math.random()*2*ZK))}};var Wi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Wi||{});function wL(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function IL(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function CL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var eT=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Wi.ACK_USER_WRITE,this.source=wL()}operationForChild(e){if(Me(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ye(e));return new n(qe(),t,this.revert)}}else return q(Oe(this.path)===e,"operationForChild called for unrelated child."),new n(nt(this.path),this.affectedTree,this.revert)}};var rl=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Wi.OVERWRITE}operationForChild(e){return Me(this.path)?new n(this.source,qe(),this.snap.getImmediateChild(e)):new n(this.source,nt(this.path),this.snap)}};var Km=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Wi.MERGE}operationForChild(e){if(Me(this.path)){let t=this.children.subtree(new Ye(e));return t.isEmpty()?null:t.value?new rl(this.source,qe(),t.value):new n(this.source,qe(),t)}else return q(Oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,nt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Bd=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;let t=Oe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function JK(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(KK(s.childName,s.snapshotNode))}),Fd(n,i,"child_removed",e,r,t),Fd(n,i,"child_added",e,r,t),Fd(n,i,"child_moved",o,r,t),Fd(n,i,"child_changed",e,r,t),Fd(n,i,"value",e,r,t),i}function Fd(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>eQ(n,a,c)),s.forEach(a=>{let c=XK(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function XK(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function eQ(n,e,t){if(e.childName==null||t.childName==null)throw Ts("Should only compare child_ events.");let r=new Fe(e.childName,e.snapshotNode),i=new Fe(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function bL(n,e){return{eventCache:n,serverCache:e}}function Ud(n,e,t,r){return bL(new Bd(e,t,r),n.serverCache)}function TL(n,e,t,r){return bL(n.eventCache,new Bd(e,t,r))}function tT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zs(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var bb,tQ=()=>(bb||(bb=new or(tK)),bb),In=class n{static fromObject(e){let t=new n(null);return sr(e,(r,i)=>{t=t.set(new Ye(r),i)}),t}constructor(e,t=tQ()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:qe(),value:this.value};if(Me(e))return null;{let r=Oe(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(nt(e),t);return o!=null?{path:Vt(new Ye(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{let t=Oe(e),r=this.children.get(t);return r!==null?r.subtree(nt(e)):new n(null)}}set(e,t){if(Me(e))return new n(t,this.children);{let r=Oe(e),o=(this.children.get(r)||new n(null)).set(nt(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Me(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Oe(e),r=this.children.get(t);if(r){let i=r.remove(nt(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Me(e))return this.value;{let t=Oe(e),r=this.children.get(t);return r?r.get(nt(e)):null}}setTree(e,t){if(Me(e))return t;{let r=Oe(e),o=(this.children.get(r)||new n(null)).setTree(nt(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(qe(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Vt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,qe(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Me(e))return null;{let o=Oe(e),s=this.children.get(o);return s?s.findOnPath_(nt(e),Vt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,qe(),t)}foreachOnPath_(e,t,r){if(Me(e))return this;{this.value&&r(t,this.value);let i=Oe(e),o=this.children.get(i);return o?o.foreachOnPath_(nt(e),Vt(t,i),r):new n(null)}}foreach(e){this.foreach_(qe(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var kr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new In(null))}};function jd(n,e,t){if(Me(e))return new kr(new In(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=ir(i,e);return o=o.updateChild(s,t),new kr(n.writeTree_.set(i,o))}else{let i=new In(t),o=n.writeTree_.setTree(e,i);return new kr(o)}}}function MF(n,e,t){let r=n;return sr(t,(i,o)=>{r=jd(r,Vt(e,i),o)}),r}function NF(n,e){if(Me(e))return kr.empty();{let t=n.writeTree_.setTree(e,new In(null));return new kr(t)}}function nT(n,e){return Js(n,e)!=null}function Js(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ir(t.path,e)):null}function kF(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(cn,(r,i)=>{e.push(new Fe(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Fe(r,i.value))}),e}function Vo(n,e){if(Me(e))return n;{let t=Js(n,e);return t!=null?new kr(new In(t)):new kr(n.writeTree_.subtree(e))}}function rT(n){return n.writeTree_.isEmpty()}function il(n,e){return DL(qe(),n.writeTree_,e)}function DL(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=DL(Vt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Vt(n,".priority"),r)),t}}function SL(n,e){return ML(e,n)}function nQ(n,e,t,r,i){q(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jd(n.visibleWrites,e,t)),n.lastWriteId=r}function rQ(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function iQ(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);q(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&oQ(a,r.path)?i=!1:Nr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return sQ(n),!0;if(r.snap)n.visibleWrites=NF(n.visibleWrites,r.path);else{let a=r.children;sr(a,c=>{n.visibleWrites=NF(n.visibleWrites,Vt(r.path,c))})}return!0}else return!1}function oQ(n,e){if(n.snap)return Nr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Nr(Vt(n.path,t),e))return!0;return!1}function sQ(n){n.visibleWrites=AL(n.allWrites,aQ,qe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function aQ(n){return n.visible}function AL(n,e,t){let r=kr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Nr(t,s)?(a=ir(t,s),r=jd(r,a,o.snap)):Nr(s,t)&&(a=ir(s,t),r=jd(r,qe(),o.snap.getChild(a)));else if(o.children){if(Nr(t,s))a=ir(t,s),r=MF(r,a,o.children);else if(Nr(s,t))if(a=ir(s,t),Me(a))r=MF(r,qe(),o.children);else{let c=Ds(o.children,Oe(a));if(c){let u=c.getChild(nt(a));r=jd(r,qe(),u)}}}else throw Ts("WriteRecord should have .snap or .children")}}return r}function RL(n,e,t,r,i){if(!r&&!i){let o=Js(n.visibleWrites,e);if(o!=null)return o;{let s=Vo(n.visibleWrites,e);if(rT(s))return t;if(t==null&&!nT(s,qe()))return null;{let a=t||ut.EMPTY_NODE;return il(s,a)}}}else{let o=Vo(n.visibleWrites,e);if(!i&&rT(o))return t;if(!i&&t==null&&!nT(o,qe()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Nr(u.path,e)||Nr(e,u.path))},a=AL(n.allWrites,s,e),c=t||ut.EMPTY_NODE;return il(a,c)}}}function cQ(n,e,t){let r=ut.EMPTY_NODE,i=Js(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(cn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Vo(n.visibleWrites,e);return t.forEachChild(cn,(s,a)=>{let c=il(Vo(o,new Ye(s)),a);r=r.updateImmediateChild(s,c)}),kF(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Vo(n.visibleWrites,e);return kF(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function lQ(n,e,t,r,i){q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Vt(e,t);if(nT(n.visibleWrites,o))return null;{let s=Vo(n.visibleWrites,o);return rT(s)?i.getChild(t):il(s,i.getChild(t))}}function uQ(n,e,t,r){let i=Vt(e,t),o=Js(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Vo(n.visibleWrites,i);return il(s,r.getNode().getImmediateChild(t))}else return null}function dQ(n,e){return Js(n.visibleWrites,e)}function hQ(n,e,t,r,i,o,s){let a,c=Vo(n.visibleWrites,e),u=Js(c,qe());if(u!=null)a=u;else if(t!=null)a=il(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),g=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),m=g.getNext();for(;m&&d.length<i;)f(m,r)!==0&&d.push(m),m=g.getNext();return d}else return[]}function fQ(){return{visibleWrites:kr.empty(),allWrites:[],lastWriteId:-1}}function iT(n,e,t,r){return RL(n.writeTree,n.treePath,e,t,r)}function xL(n,e){return cQ(n.writeTree,n.treePath,e)}function OF(n,e,t,r){return lQ(n.writeTree,n.treePath,e,t,r)}function Qm(n,e){return dQ(n.writeTree,Vt(n.treePath,e))}function pQ(n,e,t,r,i,o){return hQ(n.writeTree,n.treePath,e,t,r,i,o)}function IT(n,e,t){return uQ(n.writeTree,n.treePath,e,t)}function PL(n,e){return ML(Vt(n.treePath,e),n.writeTree)}function ML(n,e){return{treePath:n,writeTree:e}}var oT=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,AF(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,GK(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,WK(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,AF(r,e.snapshotNode,i.oldSnap));else throw Ts("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var sT=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},NL=new sT,$d=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Bd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return IT(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Zs(this.viewCache_),o=pQ(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function gQ(n,e){q(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function mQ(n,e,t,r,i){let o=new oT,s,a;if(t.type===Wi.OVERWRITE){let u=t;u.source.fromUser?s=aT(n,e,u.path,u.snap,r,i,o):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Me(u.path),s=Ym(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Wi.MERGE){let u=t;u.source.fromUser?s=vQ(n,e,u.path,u.children,r,i,o):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=cT(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Wi.ACK_USER_WRITE){let u=t;u.revert?s=wQ(n,e,u.path,r,i,o):s=yQ(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===Wi.LISTEN_COMPLETE)s=EQ(n,e,t.path,r,o);else throw Ts("Unknown operation type: "+t.type);let c=o.getChanges();return _Q(e,s,c),{viewCache:s,changes:c}}function _Q(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(qK(tT(e)))}}function kL(n,e,t,r,i,o){let s=e.eventCache;if(Qm(r,t)!=null)return e;{let a,c;if(Me(t))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Zs(e),d=u instanceof ut?u:ut.EMPTY_NODE,f=xL(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=iT(r,Zs(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=Oe(t);if(u===".priority"){q(Uo(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=OF(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=nt(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let g=OF(r,t,s.getNode(),c);g!=null?f=s.getNode().getImmediateChild(u).updateChild(d,g):f=s.getNode().getImmediateChild(u)}else f=IT(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return Ud(e,a,s.isFullyInitialized()||Me(t),n.filter.filtersNodes())}}function Ym(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(Me(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),m,null)}else{let m=Oe(t);if(!c.isCompleteForPath(t)&&Uo(t)>1)return e;let w=nt(t),k=c.getNode().getImmediateChild(m).updateChild(w,r);m===".priority"?u=d.updatePriority(c.getNode(),k):u=d.updateChild(c.getNode(),m,k,w,NL,null)}let f=TL(e,u,c.isFullyInitialized()||Me(t),d.filtersNodes()),g=new $d(i,f,o);return kL(n,f,t,i,g,a)}function aT(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new $d(i,e,o);if(Me(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Ud(e,u,!0,n.filter.filtersNodes());else{let f=Oe(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Ud(e,u,a.isFullyInitialized(),a.isFiltered());else{let g=nt(t),m=a.getNode().getImmediateChild(f),w;if(Me(g))w=r;else{let N=d.getCompleteChild(f);N!=null?dL(g)===".priority"&&N.getChild(fL(g)).isEmpty()?w=N:w=N.updateChild(g,r):w=ut.EMPTY_NODE}if(m.equals(w))c=e;else{let N=n.filter.updateChild(a.getNode(),f,w,g,d,s);c=Ud(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function FF(n,e){return n.eventCache.isCompleteForChild(e)}function vQ(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Vt(t,c);FF(e,Oe(d))&&(a=aT(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Vt(t,c);FF(e,Oe(d))||(a=aT(n,a,d,u,i,o,s))}),a}function LF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function cT(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Me(t)?u=r:u=new In(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let m=e.serverCache.getNode().getImmediateChild(f),w=LF(n,m,g);c=Ym(n,c,new Ye(f),w,i,o,s,a)}}),u.children.inorderTraversal((f,g)=>{let m=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!m){let w=e.serverCache.getNode().getImmediateChild(f),N=LF(n,w,g);c=Ym(n,c,new Ye(f),N,i,o,s,a)}}),c}function yQ(n,e,t,r,i,o,s){if(Qm(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Me(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Ym(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Me(t)){let u=new In(null);return c.getNode().forEachChild(Jc,(d,f)=>{u=u.set(new Ye(d),f)}),cT(n,e,t,u,i,o,a,s)}else return e}else{let u=new In(null);return r.foreach((d,f)=>{let g=Vt(t,d);c.isCompleteForPath(g)&&(u=u.set(d,c.getNode().getChild(g)))}),cT(n,e,t,u,i,o,a,s)}}function EQ(n,e,t,r,i){let o=e.serverCache,s=TL(e,o.getNode(),o.isFullyInitialized()||Me(t),o.isFiltered());return kL(n,s,t,r,NL,i)}function wQ(n,e,t,r,i,o){let s;if(Qm(r,t)!=null)return e;{let a=new $d(r,e,i),c=e.eventCache.getNode(),u;if(Me(t)||Oe(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=iT(r,Zs(e));else{let f=e.serverCache.getNode();q(f instanceof ut,"serverChildren would be complete if leaf node"),d=xL(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=Oe(t),f=IT(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,nt(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,ut.EMPTY_NODE,nt(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=iT(r,Zs(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Qm(r,qe())!=null,Ud(e,u,s,n.filter.filtersNodes())}}function IQ(n,e){let t=Zs(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Me(e)&&!t.getImmediateChild(Oe(e)).isEmpty())?t.getChild(e):null}function VF(n,e,t,r){e.type===Wi.MERGE&&e.source.queryId!==null&&(q(Zs(n.viewCache_),"We should always have a full cache before handling merges"),q(tT(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=mQ(n.processor_,i,e,t,r);return gQ(n.processor_,o.viewCache),q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,CQ(n,o.changes,o.viewCache.eventCache.getNode(),null)}function CQ(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return JK(n.eventGenerator_,e,t,i)}var UF;function bQ(n){q(!UF,"__referenceConstructor has already been defined"),UF=n}function CT(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return q(o!=null,"SyncTree gave us an op for an invalid query."),VF(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(VF(s,e,t,r));return o}}function bT(n,e){let t=null;for(let r of n.views.values())t=t||IQ(r,e);return t}var jF;function TQ(n){q(!jF,"__referenceConstructor has already been defined"),jF=n}var Zm=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new In(null),this.pendingWriteTree_=fQ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function DQ(n,e,t,r,i){return nQ(n.pendingWriteTree_,e,t,r,i),i?Xm(n,new rl(wL(),e,t)):[]}function Yc(n,e,t=!1){let r=rQ(n.pendingWriteTree_,e);if(iQ(n.pendingWriteTree_,e)){let o=new In(null);return r.snap!=null?o=o.set(qe(),!0):sr(r.children,s=>{o=o.set(new Ye(s),!0)}),Xm(n,new eT(r.path,o,t))}else return[]}function Jm(n,e,t){return Xm(n,new rl(IL(),e,t))}function SQ(n,e,t){let r=In.fromObject(t);return Xm(n,new Km(IL(),e,r))}function AQ(n,e,t,r){let i=VL(n,r);if(i!=null){let o=UL(i),s=o.path,a=o.queryId,c=ir(s,e),u=new rl(CL(a),c,t);return jL(n,s,u)}else return[]}function RQ(n,e,t,r){let i=VL(n,r);if(i){let o=UL(i),s=o.path,a=o.queryId,c=ir(s,e),u=In.fromObject(t),d=new Km(CL(a),c,u);return jL(n,s,d)}else return[]}function OL(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=ir(s,e),u=bT(a,c);if(u)return u});return RL(i,e,o,t,!0)}function Xm(n,e){return FL(e,n.syncPointTree_,null,SL(n.pendingWriteTree_,qe()))}function FL(n,e,t,r){if(Me(n.path))return LL(n,e,t,r);{let i=e.get(qe());t==null&&i!=null&&(t=bT(i,qe()));let o=[],s=Oe(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=PL(r,s);o=o.concat(FL(a,c,u,d))}return i&&(o=o.concat(CT(i,n,r,t))),o}}function LL(n,e,t,r){let i=e.get(qe());t==null&&i!=null&&(t=bT(i,qe()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=PL(r,s),d=n.operationForChild(s);d&&(o=o.concat(LL(d,a,c,u)))}),i&&(o=o.concat(CT(i,n,r,t))),o}function VL(n,e){return n.tagToQueryMap.get(e)}function UL(n){let e=n.indexOf("$");return q(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ye(n.substr(0,e))}}function jL(n,e,t){let r=n.syncPointTree_.get(e);q(r,"Missing sync point for query tag that we're tracking");let i=SL(n.pendingWriteTree_,e);return CT(r,t,i,null)}var lT=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},uT=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Vt(this.path_,e);return new n(this.syncTree_,t)}node(){return OL(this.syncTree_,this.path_)}},xQ=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},BF=function(n,e,t){if(!n||typeof n!="object")return n;if(q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return PQ(n[".sv"],e,t);if(typeof n[".sv"]=="object")return MQ(n[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},PQ=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:q(!1,"Unexpected server value: "+n)}},MQ=function(n,e,t){n.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&q(!1,"Unexpected increment value: "+r);let i=e.node();if(q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},NQ=function(n,e,t,r){return TT(e,new uT(t,n),r)},kQ=function(n,e,t){return TT(n,new lT(e),t)};function TT(n,e,t){let r=n.getPriority().val(),i=BF(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=BF(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new tl(a,an(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new tl(i))),s.forEachChild(cn,(a,c)=>{let u=TT(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var Hd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function DT(n,e){let t=e instanceof Ye?e:new Ye(e),r=n,i=Oe(t);for(;i!==null;){let o=Ds(r.node.children,i)||{children:{},childCount:0};r=new Hd(i,r,o),t=nt(t),i=Oe(t)}return r}function al(n){return n.node.value}function BL(n,e){n.node.value=e,dT(n)}function $L(n){return n.node.childCount>0}function OQ(n){return al(n)===void 0&&!$L(n)}function e_(n,e){sr(n.node.children,(t,r)=>{e(new Hd(t,n,r))})}function HL(n,e,t,r){t&&!r&&e(n),e_(n,i=>{HL(i,e,!0,r)}),t&&r&&e(n)}function FQ(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Kd(n){return new Ye(n.parent===null?n.name:Kd(n.parent)+"/"+n.name)}function dT(n){n.parent!==null&&LQ(n.parent,n.name,n)}function LQ(n,e,t){let r=OQ(t),i=oi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,dT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,dT(n))}var VQ=/[\[\].#$\/\u0000-\u001F\u007F]/,UQ=/[\[\].#$\u0000-\u001F\u007F]/,Tb=10*1024*1024,zL=function(n){return typeof n=="string"&&n.length!==0&&!VQ.test(n)},jQ=function(n){return typeof n=="string"&&n.length!==0&&!UQ.test(n)},BQ=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jQ(n)};var qL=function(n,e,t){let r=t instanceof Ye?new Ub(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Gs(r));if(typeof e=="function")throw new Error(n+"contains a function "+Gs(r)+" with contents = "+e.toString());if(GF(e))throw new Error(n+"contains "+e.toString()+" "+Gs(r));if(typeof e=="string"&&e.length>Tb/3&&Hu(e)>Tb)throw new Error(n+"contains a string greater than "+Tb+" utf8 bytes "+Gs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(sr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!zL(s)))throw new Error(n+" contains an invalid key ("+s+") "+Gs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MK(r,s),qL(n,a,r),NK(r)}),i&&o)throw new Error(n+' contains ".value" child '+Gs(r)+" in addition to actual children.")}};var $Q=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zL(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!BQ(t))throw new Error(UM(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var hT=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function HQ(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!pL(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function Xs(n,e,t){HQ(n,t),zQ(n,r=>Nr(r,e)||Nr(e,r))}function zQ(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(qQ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function qQ(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Qs&&sn("event: "+t.toString()),Wd(r)}}}var WQ="repo_interrupt",GQ=25,fT=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gm(),this.transactionQueueTree_=new Hd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function KQ(n,e,t){if(n.stats_=yT(n.repoInfo_),n.forceRestClient_||aK())n.server_=new Qb(n.repoInfo_,(r,i,o,s)=>{$F(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>HF(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ot(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ET(n.repoInfo_,e,(r,i,o,s)=>{$F(n,r,i,o,s)},r=>{HF(n,r)},r=>{YQ(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=lK(n.repoInfo_,()=>new Xb(n.stats_,n.server_)),n.infoData_=new Yb,n.infoSyncTree_=new Zm({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Jm(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),ST(n,"connected",!1),n.serverSyncTree_=new Zm({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);Xs(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function QQ(n){let t=n.infoData_.getNode(new Ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function WL(n){return xQ({timestamp:QQ(n)})}function $F(n,e,t,r,i){n.dataUpdateCount++;let o=new Ye(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=$u(t,u=>an(u));s=RQ(n.serverSyncTree_,o,c,i)}else{let c=an(t);s=AQ(n.serverSyncTree_,o,c,i)}else if(r){let c=$u(t,u=>an(u));s=SQ(n.serverSyncTree_,o,c)}else{let c=an(t);s=Jm(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=RT(n,o)),Xs(n.eventQueue_,a,s)}function HF(n,e){ST(n,"connected",e),e===!1&&JQ(n)}function YQ(n,e){sr(e,(t,r)=>{ST(n,t,r)})}function ST(n,e,t){let r=new Ye("/.info/"+e),i=an(t);n.infoData_.updateSnapshot(r,i);let o=Jm(n.infoSyncTree_,r,i);Xs(n.eventQueue_,r,o)}function ZQ(n){return n.nextWriteId_++}function JQ(n){GL(n,"onDisconnectEvents");let e=WL(n),t=Gm();Zb(n.onDisconnect_,qe(),(i,o)=>{let s=NQ(i,o,n.serverSyncTree_,e);EL(t,i,s)});let r=[];Zb(t,qe(),(i,o)=>{r=r.concat(Jm(n.serverSyncTree_,i,o));let s=nY(n,i);RT(n,s)}),n.onDisconnect_=Gm(),Xs(n.eventQueue_,qe(),r)}function XQ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WQ)}function GL(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),sn(t,...e)}function KL(n,e,t){return OL(n.serverSyncTree_,e,t)||ut.EMPTY_NODE}function AT(n,e=n.transactionQueueTree_){if(e||t_(n,e),al(e)){let t=YL(n,e);q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&eY(n,Kd(e),t)}else $L(e)&&e_(e,t=>{AT(n,t)})}function eY(n,e,t){let r=t.map(u=>u.currentWriteId),i=KL(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=ir(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{GL(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(Yc(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();t_(n,DT(n.transactionQueueTree_,e)),AT(n,n.transactionQueueTree_),Xs(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Wd(f[g])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Ln("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}RT(n,e)}},s)}function RT(n,e){let t=QL(n,e),r=Kd(t),i=YL(n,t);return tY(n,i,r),r}function tY(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=ir(t,c.path),d=!1,f;if(q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Yc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=GQ)d=!0,f="maxretry",i=i.concat(Yc(n.serverSyncTree_,c.currentWriteId,!0));else{let g=KL(n,c.path,s);c.currentInputSnapshot=g;let m=e[a].update(g.val());if(m!==void 0){qL("transaction failed: Data returned ",m,c.path);let w=an(m);typeof m=="object"&&m!=null&&oi(m,".priority")||(w=w.updatePriority(g.getPriority()));let k=c.currentWriteId,B=WL(n),ne=kQ(w,g,B);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=ne,c.currentWriteId=ZQ(n),s.splice(s.indexOf(k),1),i=i.concat(DQ(n.serverSyncTree_,c.path,ne,c.currentWriteId,c.applyLocally)),i=i.concat(Yc(n.serverSyncTree_,k,!0))}else d=!0,f="nodata",i=i.concat(Yc(n.serverSyncTree_,c.currentWriteId,!0))}Xs(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}t_(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Wd(r[a]);AT(n,n.transactionQueueTree_)}function QL(n,e){let t,r=n.transactionQueueTree_;for(t=Oe(e);t!==null&&al(r)===void 0;)r=DT(r,t),e=nt(e),t=Oe(e);return r}function YL(n,e){let t=[];return ZL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ZL(n,e,t){let r=al(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);e_(e,i=>{ZL(n,i,t)})}function t_(n,e){let t=al(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,BL(e,t.length>0?t:void 0)}e_(e,r=>{t_(n,r)})}function nY(n,e){let t=Kd(QL(n,e)),r=DT(n.transactionQueueTree_,e);return FQ(r,i=>{Db(n,i)}),Db(n,r),HL(r,i=>{Db(n,i)}),t}function Db(n,e){let t=al(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(q(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(q(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Yc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?BL(e,void 0):t.length=o+1,Xs(n.eventQueue_,Kd(e),i);for(let s=0;s<r.length;s++)Wd(r[s])}}function rY(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function iY(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ln(`Invalid query segment '${t}' in query '${n}'`)}return e}var zF=function(n,e){let t=oY(n),r=t.namespace;t.domain==="firebase.com"&&Gi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Gi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||X7();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new jm(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ye(t.pathString)}},oY=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=rY(n.substring(d,f)));let g=iY(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let m=e.slice(0,u);if(m.toLowerCase()==="localhost")t="localhost";else if(m.split(".").length<=2)t=m;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in g&&(o=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var pT=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Me(this._path)?null:dL(this._path)}get ref(){return new ol(this._repo,this._path)}get _queryIdentifier(){let e=xF(this._queryParams),t=vT(e);return t==="{}"?"default":t}get _queryObject(){return xF(this._queryParams)}isEqual(e){if(e=tt(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=pL(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+PK(this._path)}};var ol=class n extends pT{constructor(e,t){super(e,t,new Kb,!1)}get parent(){let e=fL(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};bQ(ol);TQ(ol);var sY="FIREBASE_DATABASE_EMULATOR_HOST",gT={},aY=!1;function cY(n,e,t,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=ri(o);n.repoInfo_=new jm(e,s,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function lY(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Gi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=zF(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[sY]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=zF(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Vd(Vd.OWNER):new Mb(n.name,n.options,e);$Q("Invalid Firebase Database URL",s),Me(s.path)||Gi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=dY(a,n,d,new Pb(n,t));return new mT(f,n)}function uY(n,e){let t=gT[e];(!t||t[n.key]!==n)&&Gi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),XQ(n),delete t[n.key]}function dY(n,e,t,r){let i=gT[e.name];i||(i={},gT[e.name]=i);let o=i[n.toURLString()];return o&&Gi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new fT(n,aY,t,r),i[n.toURLString()]=o,o}var mT=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(KQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ol(this._repo,qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uY(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gi("Cannot call "+e+" on a deleted database.")}};function JL(n=Ni(),e){let t=Co(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Yp("database");r&&XL(t,...r)}return t}function XL(n,e,t,r={}){n=tt(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Qn(r,o.repoInfo_.emulatorOptions))return;Gi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Gi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vd(Vd.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:Zp(r.mockUserToken,n.app.options.projectId);s=new Vd(a)}ri(e)&&(lc(e),uc("Database",!0)),cY(o,i,r,s)}function hY(n){Y7(ai),Nn(new $t("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return lY(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),ze(hF,fF,n),ze(hF,fF,"esm2017")}ET.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ET.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};hY();var Qd=class{constructor(e){return e}},eV="database",xT=class{constructor(){return bo(eV)}};var PT=new te("angularfire2.database-instances");function fY(n,e){let t=Rs(eV,n,e);return t&&new Qd(t)}function pY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Qd(r)}}var gY={provide:xT,deps:[[new bt,PT]]},mY={provide:Qd,useFactory:fY,deps:[[new bt,PT],br]};function tV(n,...e){return ze("angularfire",ci.full,"rtdb"),Hn([mY,gY,{provide:PT,useFactory:pY(n),multi:!0,deps:[Ve,ht,li,ki,[new bt,Ms],[new bt,Do],...e]}])}var nV=Qe(JL,!0);var rV={providers:[Dx({eventCoalescing:!0}),gw(dF),Jw(()=>Xw({projectId:"theotown-political-manager",appId:"1:890095961190:web:d5a83c5d649d1a7835d9a7",storageBucket:"theotown-political-manager.firebasestorage.app",apiKey:"AIzaSyCY0qVcrUfdxfZsZEhOTRQGxbF77JChUTY",authDomain:"theotown-political-manager.firebaseapp.com",messagingSenderId:"890095961190"})),JO(()=>tF()),tV(()=>nV()),Jw(()=>Xw({projectId:"theotown-political-manager",appId:"1:890095961190:web:d5a83c5d649d1a7835d9a7",storageBucket:"theotown-political-manager.firebasestorage.app",apiKey:"AIzaSyCY0qVcrUfdxfZsZEhOTRQGxbF77JChUTY",authDomain:"theotown-political-manager.firebaseapp.com",messagingSenderId:"890095961190"})),c1(()=>u1())]};var _Y=()=>["/reinos"],vY=()=>["/cidades"],yY=()=>["/partidos"],EY=()=>["/eleicoes"],wY=()=>["/leis"],n_=class n{title="theotown-political-manager";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xt({type:n,selectors:[["app-root"]],decls:29,vars:10,consts:[[1,"header"],[1,"logo"],[1,"search-bar"],["type","text","placeholder","Buscar..."],[1,"container"],[1,"sidebar"],[1,"nav-list"],["routerLinkActive","active",3,"routerLink"],[1,"main-content"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),R(2,"Meu Mundo Theotown"),E(),I(3,"div",2),ft(4,"input",3),I(5,"button"),R(6,"\u{1F50E}"),E()()(),I(7,"div",4)(8,"aside",5)(9,"h2"),R(10,"Menu"),E(),I(11,"ul",6)(12,"li")(13,"a",7),R(14,"Reinos"),E()(),I(15,"li")(16,"a",7),R(17,"Cidades"),E()(),I(18,"li")(19,"a",7),R(20,"Partidos"),E()(),I(21,"li")(22,"a",7),R(23,"Elei\xE7\xF5es"),E()(),I(24,"li")(25,"a",7),R(26,"Leis"),E()()()(),I(27,"main",8),ft(28,"router-outlet"),E()()),t&2&&(P(13),z("routerLink",$a(5,_Y)),P(3),z("routerLink",$a(6,vY)),P(3),z("routerLink",$a(7,yY)),P(3),z("routerLink",$a(8,EY)),P(3),z("routerLink",$a(9,wY)))},dependencies:[en,Iu,Zr,pw],styles:[".container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f0f2f5}.sidebar[_ngcontent-%COMP%]{width:220px;background-color:#34495e;color:#fff;padding:20px;box-shadow:2px 0 5px #0000001a}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#ecf0f1}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#ecf0f1;padding:10px 15px;border-radius:4px;transition:background-color .2s ease}.nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#2c3e50}.nav-list[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#28a7e0}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;background-color:#f0f2f5}.header[_ngcontent-%COMP%]{background-color:#34495e;color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 10px;border-radius:3px;border:1px solid #ccc;margin-right:5px;width:200px}"]})};jE(n_,rV).catch(n=>console.error(n));
